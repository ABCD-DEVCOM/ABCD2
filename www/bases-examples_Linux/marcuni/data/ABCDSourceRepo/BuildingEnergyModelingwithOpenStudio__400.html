<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Untitled</title>
</head>
<body><div class="page"><p/>
<p>Larry&nbsp;Brackney&nbsp;&middot; Andrew&nbsp;Parker&nbsp;  
Daniel&nbsp;Macumber&nbsp;&middot; Kyle&nbsp;Benne&nbsp;  
</p>
<p>Building Energy 
Modeling with 
OpenStudio
A Practical Guide for Students and 
Professionals</p>
<p/>
</div>
<div class="page"><p/>
<p>Building Energy Modeling with OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>Larry&nbsp;Brackney &bull; Andrew&nbsp;Parker 
Daniel&nbsp;Macumber &bull; Kyle&nbsp;Benne
</p>
<p>Building Energy Modeling 
with OpenStudio
</p>
<p>A Practical Guide for Students and 
Professionals</p>
<p/>
</div>
<div class="page"><p/>
<p>ISBN 978-3-319-77808-2    ISBN 978-3-319-77809-9 (eBook)
https://doi.org/10.1007/978-3-319-77809-9
</p>
<p>Library of Congress Control Number: 2018939322
</p>
<p>&copy; Springer International Publishing AG, part of Springer Nature 2018, corrected publication 2018 
This work is subject to copyright. All rights are reserved by the Publisher, whether the whole or part of 
the material is concerned, specifically the rights of translation, reprinting, reuse of illustrations, 
recitation, broadcasting, reproduction on microfilms or in any other physical way, and transmission or 
information storage and retrieval, electronic adaptation, computer software, or by similar or dissimilar 
methodology now known or hereafter developed.
The use of general descriptive names, registered names, trademarks, service marks, etc. in this publication 
does not imply, even in the absence of a specific statement, that such names are exempt from the relevant 
protective laws and regulations and therefore free for general use.
The publisher, the authors and the editors are safe to assume that the advice and information in this book 
are believed to be true and accurate at the date of publication. Neither the publisher nor the authors or the 
editors give a warranty, express or implied, with respect to the material contained herein or for any errors 
or omissions that may have been made. The publisher remains neutral with regard to jurisdictional claims 
in published maps and institutional affiliations.
</p>
<p>Printed on acid-free paper
</p>
<p>This Springer imprint is published by the registered company Springer International Publishing AG 
part of Springer Nature.
The registered company address is: Gewerbestrasse 11, 6330 Cham, Switzerland
</p>
<p>Larry&nbsp;Brackney
National Renewable Energy Laboratory 
Golden, CO, USA
</p>
<p>Daniel&nbsp;Macumber
National Renewable Energy Laboratory
Golden, CO, USA
</p>
<p>Andrew&nbsp;Parker
National Renewable Energy Laboratory 
Golden, CO, USA
</p>
<p>Kyle&nbsp;Benne
National Renewable Energy Laboratory
Golden, CO, USA</p>
<p/>
<div class="annotation"><a href="https://doi.org/10.1007/978-3-319-77809-9">https://doi.org/10.1007/978-3-319-77809-9</a></div>
</div>
<div class="page"><p/>
<p>The authors dedicate this book to their 
</p>
<p>families.
</p>
<p>For Larry Brackney:
</p>
<p>Raina and Nola
</p>
<p>For Kyle Benne:
</p>
<p>Ashley and Desmond
</p>
<p>For Daniel Macumber:
</p>
<p>Kristin, Tori, Lizzy, and Natalie
</p>
<p>For Andrew Parker:
</p>
<p>Lisa and Penny</p>
<p/>
</div>
<div class="page"><p/>
<p>vii
</p>
<p>Foreword
</p>
<p>The energy, environmental, and societal challenges of the twenty-first century are 
</p>
<p>here; they are crystal clear; and they are daunting. Our responses to those chal-
</p>
<p>lenges are less clear, but one component at least is obvious&mdash;we need a better 
</p>
<p>building stock, one that uses less energy, provides greater comfort and security, 
</p>
<p>and houses and supports the economic activity of a rapidly growing and urbaniz-
</p>
<p>ing population.
</p>
<p>One of the most powerful tools in our collective belts is building energy model-
</p>
<p>ing (BEM), physics-based software simulation of building energy use given a 
</p>
<p>description of the physical building, its use patterns, and prevailing weather condi-
</p>
<p>tions. BEM is a sine qua non tool for designing and operating buildings to the 
</p>
<p>levels of energy efficiency that our future and present require. According to the 
</p>
<p>AIA 2030 Commitment report, buildings designed using BEM use 20% less 
</p>
<p>energy than those designed without it. BEM is also instrumental in developing and 
</p>
<p>updating the codes, standards, certificates, and financial incentive infrastructure 
</p>
<p>that supports energy efficiency in all building projects, including those that don&rsquo;t 
</p>
<p>directly use BEM.
</p>
<p>Today, every man-made artifact of any significance&mdash;from razors to race cars, 
</p>
<p>potato chips to computer chips, cardboard boxes to big box stores&mdash;is prototyped 
</p>
<p>virtually before being built and tested physically. Would you get on an airplane for 
</p>
<p>which only two prototypes were built and whose design and systems weren&rsquo;t 
</p>
<p>tested under a range of conditions over millions of hours of computer simulation? 
</p>
<p>I hope not. Would you shave with a razor that hasn&rsquo;t undergone tens of thousands 
</p>
<p>of hours of computer simulation? You probably would, but in actuality you do 
</p>
<p>not&mdash;the margins on razors are sufficiently small that both razors and the machines 
</p>
<p>that produce them have to be optimized to a degree that only computer simulation 
</p>
<p>can manage. Why should razors be modeled and buildings not? Buildings provide 
</p>
<p>a greater range of more important functions, and over much longer service life-
</p>
<p>times. The economics of building physical prototyping are more prohibitive; an 
</p>
<p>owner will not pay to build and test multiple prototypes before settling on the final 
</p>
<p>version. And most buildings&mdash;at least most commercial buildings&mdash;are essentially </p>
<p/>
</div>
<div class="page"><p/>
<p>viii
</p>
<p>one-offs, sufficiently different from all other buildings in terms of local context 
</p>
<p>project specifics so as to make high-level lessons transferrable but not full designs.
</p>
<p>Yet, curiously and unfortunately, most buildings are still designed without the 
</p>
<p>use of BEM.&nbsp;The same AIA 2030 Commitment report shows that only 43% of the 
</p>
<p>new commercial floor space reported in 2017 used BEM during the design pro-
</p>
<p>cess. And that number is likely inflated by the fact that the Commitment is volun-
</p>
<p>tary and that efficiency focused firms are over-represented in it. Anecdotal evidence 
</p>
<p>suggests the real number is closer to 20%. That will not do at all.
</p>
<p>The mission of the US Department of Energy&rsquo;s (DOE) Building Technologies 
</p>
<p>Office (BTO) is to envision and enable a more energy-efficient building stock. 
</p>
<p>BTO has identified increasing the use of BEM in building design as a high-priority 
</p>
<p>high- impact vector in achieving its larger energy-savings mission. BTO&rsquo;s BEM 
</p>
<p>program centers on the development of a state-of-the-art open-source BEM plat-
</p>
<p>form, which consists of the EnergyPlus BEM engine; the OpenStudio software 
</p>
<p>development kit (SDK), which facilitates application development, workflow 
</p>
<p>automation, and large- scale analysis; and the star of this book, the graphical 
</p>
<p>OpenStudio Application.
</p>
<p>The OpenStudio project has been a driving force in the evolution of BTO&rsquo;s 
</p>
<p>BEM program. OpenStudio was BTO&rsquo;s first truly open-source software project, a 
</p>
<p>strategic direction that has influenced BTO&rsquo;s entire BEM portfolio. Open-source is 
</p>
<p>not an altruistic emergent enterprise. Successful open-source projects are funded, 
</p>
<p>centrally managed, and resemble proprietary software projects in many structural 
</p>
<p>and operational ways. Source control. Code reviews. Regression testing. Bug 
</p>
<p>reporting and fixing. Pre-feature documentation. Post-feature documentation. The 
</p>
<p>full Monty. Open-source is different in that it is transparent&mdash;anyone can inspect 
</p>
<p>the algorithms and see how they are implemented under the hood. Transparency is 
</p>
<p>crucial for BEM, which has many financial and regulatory use cases. And it is dif-
</p>
<p>ferent in that it gives others the freedom to take the software and build upon it 
</p>
<p>without paying a fee, signing a non-disclosure agreement, or even notifying the 
</p>
<p>original authors. The open-source license used by OpenStudio allows derivative 
</p>
<p>works to be proprietary and commercial. For OpenStudio and BTO, open-source 
</p>
<p>has been an accelerant for industry and user adoption. EnergyPlus was re-released 
</p>
<p>under an open-source license in 2012. Between 2012 and 2016, EnergyPlus down-
</p>
<p>loads increased from about ten thousand per version to over forty thousand and the 
</p>
<p>number of third-party applications using EnergyPlus grew from three to well over 
</p>
<p>a dozen. The larger software industry has learned to live with and profit from open-
</p>
<p>source projects, the BEM industry is doing the same.
</p>
<p>OpenStudio brought other modern software paradigms to BTO&rsquo;s BEM pro-
</p>
<p>gram, and, in some cases, to the BEM industry as a whole. A library structure with 
</p>
<p>a rich application programming interface (API) created the classic three-layer 
</p>
<p>engine- middleware- application architecture found in many computer systems&mdash;
</p>
<p>think of a smartphone&rsquo;s hardware-Android-apps setup&mdash;that fosters innovation 
</p>
<p>and adoption. Online libraries that can complement centrally curated content with 
</p>
<p>&ldquo;crowd- sourced&rdquo; content. Scripting, which OpenStudio calls Measures, improves 
</p>
<p>Foreword</p>
<p/>
</div>
<div class="page"><p/>
<p>ix
</p>
<p>BEM workflow productivity, adds a layer of transparency to common BEM tasks, 
</p>
<p>and transfers BEM process expertise. Scripting acts as a building block for  
</p>
<p>large-scale BEM analyses. Software packages can run on commodity cloud  
</p>
<p>services and allow anyone with a credit card to set up and run said analyses. Web 
</p>
<p>technologies for interface development. Textbooks as BEM teaching tools!
</p>
<p>This textbook is visually heavy on the OpenStudio Application. As every kid 
</p>
<p>learns at a young age, books are much better with pictures! But like any good text-
</p>
<p>book, this one stresses universal concepts. The pictures simply hold your hand as 
</p>
<p>you learn these concepts the way learning is done best, by doing. If you are a 
</p>
<p>beginning student, you will learn how to use most of the basic features of 
</p>
<p>OpenStudio. You will also learn the basic components, structures, and processes of 
</p>
<p>BEM; weather data; thermostat set-points; constructions; schedules; thermal zon-
</p>
<p>ing; simple HVAC systems; output reports; and diagnostic variables. These con-
</p>
<p>structs are ubiquitous and work in essentially the same way in every BEM tool. If 
</p>
<p>you are a more advanced student, you will see Measures and learn how to work 
</p>
<p>with the OpenStudio Parametric Analysis Tool. You will also learn how to think 
</p>
<p>about model transformations algorithmically, how to organize design variants, 
</p>
<p>when to use large- scale analysis and optimization and how to constrain it so that 
</p>
<p>produces meaningful results, and how to reuse not only concepts but actual work 
</p>
<p>from one project to the next. You will learn about OpenStudio, but you will gain a 
</p>
<p>basic understanding of BEM and its processes that you can take with you to any 
</p>
<p>other tool. You will get a fish and learn how to fish.
</p>
<p>I hope this book helps you find a passion for BEM and that, OpenStudio or not, 
</p>
<p>you decide to pursue it more seriously and maybe even professionally. Thank you 
</p>
<p>for choosing to learn about this fascinating and important field.
</p>
<p>Technology Manager for Building Energy Modeling,  Amir&nbsp;Roth
</p>
<p>Building Technologies Office, 
</p>
<p>US Department of Energy 
</p>
<p>Washington, DC, USA
</p>
<p>February, 2018
</p>
<p>Foreword</p>
<p/>
</div>
<div class="page"><p/>
<p>xi
</p>
<p>Preface
</p>
<p>This book is intended to provide advanced undergraduate and graduate students 
</p>
<p>with an introduction to the topic of building energy modeling, simulation, analysis, 
</p>
<p>and optimization. It is assumed that the reader has a basic understanding of fluid 
</p>
<p>mechanics, thermodynamics, and heat transfer and is prepared to apply those 
</p>
<p>fundamentals to more complex systems. The authors believe that this book will also 
</p>
<p>be of value to energy efficiency professionals who are actively engaged in improving 
</p>
<p>the built environment.
</p>
<p>A number of software tools exist to model and simulate individual buildings, and 
</p>
<p>many of the concepts discussed in this text are applicable to them. That said, the 
</p>
<p>authors have structured this book around an open-source platform called OpenStudio 
</p>
<p>and its underlying EnergyPlus simulation engine. OpenStudio is intended to 
</p>
<p>facilitate the creation of many tools that make use of energy simulation to enable 
</p>
<p>decision-making by diverse stakeholders at each stage of a building&rsquo;s lifecycle. The 
</p>
<p>platform contains a number of attributes unique to energy modeling including an 
</p>
<p>object-oriented data model, extensible scripting, and an analytical framework that 
</p>
<p>scales from individual buildings up to portfolios. The reader will experience these 
</p>
<p>and other features of OpenStudio and EnergyPlus throughout the book using a pair 
</p>
<p>of example applications built with the platform.
</p>
<p>Instructors should find the material organized in a sequence that slowly builds in 
</p>
<p>complexity, enabling students to gain fundamental knowledge while applying new 
</p>
<p>skills as they progress. To that end, each chapter concludes with one or more 
</p>
<p>&ldquo;checkpoint&rdquo; exercises, so-named because they generally result in a usable model 
</p>
<p>that is built upon in a subsequent exercise. The authors consider the checkpoint 
</p>
<p>exercises as integral to the book&rsquo;s content, and we strongly urge students to work 
</p>
<p>through them in their entirety.
</p>
<p>While we believe the exercises are organized in the most appropriate order, 
</p>
<p>instructors can elect to have students work through checkpoints one and three before 
</p>
<p>proceeding to checkpoints two, four, and onwards without impacting prerequisites 
</p>
<p>for subsequent chapters. It is really up to the instructor&rsquo;s preference as to whether 
</p>
<p>they wish to maintain student focus on rudiments or begin mixing in sophisticated 
</p>
<p>applications that expand on those fundamentals more rapidly.</p>
<p/>
</div>
<div class="page"><p/>
<p>xii
</p>
<p>The final third of the book contains advanced material that may be more 
</p>
<p>appropriate for graduate students or professionals. The authors believe the material 
</p>
<p>in these chapters is well suited to prepare graduate students for a variety of research 
</p>
<p>tasks,1 however we have attempted to balance that with practical applications that 
</p>
<p>are approachable and will have resonance with current (or soon-to-be) professionals. 
</p>
<p>Again, we have attempted to organize material in the text to provide the instructor 
</p>
<p>with the greatest flexibility in adapting it to the needs of their students.
</p>
<p>Whether you are a student, instructor, or practicing energy efficiency professional, 
</p>
<p>it is our sincere hope that this book will be useful to you in learning about how the 
</p>
<p>energy performance of the built environment is modeled and analyzed. Perhaps 
</p>
<p>more importantly, it is our hope that you will use what you learn to make a real 
</p>
<p>difference in how buildings impact the environment that we all share.
</p>
<p>Golden, CO, USA Larry&nbsp;Brackney
</p>
<p> Andrew&nbsp;Parker 
</p>
<p> Daniel&nbsp;Macumber
</p>
<p> Kyle&nbsp;Benne 
</p>
<p>1 The authors and their colleagues at NREL regularly use OpenStudio on a large number of research 
</p>
<p>projects for the US Department of Energy and other clients.
</p>
<p>Preface</p>
<p/>
</div>
<div class="page"><p/>
<p>xiii
</p>
<p>Acknowledgments
</p>
<p>The authors thank their colleagues who continue to develop and improve OpenStudio 
</p>
<p>and related applications:
</p>
<p>NREL: Dr. Brian Ball, Willy Bernal, Dr. Jason DeGraw, Dr. Katherine Fleming, 
</p>
<p>Luigi Gentile Polese, David Goldwasser, Dr. Elaine Hale, Scott Horowitz, Rob 
</p>
<p>Guglielmetti, Ry Horsey, Edwin Lee, Nick Long, Noel Merket, Noah Pflaum, 
</p>
<p>Ben Polly, Joe Robertson, Marjorie Schott, Alex Swindler, and Evan Weaver
</p>
<p>Affiliated Engineers: Arif Hanif and James McNeil
</p>
<p>Ambient Energy: Eric Ringold and Matt Steen
</p>
<p>ANL: Dr. Ralph Muelheisen
</p>
<p>Autodesk: Krishnan Gowri
</p>
<p>Devetry: Katie Noland, Brian Schiller, and Allan Wintersieck
</p>
<p>Group14: Xia Fang and David Heinicke
</p>
<p>IIIT: Subhash Jegi
</p>
<p>Independent Consultants: Julien Marrec and Jason Turner
</p>
<p>LBNL: Yixing Chen, Dr. Tianzhen Hong, Baptiste Ravache, and Kaiyu Sun
</p>
<p>NORESCO: Matt Leach
</p>
<p>NRCan: Jeff Blake, Kamel Haddad, Phylroy Lopez, Maria Mottillo, and 
</p>
<p>Padmassun Rajakareyar
</p>
<p>NRCC: Iain Macdonald
</p>
<p>ORNL: Mark Adams, Piljae Im, Mini Malholtra, and Jibo Sanyal
</p>
<p>Pennsylvania State University: Chong Zhou
</p>
<p>PNNL: Yan Chen, Bing Liu, YuLong Xie, and Jian Zhang
</p>
<p>PSD: Chris Balbach
</p>
<p>OpenStudio is built on the excellent foundations of the EnergyPlus and Radiance 
</p>
<p>simulation engines and would not be possible without the contributions and hard 
</p>
<p>work of those development teams as well.
</p>
<p>We appreciate the support of NREL management including Bill Livingood and 
</p>
<p>Dr. Chuck Kutscher.</p>
<p/>
</div>
<div class="page"><p/>
<p>xiv
</p>
<p>Thanks to the following who provided constructive feedback on the book concept 
</p>
<p>and various drafts:
</p>
<p>Daniel Bishop, Ramin Faramarzi, Dr. Nelson Fumo, Dr. Gregor Henze,  
</p>
<p>Dr. Sammy Houssainy, Dr. Susan Krumdieck, and our editor Denise Penrose.
</p>
<p>And finally, we thank the US Department of Energy and Dr. Amir Roth and Dr. Dru 
</p>
<p>Crawley for funding and support of both the EnergyPlus and OpenStudio projects.
</p>
<p>Acknowledgments</p>
<p/>
</div>
<div class="page"><p/>
<p>xv
</p>
<p>Contents
</p>
<p> 1  Introduction to&nbsp;Building Energy Modeling  . . . . . . . . . . . . . . . . . . . .   1
</p>
<p> 1.1   Why Modeling? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   1
</p>
<p> 1.2   A Brief History of&nbsp;Building Energy Modeling and&nbsp;Simulation . . .   3
</p>
<p> 1.3   What Is OpenStudio? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   5
</p>
<p> 1.4   Overview of&nbsp;Book Structure  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   7
</p>
<p> 1.5   Installing OpenStudio  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   10
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   12
</p>
<p> 2  Building Envelope Specification  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   13
</p>
<p> 2.1   Building Envelope . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   13
</p>
<p> 2.2   Weather  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   13
</p>
<p> 2.3   Envelope Geometry and&nbsp;Building Spaces . . . . . . . . . . . . . . . . . . .   16
</p>
<p> 2.4   Surfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   19
</p>
<p> 2.5   Constructions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   22
</p>
<p> 2.6   Sub-Surfaces  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   23
</p>
<p> 2.7   Introduction to&nbsp;Data Inheritance in&nbsp;OpenStudio . . . . . . . . . . . . . .   25
</p>
<p> 2.8   Checkpoint One: Creating an&nbsp;Energy Model  
</p>
<p>with&nbsp;an&nbsp;Unconditioned Envelope . . . . . . . . . . . . . . . . . . . . . . . . . .   26
</p>
<p> 2.8.1   Adding Weather to&nbsp;a&nbsp;Model . . . . . . . . . . . . . . . . . . . . . . . .   26
</p>
<p> 2.8.2   Creating New Materials . . . . . . . . . . . . . . . . . . . . . . . . . . .   29
</p>
<p> 2.8.3   Importing Materials from&nbsp;Existing Models . . . . . . . . . . . .   30
</p>
<p> 2.8.4   Importing Materials from&nbsp;the&nbsp;Building  
</p>
<p>Component Library . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   35
</p>
<p> 2.8.5   Creating Construction Assemblies . . . . . . . . . . . . . . . . . . .   36
</p>
<p> 2.8.6   Creating a&nbsp;Construction Set . . . . . . . . . . . . . . . . . . . . . . . .   38
</p>
<p> 2.8.7   Creating Geometry with&nbsp;the&nbsp;OpenStudio Floor  
</p>
<p>Plan Editor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   39
</p>
<p> 2.8.8   Running Your First Energy Simulation . . . . . . . . . . . . . . .   44
</p>
<p> 2.8.9   Studying Time Series Results  . . . . . . . . . . . . . . . . . . . . . .   48
</p>
<p> 2.9   Checkpoint Two: Energy Model of&nbsp;a&nbsp;School . . . . . . . . . . . . . . . . .   50
</p>
<p> 2.10   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   56
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   58</p>
<p/>
</div>
<div class="page"><p/>
<p>xvi
</p>
<p> 3  Defining Energy Uses and&nbsp;Spaces . . . . . . . . . . . . . . . . . . . . . . . . . . . .   59
</p>
<p> 3.1   Energy Uses and&nbsp;Thermal Loads . . . . . . . . . . . . . . . . . . . . . . . . . .   59
</p>
<p> 3.2   Space Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   60
</p>
<p> 3.2.1   Schedules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   61
</p>
<p> 3.2.2   Load Definitions. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   62
</p>
<p> 3.2.3   Building a&nbsp;Space Type . . . . . . . . . . . . . . . . . . . . . . . . . . . .   70
</p>
<p> 3.3   Spaces  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   72
</p>
<p> 3.4   Checkpoint Three: Ideal Air Load Simulation  
</p>
<p>of&nbsp;a&nbsp;Small Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   76
</p>
<p> 3.4.1   Creating a&nbsp;Schedule Set . . . . . . . . . . . . . . . . . . . . . . . . . . .   77
</p>
<p> 3.4.2   Defining Our Loads . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   82
</p>
<p> 3.4.3   Defining and&nbsp;Assigning Our Space Type . . . . . . . . . . . . . .   82
</p>
<p> 3.4.4   Running the&nbsp;Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . .   87
</p>
<p> 3.4.5   Ideal Air Loads . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   88
</p>
<p> 3.5   Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model . . . .   92
</p>
<p> 3.6   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  100
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  101
</p>
<p> 4  Introduction to&nbsp;HVAC Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  103
</p>
<p> 4.1   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  103
</p>
<p> 4.2   Model Zoning . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  103
</p>
<p> 4.2.1   Rules of&nbsp;Thumb for&nbsp;Combining Spaces  
</p>
<p>into&nbsp;Thermal Zones  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  104
</p>
<p> 4.2.2   Zoning During Early Design . . . . . . . . . . . . . . . . . . . . . . .  106
</p>
<p> 4.3   HVAC System Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  106
</p>
<p> 4.3.1   Zone HVAC Equipment . . . . . . . . . . . . . . . . . . . . . . . . . . .  106
</p>
<p> 4.3.2   Add a&nbsp;Zone HVAC Component . . . . . . . . . . . . . . . . . . . . .  107
</p>
<p> 4.3.3   Air Loop Systems  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  108
</p>
<p> 4.3.4   Plant Loop Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  109
</p>
<p> 4.4   HVAC System Templates . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  111
</p>
<p> 4.4.1   Add a&nbsp;Template Air Loop HVAC System  . . . . . . . . . . . . .  113
</p>
<p> 4.5   Auto-Sizing HVAC Systems  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  118
</p>
<p> 4.5.1   Design Day Files . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  119
</p>
<p> 4.6   Checkpoint Five: Adding a&nbsp;Template HVAC System  
</p>
<p>to&nbsp;a&nbsp;School Model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  119
</p>
<p> 4.7   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  124
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  126
</p>
<p> 5  Advanced HVAC Topics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  127
</p>
<p> 5.1   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  127
</p>
<p> 5.2   Air Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  127
</p>
<p> 5.2.1   Air Loop Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . .  127
</p>
<p> 5.2.2   Sizing Air Loops  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  132
</p>
<p> 5.2.3   Air Loop Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  135
</p>
<p> 5.2.4   Air Loop Simulation Process . . . . . . . . . . . . . . . . . . . . . . .  139
</p>
<p>Contents</p>
<p/>
</div>
<div class="page"><p/>
<p>xvii
</p>
<p> 5.3   Plant Loops  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  141
</p>
<p> 5.3.1   Plant Loop Configuration . . . . . . . . . . . . . . . . . . . . . . . . . .  141
</p>
<p> 5.3.2   Plant Loop Sizing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  145
</p>
<p> 5.3.3   Plant Loop Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  148
</p>
<p> 5.3.4   Plant Loop Simulation Process  . . . . . . . . . . . . . . . . . . . . .  151
</p>
<p> 5.4   Zone Equipment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  152
</p>
<p> 5.4.1   Zone Equipment Configuration . . . . . . . . . . . . . . . . . . . . .  152
</p>
<p> 5.4.2   Zone Equipment Sizing . . . . . . . . . . . . . . . . . . . . . . . . . . .  152
</p>
<p> 5.4.3   Zone Equipment Control . . . . . . . . . . . . . . . . . . . . . . . . . .  153
</p>
<p> 5.4.4   Zone Equipment Simulation Process . . . . . . . . . . . . . . . . .  153
</p>
<p> 5.5   Service Water Systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  154
</p>
<p> 5.5.1   Defining Water Use Equipment . . . . . . . . . . . . . . . . . . . . .  154
</p>
<p> 5.5.2   Adding Water Use Equipment to&nbsp;a&nbsp;Model . . . . . . . . . . . . .  155
</p>
<p> 5.6   Checkpoint Six: Air Loops. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  157
</p>
<p> 5.7   Checkpoint Seven: Plant Loops . . . . . . . . . . . . . . . . . . . . . . . . . . .  160
</p>
<p> 5.8   Checkpoint Eight: Zone Equipment . . . . . . . . . . . . . . . . . . . . . . . .  168
</p>
<p> 5.9   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  170
</p>
<p>Reference  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  172
</p>
<p> 6  OpenStudio Measures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  173
</p>
<p> 6.1   Introduction to&nbsp;OpenStudio Measures . . . . . . . . . . . . . . . . . . . . . .  173
</p>
<p> 6.2   Accessing and&nbsp;Using Measures . . . . . . . . . . . . . . . . . . . . . . . . . . .  177
</p>
<p> 6.3   Using Measures Within the&nbsp;OpenStudio Application  . . . . . . . . . .  179
</p>
<p> 6.3.1   Applying a&nbsp;Measure Immediately to&nbsp;a&nbsp;Model . . . . . . . . . .  179
</p>
<p> 6.3.2   Adding Measures to&nbsp;an&nbsp;OpenStudio  
</p>
<p>Application Workflow . . . . . . . . . . . . . . . . . . . . . . . . . . . .  181
</p>
<p> 6.4   Introduction to&nbsp;Parametric Analysis . . . . . . . . . . . . . . . . . . . . . . . .  185
</p>
<p> 6.4.1   Starting PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  185
</p>
<p> 6.4.2   Managing Measures in&nbsp;PAT . . . . . . . . . . . . . . . . . . . . . . . .  187
</p>
<p> 6.4.3   Creating Design Alternatives in&nbsp;PAT . . . . . . . . . . . . . . . . .  191
</p>
<p> 6.4.4   Running an&nbsp;Analysis in&nbsp;PAT  . . . . . . . . . . . . . . . . . . . . . . .  193
</p>
<p> 6.4.5   Comparing Results in&nbsp;PAT . . . . . . . . . . . . . . . . . . . . . . . . .  196
</p>
<p> 6.4.6   The OpenStudio Analysis Server Tab  . . . . . . . . . . . . . . . .  197
</p>
<p> 6.5   Checkpoint Nine: Introduction to&nbsp;Parametrics  . . . . . . . . . . . . . . .  198
</p>
<p> 6.6   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  213
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  213
</p>
<p> 7  Parametric Analysis with&nbsp;OpenStudio  . . . . . . . . . . . . . . . . . . . . . . . .  215
</p>
<p> 7.1   Introduction to&nbsp;Parametric Analysis . . . . . . . . . . . . . . . . . . . . . . . .  215
</p>
<p> 7.2   OpenStudio Server . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  215
</p>
<p> 7.3   Algorithms in&nbsp;PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  217
</p>
<p> 7.3.1   Single Run . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
</p>
<p> 7.3.2   Pre-Flight . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
</p>
<p> 7.3.3   Repeat Run . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
</p>
<p> 7.3.4   Baseline Perturbation . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
</p>
<p> 7.3.5   Diagonal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  218
</p>
<p>Contents</p>
<p/>
</div>
<div class="page"><p/>
<p>xviii
</p>
<p> 7.3.6   Design of&nbsp;Experiments (DOE) . . . . . . . . . . . . . . . . . . . . . .  219
</p>
<p> 7.3.7   Latin Hypercube Sampling (LHS) . . . . . . . . . . . . . . . . . . .  219
</p>
<p> 7.3.8   Morris Method . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  220
</p>
<p> 7.3.9   Sobol Method . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  221
</p>
<p> 7.3.10   Fourier Amplitude Sensitivity Test (FAST99) Method . . .  222
</p>
<p> 7.3.11   Optim . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  222
</p>
<p> 7.3.12   Particle Swarm Optimization (PSO) . . . . . . . . . . . . . . . . .  223
</p>
<p> 7.3.13   Nondominated Sorting Genetic Algorithm 2 (NSGA2). . .  223
</p>
<p> 7.3.14   Genetic Algorithm with&nbsp;Island Evolution (GAISL) . . . . . .  225
</p>
<p> 7.3.15   Strength Pareto Evolutionary Algorithm 2 (SPEA2) . . . . .  226
</p>
<p> 7.3.16   R-GENetic Optimization Using  
</p>
<p>Derivatives (RGENOUD)  . . . . . . . . . . . . . . . . . . . . . . . . .  226
</p>
<p> 7.4   Working with&nbsp;Measure Variables and&nbsp;Arguments . . . . . . . . . . . . .  226
</p>
<p> 7.5   Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode . . . . . . . . . . . . . . . . .  231
</p>
<p> 7.5.1   The Outputs Tab in&nbsp;Algorithmic Mode . . . . . . . . . . . . . . .  231
</p>
<p> 7.5.2   The Run Tab in&nbsp;Algorithmic Mode . . . . . . . . . . . . . . . . . .  233
</p>
<p> 7.6   Working with&nbsp;OpenStudio Server  . . . . . . . . . . . . . . . . . . . . . . . . .  238
</p>
<p> 7.7   Checkpoint Ten: Sampling Problems  
</p>
<p>and&nbsp;Uncertainty Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  241
</p>
<p> 7.8   Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis 
</p>
<p>and&nbsp;Optimization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  248
</p>
<p> 7.9   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  261
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  262
</p>
<p> 8  Daylighting. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  263
</p>
<p> 8.1   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  263
</p>
<p> 8.2   Daylighting  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  264
</p>
<p> 8.2.1   Daylighting Controls . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  265
</p>
<p> 8.2.2   Illuminance Maps. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  266
</p>
<p> 8.2.3   Advanced Daylighting Objects  . . . . . . . . . . . . . . . . . . . . .  267
</p>
<p> 8.3   Checkpoint Twelve: Daylighting Analysis . . . . . . . . . . . . . . . . . . .  267
</p>
<p> 8.4   Additional Exercises  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  285
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  286
</p>
<p> 9  The OpenStudio Software Development Kit  . . . . . . . . . . . . . . . . . . .  287
</p>
<p> 9.1   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  287
</p>
<p> 9.2   OpenStudio Measure Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  287
</p>
<p> 9.3   Adapting an&nbsp;Existing Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . .  290
</p>
<p> 9.4   Checkpoint Thirteen: Adapting Measures . . . . . . . . . . . . . . . . . . .  293
</p>
<p> 9.4.1   Text Editor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  293
</p>
<p> 9.4.2   Programming Background . . . . . . . . . . . . . . . . . . . . . . . . .  293
</p>
<p> 9.4.3   Copy the&nbsp;Measure  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  293
</p>
<p> 9.4.4   Review the&nbsp;Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  294
</p>
<p> 9.4.5   Modify the&nbsp;Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  295
</p>
<p>Contents</p>
<p/>
</div>
<div class="page"><p/>
<p>xix
</p>
<p> 9.5   Creating a&nbsp;New Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  298
</p>
<p> 9.6   Checkpoint Fourteen: Creating a&nbsp;New Measure  . . . . . . . . . . . . . .  302
</p>
<p> 9.7   Checkpoint Fifteen: Testing Measures . . . . . . . . . . . . . . . . . . . . . .  306
</p>
<p> 9.8   The OpenStudio Command Line Interface  . . . . . . . . . . . . . . . . . .  309
</p>
<p> 9.9   The OpenStudio Meta Command Line Interface . . . . . . . . . . . . . .  311
</p>
<p> 9.10   Additional Exercises (for Advanced Users) . . . . . . . . . . . . . . . . . .  313
</p>
<p>References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  314
</p>
<p>Correction  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    E1
</p>
<p> Resources . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  315
</p>
<p> Common Simulation Failures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  316
</p>
<p> Simulation &ldquo;Soft&rdquo; Failures  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  318
</p>
<p> PAT Issues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  319
</p>
<p> Index . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  323
</p>
<p>The original version of this book was revised. A correction to this book can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Contents</p>
<p/>
</div>
<div class="page"><p/>
<p>xxi
</p>
<p>Abbreviations and Acronyms
</p>
<p>AEDG Advanced Energy Design Guide
</p>
<p>AIA American Institute of Architects
</p>
<p>AMI Amazon Machine Image
</p>
<p>AMY Actual Meteorological Year
</p>
<p>ANL Argonne National Laboratory
</p>
<p>API Application Program Interface
</p>
<p>ASHRAE American Society of Heating, Refrigeration, and Air-Conditioning 
</p>
<p>Engineers
</p>
<p>AWS Amazon Web Service
</p>
<p>BCL Building Component Library
</p>
<p>BEM Building Energy Modeling
</p>
<p>BLAST Building Loads Analysis and System Thermodynamics Program
</p>
<p>CAD Computer Aided Design
</p>
<p>CBECS Commercial Building Energy Consumption Survey
</p>
<p>CDD Cooling Degree Day
</p>
<p>CEC California Energy Commission
</p>
<p>CEUS California End-Use Survey
</p>
<p>CLI Command Line Interface
</p>
<p>COP Coefficient of Performance
</p>
<p>CPUC California Public Utility Commission
</p>
<p>CVRMSE Coefficient of Variation of Root Mean Squared Error
</p>
<p>CW Cold Water
</p>
<p>DCV Demand-Controlled Ventilation
</p>
<p>DOAS Dedicated Outdoor Air System
</p>
<p>DOD Department of Defense (United States)
</p>
<p>DOE Department of Energy (United States)
</p>
<p>DOE Design of Experiments
</p>
<p>DX Direct Expansion
</p>
<p>EC-2 Elastic Cloud Computing
</p>
<p>EE Energy Efficiency</p>
<p/>
</div>
<div class="page"><p/>
<p>xxii
</p>
<p>EMS Energy Management System
</p>
<p>EPW EnergyPlus Weather (File)
</p>
<p>ERV Energy Recovery Ventilation
</p>
<p>EUI Energy Use Intensity
</p>
<p>HID High-Intensity Discharge
</p>
<p>HW Hot Water
</p>
<p>IDE Integrated Development Environment
</p>
<p>IDF Input Data File
</p>
<p>gbXML Green Building Extensible Markup Language
</p>
<p>GLHEPro Ground Loop Heat Exchanger design tool Pro
</p>
<p>GSHP Ground Source Heat Pump
</p>
<p>GUI Graphical User Interface
</p>
<p>HDD Heating Degree Day
</p>
<p>HTML Hypertext Markup Language
</p>
<p>HUD Department of Housing and Urban Development (United States)
</p>
<p>HVAC Heating, Ventilation, and Air-Conditioning
</p>
<p>IES Illuminating Engineering Society
</p>
<p>JSON JavaScript Object Notation
</p>
<p>LBNL Lawrence Berkeley National Laboratory
</p>
<p>LEED&trade; Leadership in Energy and Environmental Design
</p>
<p>LHS Latin Hypercube Sampling
</p>
<p>LPD Lighting Power Density
</p>
<p>NBS National Bureau of Standards (United States)
</p>
<p>NBSLD National Bureau of Standards Load Determination program
</p>
<p>NIST National Institute of Standards and Technology (United States)
</p>
<p>NMBE Net Mean Bias Error
</p>
<p>NRCan Natural Resources Canada
</p>
<p>NREL National Renewable Energy Laboratory
</p>
<p>NSGA2 Non-dominated Sorting Genetic Algorithm 2
</p>
<p>OA Outdoor Air
</p>
<p>ORNL Oak Ridge National Laboratory
</p>
<p>OS OpenStudio
</p>
<p>OSA OpenStudio Analysis (JSON File)
</p>
<p>OSM OpenStudio Model (File)
</p>
<p>OSW OpenStudio Workflow (JSON File)
</p>
<p>PAT Parametric Analysis Tool
</p>
<p>PLR Part Load Ratio
</p>
<p>PNNL Pacific Northwest National Laboratory
</p>
<p>PSO Particle Swarm Optimization
</p>
<p>PTAC Packaged Terminal Air Conditioning
</p>
<p>RECS Residential Energy Consumption Survey
</p>
<p>RGENOUD R-GENetic Optimization Using Derivatives
</p>
<p>RTU Rooftop Unit
</p>
<p>SAT Supply Air Temperature
</p>
<p>SDK Software Development Kit
</p>
<p>Abbreviations and Acronyms</p>
<p/>
</div>
<div class="page"><p/>
<p>xxiii
</p>
<p>SPEA2 Strength Pareto Evolutionary Algorithm 2
</p>
<p>TMY Typical Meteorological Year
</p>
<p>UID Unique Identifier
</p>
<p>URL Uniform Resource Locator
</p>
<p>VAV Variable Air Volume
</p>
<p>WWR Window-to-Wall Ratio
</p>
<p>XML Extensible Markup Language
</p>
<p>Abbreviations and Acronyms</p>
<p/>
</div>
<div class="page"><p/>
<p>xxv
</p>
<p>List of Figures
</p>
<p>Fig. 1.1 U.S. Energy consumption by sector with end use breakdowns.  
</p>
<p>(Data source U.S.&nbsp;Energy Information Administration 2012) . . . . .  2
</p>
<p>Fig. 1.2 OpenStudio as a BEM operating system.  
</p>
<p>(Credit: Marjorie Schott) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  6
</p>
<p>Fig. 1.3 OpenStudio Application workflow and detail  . . . . . . . . . . . . . . . . .  9
</p>
<p>Fig. 1.4 OpenStudio Parametric Analysis Tool (PAT) workflow . . . . . . . . . .  9
</p>
<p>Fig. 1.5 OpenStudio home page (http://openstudio.net) . . . . . . . . . . . . . . . .  10
</p>
<p>Fig. 1.6 OpenStudio download page . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  10
</p>
<p>Fig. 1.7 OpenStudio installer dialogs on a Mac  . . . . . . . . . . . . . . . . . . . . . .  11
</p>
<p>Fig. 2.1 Climate zone locations in U.S . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  15
</p>
<p>Fig. 2.2 TMY data inspected using climate consultant . . . . . . . . . . . . . . . . .  16
</p>
<p>Fig. 2.3 Building envelope drawn with the OpenStudio Application  
</p>
<p>floor plan editor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  17
</p>
<p>Fig. 2.4 Building envelope drawn using the OpenStudio Plug-In  
</p>
<p>for Trimble SketchUp  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  17
</p>
<p>Fig. 2.5 Simple office building with three Spaces and two Space Types  
</p>
<p>on second floor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  18
</p>
<p>Fig. 2.6 Simple office building with first and second floors zoned  
</p>
<p>separately . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  19
</p>
<p>Fig. 2.7 Heat transfer mechanisms within a space.  
</p>
<p>(Credit Marjorie Schott) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  20
</p>
<p>Fig. 2.8 Interior and exterior surface heat transfer  . . . . . . . . . . . . . . . . . . . .  20
</p>
<p>Fig. 2.9 Two story building with building surface thickness shown . . . . . . .  21
</p>
<p>Fig. 2.10 Recommended placement of OpenStudio surfaces  
</p>
<p>to define Spaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  21
</p>
<p>Fig. 2.11 Inspecting geometry boundary conditions in the OpenStudio  
</p>
<p>Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  22
</p>
<p>Fig. 2.12 Material layers in a ceiling construction . . . . . . . . . . . . . . . . . . . . .  23
</p>
<p>Fig. 2.13 Equivalent RC network for a construction . . . . . . . . . . . . . . . . . . . .  23
</p>
<p>Fig. 2.14 Mirrored constructions for adjacent surfaces . . . . . . . . . . . . . . . . . .  24</p>
<p/>
</div>
<div class="page"><p/>
<p>xxvi
</p>
<p>Fig. 2.15 Heat transfer through transparent constructions  . . . . . . . . . . . . . . .  24
</p>
<p>Fig. 2.16 Construction inheritance hierarchy  . . . . . . . . . . . . . . . . . . . . . . . . .  25
</p>
<p>Fig. 2.17 ASHRAE Standard 140 BESTEST Case 600 Building . . . . . . . . . .  27
</p>
<p>Fig. 2.18 TMY data inspected with DView . . . . . . . . . . . . . . . . . . . . . . . . . . .  27
</p>
<p>Fig. 2.19 OpenStudio launch dialog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  28
</p>
<p>Fig. 2.20 OpenStudio Application with a newly created model . . . . . . . . . . .  28
</p>
<p>Fig. 2.21 A newly saved OpenStudio Model  . . . . . . . . . . . . . . . . . . . . . . . . .  29
</p>
<p>Fig. 2.22 Adding EPW and DDY files in the OpenStudio Application  . . . . .  29
</p>
<p>Fig. 2.23 Model directory with EPW file  . . . . . . . . . . . . . . . . . . . . . . . . . . . .  30
</p>
<p>Fig. 2.24 The OpenStudio Application Constructions Tab and Materials  
</p>
<p>Sub-Tab  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  30
</p>
<p>Fig. 2.25 Creating a new Material in the OpenStudio Application . . . . . . . . .  34
</p>
<p>Fig. 2.26 OSM Load Library options included with OpenStudio . . . . . . . . . .  34
</p>
<p>Fig. 2.27 Dragging and Dropping Materials from Library into a Model  . . . .  35
</p>
<p>Fig. 2.28 Downloading a Construction Material from the Building  
</p>
<p>Component Library . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  36
</p>
<p>Fig. 2.29 Creating a double pane window Construction  
</p>
<p>in the OpenStudio Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  37
</p>
<p>Fig. 2.30 Building a Construction Set in the OpenStudio Application . . . . . .  38
</p>
<p>Fig. 2.31 Setting a Construction Set as the Default for a building . . . . . . . . .  38
</p>
<p>Fig. 2.32 Floor plan geometry Editor Quick Start Dialog . . . . . . . . . . . . . . . .  39
</p>
<p>Fig. 2.33 Annotated floor plan editor with empty floor plan  
</p>
<p>in the OpenStudio Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  40
</p>
<p>Fig. 2.34 Drawing BESTEST Case 600&nbsp;in the OpenStudio Application  . . . .  41
</p>
<p>Fig. 2.35 Editing floor height in the OpenStudio Application  . . . . . . . . . . . .  41
</p>
<p>Fig. 2.36 Model with &ldquo;Space 1-1&rdquo; assigned to &ldquo;Thermal Zone 1&rdquo; . . . . . . . . .  42
</p>
<p>Fig. 2.37 Adding a Window definition with the Geometry editor . . . . . . . . . .  42
</p>
<p>Fig. 2.38 Placing a Window with the Geometry editor . . . . . . . . . . . . . . . . . .  43
</p>
<p>Fig. 2.39 Inspecting the BESTEST Case 600 Building  
</p>
<p>in the OpenStudio Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  43
</p>
<p>Fig. 2.40 The OpenStudio Application Output Variables Tab . . . . . . . . . . . . .  44
</p>
<p>Fig. 2.41 The OpenStudio Application Simulation Run Tab  . . . . . . . . . . . . .  45
</p>
<p>Fig. 2.42 The OpenStudio Standard Report within the Results  
</p>
<p>Summary Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  45
</p>
<p>Fig. 2.43 The OpenStudio Standard Report with Envelope Summary . . . . . .  46
</p>
<p>Fig. 2.44 The OpenStudio Standard Report with Zone Condition  
</p>
<p>Summary  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  46
</p>
<p>Fig. 2.45 The EnergyPlus Report Viewed within the Results  
</p>
<p>Summary Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  47
</p>
<p>Fig. 2.46 Model directory after simulation . . . . . . . . . . . . . . . . . . . . . . . . . . .  47
</p>
<p>Fig. 2.47 Comparison of Outdoor and Zone temperatures in DView . . . . . . .  49
</p>
<p>Fig. 2.48 Identifying the Surface name for the South Facing Fa&ccedil;ade . . . . . . .  50
</p>
<p>Fig. 2.49 South exterior wall surface temperature plotted in DView  
</p>
<p>as a Heatmap . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  50
</p>
<p>Fig. 2.50 Monthly temperature profiles for Exterior and Interior  
</p>
<p>Surfaces on South Fa&ccedil;ade  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  51
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxvii
</p>
<p>Fig. 2.51 Empty Model Loaded with ASHRAE 90.1-2010 Construction  
</p>
<p>Set for a primary school . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  52
</p>
<p>Fig. 2.52 Primary school floor plan . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  52
</p>
<p>Fig. 2.53 Primary school floor plan drawn with the Geometry editor. . . . . . .  53
</p>
<p>Fig. 2.54 Boundary condition view of primary school Model  . . . . . . . . . . . .  53
</p>
<p>Fig. 2.55 Boundary condition preview of primary school Model in editor . . .  54
</p>
<p>Fig. 2.56 Construction View of primary school Model . . . . . . . . . . . . . . . . . .  54
</p>
<p>Fig. 2.57 Unconditioned primary school envelope summary report . . . . . . . .  55
</p>
<p>Fig. 2.58 Unconditioned primary school zone overview  . . . . . . . . . . . . . . . .  55
</p>
<p>Fig. 2.59 Unconditioned primary school zone conditions  . . . . . . . . . . . . . . .  55
</p>
<p>Fig. 2.60 DView time series plots of Outdoor, Lobby, and Mechanical  
</p>
<p>room temperatures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  56
</p>
<p>Fig. 2.61 Geolocating a new Model with the floor plan editor . . . . . . . . . . . .  57
</p>
<p>Fig. 2.62 Tracing over an image with the floor plan editor . . . . . . . . . . . . . . .  57
</p>
<p>Fig. 3.1 OpenStudio Space Type conceptually applied to a Space . . . . . . . .  61
</p>
<p>Fig. 3.2 Schedule Set for an Office Break Room  . . . . . . . . . . . . . . . . . . . . .  62
</p>
<p>Fig. 3.3 An office Ruleset Schedule defined for workdays . . . . . . . . . . . . . .  63
</p>
<p>Fig. 3.4 An office Ruleset Schedule defined for Saturdays, and Sundays  . .  63
</p>
<p>Fig. 3.5 Lighting Power Density defined for an Open Office Space Type  . .  64
</p>
<p>Fig. 3.6 Example of an Electric Equipment Load . . . . . . . . . . . . . . . . . . . . .  66
</p>
<p>Fig. 3.7 People definition for an Office Break Room Space Type  . . . . . . . .  67
</p>
<p>Fig. 3.8 Occupant activity Schedule for an office . . . . . . . . . . . . . . . . . . . . .  68
</p>
<p>Fig. 3.9 Example water use equipment definition . . . . . . . . . . . . . . . . . . . . .  69
</p>
<p>Fig. 3.10 Outdoor air ventilation for an Office Lobby Space Type . . . . . . . . .  70
</p>
<p>Fig. 3.11 Infiltration Flow Rate for an Office Lobby Space Type . . . . . . . . . .  70
</p>
<p>Fig. 3.12 Adding an Infiltration Effective Leakage Area Object  . . . . . . . . . .  71
</p>
<p>Fig. 3.13 Adding loads to define four office Space Types . . . . . . . . . . . . . . . .  71
</p>
<p>Fig. 3.14 Assigning Space Types using the Geometry editor . . . . . . . . . . . . .  72
</p>
<p>Fig. 3.15 Space assignment Sub-Tab. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  73
</p>
<p>Fig. 3.16 Space load assignments defaulted from Space Type definition . . . .  73
</p>
<p>Fig. 3.17 Space Surfaces Sub-Tab with defaulted Construction Set . . . . . . . .  74
</p>
<p>Fig. 3.18 Space Sub-Surfaces Sub-Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  74
</p>
<p>Fig. 3.19 Defining an Internal Mass Object for a Space . . . . . . . . . . . . . . . . .  75
</p>
<p>Fig. 3.20 Interior partitions Sub-Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  75
</p>
<p>Fig. 3.21 Shading Surfaces Sub-Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  76
</p>
<p>Fig. 3.22 Creating a new Schedule Set . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  76
</p>
<p>Fig. 3.23 Creating a new Ruleset Schedule . . . . . . . . . . . . . . . . . . . . . . . . . . .  78
</p>
<p>Fig. 3.24 Editing Bob&rsquo;s activity Schedule . . . . . . . . . . . . . . . . . . . . . . . . . . . .  78
</p>
<p>Fig. 3.25 Bob&rsquo;s default Occupancy Schedule . . . . . . . . . . . . . . . . . . . . . . . . .  79
</p>
<p>Fig. 3.26 Using the Schedule editor to create a Fractional  
</p>
<p>Occupancy Schedule  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  79
</p>
<p>Fig. 3.27 Creating a new Run Period Profile in a Ruleset Schedule . . . . . . . .  80
</p>
<p>Fig. 3.28 A new profile for Bob&rsquo;s Schedule copied from the  
</p>
<p>default Profile . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  80
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxviii
</p>
<p>Fig. 3.29 A higher priority Ruleset Schedule profile for weekends . . . . . . . .  81
</p>
<p>Fig. 3.30 Laptop usage profile derived from Occupancy Schedule  . . . . . . . .  81
</p>
<p>Fig. 3.31 Setting a Heating Thermostat Ruleset Schedule for Bob&rsquo;s Office . .  82
</p>
<p>Fig. 3.32 Setting a Cooling Thermostat Ruleset Schedule for Bob&rsquo;s Office . .  82
</p>
<p>Fig. 3.33 Defining a Schedule Set for Bob&rsquo;s Office  . . . . . . . . . . . . . . . . . . . .  83
</p>
<p>Fig. 3.34 Defining the Loads for Bob&rsquo;s Office  . . . . . . . . . . . . . . . . . . . . . . . .  83
</p>
<p>Fig. 3.35 Creating a new Space Type and Adding a Schedule Set  . . . . . . . . .  84
</p>
<p>Fig. 3.36 Adding Loads to a Space Type  . . . . . . . . . . . . . . . . . . . . . . . . . . . .  84
</p>
<p>Fig. 3.37 Assigning our New Space Type to Bob&rsquo;s Space  . . . . . . . . . . . . . . .  85
</p>
<p>Fig. 3.38 Inspecting the Loads assigned to Bob&rsquo;s Space  . . . . . . . . . . . . . . . .  85
</p>
<p>Fig. 3.39 Additional content in the OpenStudio report related to our Space  .  86
</p>
<p>Fig. 3.40 Annual end use breakdown for Bob&rsquo;s Unconditioned Office  . . . . .  86
</p>
<p>Fig. 3.41 Monthly end use breakdown for Bob&rsquo;s Unconditioned Office  . . . .  87
</p>
<p>Fig. 3.42 Zone Conditions for Bob&rsquo;s Unconditioned Office . . . . . . . . . . . . . .  88
</p>
<p>Fig. 3.43 DView time series plots for Bob&rsquo;s Unconditioned Office . . . . . . . .  89
</p>
<p>Fig. 3.44 Adding Thermostat Schedules and Ideal Air Loads to our  
</p>
<p>Thermal Zone . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  89
</p>
<p>Fig. 3.45 Zone Conditions with Ideal Air Loads . . . . . . . . . . . . . . . . . . . . . . .  90
</p>
<p>Fig. 3.46 Annual end use breakdown with Ideal Air Loads  . . . . . . . . . . . . . .  90
</p>
<p>Fig. 3.47 Monthly end use breakdown with Ideal Air Loads  . . . . . . . . . . . . .  91
</p>
<p>Fig. 3.48 Time series plots of ambient and interior temperatures  
</p>
<p>alongside district heating/cooling load  . . . . . . . . . . . . . . . . . . . . . .  91
</p>
<p>Fig. 3.49 Adding Space Types from the Library . . . . . . . . . . . . . . . . . . . . . . .  92
</p>
<p>Fig. 3.50 Adding the Classroom Space Type as the building default . . . . . . .  93
</p>
<p>Fig. 3.51 Inspecting load definitions for the new Space Types . . . . . . . . . . . .  93
</p>
<p>Fig. 3.52 Inspecting the imported people definition for the Cafeteria  
</p>
<p>Space Type . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  94
</p>
<p>Fig. 3.53 Inspecting the Imported Schedule Set for the Cafeteria  
</p>
<p>Space Type . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  94
</p>
<p>Fig. 3.54 Inspecting an Imported RuleSet Schedule for the Cafeteria  
</p>
<p>Space Type . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  94
</p>
<p>Fig. 3.55 Adding PrimarySchool HtgSetp and ClgSetp from the Library  . . .  95
</p>
<p>Fig. 3.56 All Spaces defaulted to the Classroom Space Type . . . . . . . . . . . . .  95
</p>
<p>Fig. 3.57 Overriding Space Type defaults for other Spaces  . . . . . . . . . . . . . .  96
</p>
<p>Fig. 3.58 Verifying load definitions for Spaces . . . . . . . . . . . . . . . . . . . . . . . .  96
</p>
<p>Fig. 3.59 Verifying Surface Constructions for Spaces  . . . . . . . . . . . . . . . . . .  97
</p>
<p>Fig. 3.60 Using multi-select to assign the cooling Thermostat Schedule  
</p>
<p>to all zones . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  97
</p>
<p>Fig. 3.61 Space Type breakdown for the Primary School Model . . . . . . . . . .  98
</p>
<p>Fig. 3.62 HVAC Loads and Zone Conditions for the Primary  
</p>
<p>School Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  98
</p>
<p>Fig. 3.63 Annual end use breakdowns for the Primary School Model . . . . . .  98
</p>
<p>Fig. 3.64 Monthly end use breakdowns for the Primary School Model . . . . .  99
</p>
<p>Fig. 3.65 Time series plots for the Primary School Model . . . . . . . . . . . . . . .  100
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxix
</p>
<p>Fig. 4.1 Two Thermal Zones containing one or more spaces . . . . . . . . . . . .  104
</p>
<p>Fig. 4.2 Core and Perimeter Zoning . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  106
</p>
<p>Fig. 4.3 Adding a piece of Zone Equipment . . . . . . . . . . . . . . . . . . . . . . . . .  107
</p>
<p>Fig. 4.4 Setting properties for a piece of Zone Equipment . . . . . . . . . . . . . .  108
</p>
<p>Fig. 4.5 Supply and demand sides of an Air Loop  . . . . . . . . . . . . . . . . . . . .  108
</p>
<p>Fig. 4.6 A typical Plant and Air Loop relationship . . . . . . . . . . . . . . . . . . . .  110
</p>
<p>Fig. 4.7 Plant Loop branch examples  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  110
</p>
<p>Fig. 4.8 An unsupported Plant Loop topology  . . . . . . . . . . . . . . . . . . . . . . .  111
</p>
<p>Fig. 4.9 ASHRAE 90.1 Appendix G system type seven . . . . . . . . . . . . . . . .  112
</p>
<p>Fig. 4.10 Adding a template HVAC system to a Model . . . . . . . . . . . . . . . . .  112
</p>
<p>Fig. 4.11 Air handler included in Packaged Rooftop VAV with reheat  
</p>
<p>templatesystem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  113
</p>
<p>Fig. 4.12 Connecting Thermal Zones to an Air handler . . . . . . . . . . . . . . . . .  114
</p>
<p>Fig. 4.13 Two Thermal Zones Connected to a Single Air Handler . . . . . . . . .  114
</p>
<p>Fig. 4.14 Examining the Properties of an Air Terminal  . . . . . . . . . . . . . . . . .  115
</p>
<p>Fig. 4.15 Clicking a Chilled Water Coil Node to Navigate  
</p>
<p>to the Associated Plant Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  116
</p>
<p>Fig. 4.16 Plant Loop Serving the Air Handler Chilled Water Coil . . . . . . . . .  117
</p>
<p>Fig. 4.17 Condenser Loop Serving the Chilled Water Plant . . . . . . . . . . . . . .  117
</p>
<p>Fig. 4.18 Adding Design Days from a DDY File . . . . . . . . . . . . . . . . . . . . . .  119
</p>
<p>Fig. 4.19 Design Days Added to an OpenStudio Model . . . . . . . . . . . . . . . . .  120
</p>
<p>Fig. 4.20 Primary School Model with Four Thermal Zones . . . . . . . . . . . . . .  121
</p>
<p>Fig. 4.21 Adding Thermal Zone One to an Air Handler . . . . . . . . . . . . . . . . .  121
</p>
<p>Fig. 4.22 Hot Water Loop Serving Air Handler for Thermal Zone One . . . . .  122
</p>
<p>Fig. 4.23 Monthly Electricity and Gas Consumption for School  
</p>
<p>with Four Packaged VAV Units . . . . . . . . . . . . . . . . . . . . . . . . . . . .  122
</p>
<p>Fig. 4.24 Zone Conditions for School with Four Packaged VAV Units  . . . . .  123
</p>
<p>Fig. 4.25 Zone Overview for School Divided into Four Thermal Zones  . . . .  123
</p>
<p>Fig. 4.26 Air and Plant Loop Detail for the Revised School Model . . . . . . . .  124
</p>
<p>Fig. 4.27 EnergyPlus Unmet Hours Report . . . . . . . . . . . . . . . . . . . . . . . . . . .  125
</p>
<p>Fig. 4.28 EnergyPlus Auto-Sizing Report . . . . . . . . . . . . . . . . . . . . . . . . . . . .  125
</p>
<p>Fig. 5.1 Flow direction in an empty Air Loop . . . . . . . . . . . . . . . . . . . . . . . .  128
</p>
<p>Fig. 5.2 Supply and demand sides of an empty Air Loop . . . . . . . . . . . . . . .  128
</p>
<p>Fig. 5.3 Empty supply side Air Loop detail  . . . . . . . . . . . . . . . . . . . . . . . . .  129
</p>
<p>Fig. 5.4 Typical fan locations within an Air Loop . . . . . . . . . . . . . . . . . . . . .  129
</p>
<p>Fig. 5.5 Adding supply side Equipment in OpenStudio . . . . . . . . . . . . . . . .  130
</p>
<p>Fig. 5.6 Connecting a coil to a Plant Loop . . . . . . . . . . . . . . . . . . . . . . . . . .  130
</p>
<p>Fig. 5.7 Empty demand side Air Loop detail  . . . . . . . . . . . . . . . . . . . . . . . .  131
</p>
<p>Fig. 5.8 Connecting demand side Air Loop with two Thermal Zones  
</p>
<p>and Simple Air Diffusers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  132
</p>
<p>Fig. 5.9 Thermal Zone design supply air sizing parameters . . . . . . . . . . . . .  133
</p>
<p>Fig. 5.10 Specifying sizing parameters for a particular Air Loop . . . . . . . . . .  133
</p>
<p>Fig. 5.11 Specifying Outdoor Air Sizing Algorithm for a particular  
</p>
<p>Air Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  135
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxx
</p>
<p>Fig. 5.12 Setpoint Manager on supply outlet Node . . . . . . . . . . . . . . . . . . . . .  136
</p>
<p>Fig. 5.13 Default OpenStudio Setpoint Manager propagation . . . . . . . . . . . .  136
</p>
<p>Fig. 5.14 Adding Explicit Setpoint Managers for each supply  
</p>
<p>side component  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  137
</p>
<p>Fig. 5.15 Specifying Air Loop availability control . . . . . . . . . . . . . . . . . . . . .  138
</p>
<p>Fig. 5.16 Specifying OA control for an Air Loop . . . . . . . . . . . . . . . . . . . . . .  139
</p>
<p>Fig. 5.17 Flow direction in an empty Plant Loop . . . . . . . . . . . . . . . . . . . . . .  141
</p>
<p>Fig. 5.18 Supply and demand sides of an empty Plant Loop  . . . . . . . . . . . . .  142
</p>
<p>Fig. 5.19 Empty Plant Loop supply side detail . . . . . . . . . . . . . . . . . . . . . . . .  142
</p>
<p>Fig. 5.20 Plant Loop supply side containing two chillers . . . . . . . . . . . . . . . .  143
</p>
<p>Fig. 5.21 Plant Loop with one Loop and two branch pumps  . . . . . . . . . . . . .  143
</p>
<p>Fig. 5.22 Adding Equipment to the supply side of a Plant Loop  . . . . . . . . . .  144
</p>
<p>Fig. 5.23 Demand side details of an empty Plant Loop  . . . . . . . . . . . . . . . . .  145
</p>
<p>Fig. 5.24 Demand side of a Plant Loop serving two Cooling Coils . . . . . . . .  145
</p>
<p>Fig. 5.25 Air and Water Flow through a Coil . . . . . . . . . . . . . . . . . . . . . . . . .  146
</p>
<p>Fig. 5.26 Plant Loop Coil Sizing parameters for hard or autosizing . . . . . . . .  146
</p>
<p>Fig. 5.27 Specifying Plant Loop sizing parameters  . . . . . . . . . . . . . . . . . . . .  147
</p>
<p>Fig. 5.28 Sizing factor used for components installed on branches . . . . . . . .  148
</p>
<p>Fig. 5.29 Plant Loop supply control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  149
</p>
<p>Fig. 5.30 Multiple Setpoint Managers for component control . . . . . . . . . . . .  149
</p>
<p>Fig. 5.31 Plant Loop Load Distribution Scheme . . . . . . . . . . . . . . . . . . . . . . .  150
</p>
<p>Fig. 5.32 Adding Zone Equipment to a Thermal Zone . . . . . . . . . . . . . . . . . .  152
</p>
<p>Fig. 5.33 Examining child objects within a piece of Zone Equipment . . . . . .  153
</p>
<p>Fig. 5.34 Creating a Water Use Equipment definition . . . . . . . . . . . . . . . . . . .  154
</p>
<p>Fig. 5.35 Adding a water use connection to the service Hot Water Loop . . . .  155
</p>
<p>Fig. 5.36 Adding a sink to an empty water use connection  . . . . . . . . . . . . . .  155
</p>
<p>Fig. 5.37 Adding Equipment to a water use connection . . . . . . . . . . . . . . . . .  156
</p>
<p>Fig. 5.38 Adding a hot water connection to a Hot Water Loop . . . . . . . . . . . .  157
</p>
<p>Fig. 5.39 Adding an empty Air Loop  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  158
</p>
<p>Fig. 5.40 Air Loop with initial supply Equipment components . . . . . . . . . . .  158
</p>
<p>Fig. 5.41 VAV outlet setpoint temperature  . . . . . . . . . . . . . . . . . . . . . . . . . . .  159
</p>
<p>Fig. 5.42 Air Loop with VAV reheat terminal . . . . . . . . . . . . . . . . . . . . . . . . .  159
</p>
<p>Fig. 5.43 Add an empty Plant Loop  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  160
</p>
<p>Fig. 5.44 Chilled Water Loop with initial components . . . . . . . . . . . . . . . . . .  161
</p>
<p>Fig. 5.45 Connecting a Cooling Coil to the Chilled Water Loop . . . . . . . . . .  162
</p>
<p>Fig. 5.46 Chilled Water Loop with Cooling Coil connected . . . . . . . . . . . . . .  163
</p>
<p>Fig. 5.47 Condenser Water Loop with initial components . . . . . . . . . . . . . . .  164
</p>
<p>Fig. 5.48 Condenser Loop with chiller attached . . . . . . . . . . . . . . . . . . . . . . .  165
</p>
<p>Fig. 5.49 Hot Water Loop with initial components . . . . . . . . . . . . . . . . . . . . .  166
</p>
<p>Fig. 5.50 Hot Water Loop with Heating Coils connected . . . . . . . . . . . . . . . .  166
</p>
<p>Fig. 5.51 Assign Thermal Zones to Air Loop . . . . . . . . . . . . . . . . . . . . . . . . .  167
</p>
<p>Fig. 5.52 Disconnecingt the Thermal Zone from the Air Loop . . . . . . . . . . . .  168
</p>
<p>Fig. 5.53 Adding Four Pipe Fan Coil Zone Equipment  . . . . . . . . . . . . . . . . .  169
</p>
<p>Fig. 5.54 Connecting Zone Equipment Coil to a Plant Loop . . . . . . . . . . . . .  169
</p>
<p>Fig. 5.55 HVAC Monthly Load Profile for school with advanced  
</p>
<p>HVAC systems . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  170
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxi
</p>
<p>Fig. 5.56 Zone conditions for school with advanced HVAC systems . . . . . . .  170
</p>
<p>Fig. 5.57 Air Loops detail for school with advanced HVAC systems . . . . . . .  171
</p>
<p>Fig. 5.58 Plant Loops detail for school with advanced HVAC systems . . . . .  171
</p>
<p>Fig. 6.1 Measure used to add heat recovery to an HVAC system  
</p>
<p>(https://bcl.nrel.gov/node/39440) . . . . . . . . . . . . . . . . . . . . . . . . . . .  174
</p>
<p>Fig. 6.2 Measure used to apply a complete daylighting solution  
</p>
<p>to a school (https://bcl.nrel.gov/node/39783)  . . . . . . . . . . . . . . . . .  174
</p>
<p>Fig. 6.3 DOE prototype building Measure (https://bcl.nrel.gov/node/ 
</p>
<p>83591) dialog and result . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  175
</p>
<p>Fig. 6.4 OpenStudio reporting Measure examples (https://bcl.nrel. 
</p>
<p>gov/node/82771, https://bcl.nrel.gov/node/83647, https://bcl. 
</p>
<p>nrel.gov/node/83307) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  176
</p>
<p>Fig. 6.5 Landing page of http://bcl.nrel.gov . . . . . . . . . . . . . . . . . . . . . . . . .  177
</p>
<p>Fig. 6.6 HVAC Measures on the BCL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  178
</p>
<p>Fig. 6.7 BCL web page for ERV Measure  . . . . . . . . . . . . . . . . . . . . . . . . . .  178
</p>
<p>Fig. 6.8 Accessing the BCL from within the OpenStudio Application . . . . .  179
</p>
<p>Fig. 6.9 The BCL interface within the OpenStudio Application . . . . . . . . . .  180
</p>
<p>Fig. 6.10 Model HVAC air loop prior to applying Measure . . . . . . . . . . . . . .  180
</p>
<p>Fig. 6.11 Apply Measure Now window with ERV Measure selected . . . . . . .  181
</p>
<p>Fig. 6.12 Report from ERV Measure after application . . . . . . . . . . . . . . . . . .  182
</p>
<p>Fig. 6.13 Model HVAC air loop after applying Measure  . . . . . . . . . . . . . . . .  182
</p>
<p>Fig. 6.14 OpenStudio Application Measures Tab . . . . . . . . . . . . . . . . . . . . . .  183
</p>
<p>Fig. 6.15 High level OpenStudio workflow with Measures  . . . . . . . . . . . . . .  183
</p>
<p>Fig. 6.16 Measures added to a simulation workflow . . . . . . . . . . . . . . . . . . . .  184
</p>
<p>Fig. 6.17 Starting OpenStudio&rsquo;s Parametric Analysis Tool (PAT)  . . . . . . . . .  186
</p>
<p>Fig. 6.18 PAT new project dialog  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  186
</p>
<p>Fig. 6.19 Specifying a new PAT project&rsquo;s location . . . . . . . . . . . . . . . . . . . . .  186
</p>
<p>Fig. 6.20 Opening the &ldquo;Office_HVAC&rdquo; project in PAT . . . . . . . . . . . . . . . . . .  187
</p>
<p>Fig. 6.21 Specifying an analysis in PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  188
</p>
<p>Fig. 6.22 PAT&rsquo;s Measure Library dialog for the &ldquo;Office_HVAC&rdquo; project . . . .  188
</p>
<p>Fig. 6.23 PAT&rsquo;s Measure Library with BCL fenestration content shown . . . .  189
</p>
<p>Fig. 6.24 Three Measures added to a PAT project . . . . . . . . . . . . . . . . . . . . . .  190
</p>
<p>Fig. 6.25 Set window to wall ratio by Fa&ccedil;ade Measure expanded  . . . . . . . . .  190
</p>
<p>Fig. 6.26 A newly created Measure option . . . . . . . . . . . . . . . . . . . . . . . . . . .  191
</p>
<p>Fig. 6.27 Window to wall ratio Measure with three design options . . . . . . . .  192
</p>
<p>Fig. 6.28 Ensuring the OpenStudio Results Measure is included  
</p>
<p>with an option  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  192
</p>
<p>Fig. 6.29 PAT&rsquo;s design alternatives Tab . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  193
</p>
<p>Fig. 6.30 PAT&rsquo;s Run Tab indicates it is ready to simulate . . . . . . . . . . . . . . . .  194
</p>
<p>Fig. 6.31 PAT analysis in progress  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  194
</p>
<p>Fig. 6.32 PAT completed analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  195
</p>
<p>Fig. 6.33 An individual PAT data point expanded . . . . . . . . . . . . . . . . . . . . . .  195
</p>
<p>Fig. 6.34 Re-running a single data point . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  196
</p>
<p>Fig. 6.35 PAT summary table on the reports Tab  . . . . . . . . . . . . . . . . . . . . . .  196
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxii
</p>
<p>Fig. 6.36 End user comparison chart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  197
</p>
<p>Fig. 6.37 PAT&rsquo;s OpenStudio Cloud Management Console Tab  . . . . . . . . . . .  198
</p>
<p>Fig. 6.38 Creating a new primary school PAT project  . . . . . . . . . . . . . . . . . .  199
</p>
<p>Fig. 6.39 Adding the OpenStudio Results Measure to the project . . . . . . . . .  199
</p>
<p>Fig. 6.40 Creating a Report Option for the project . . . . . . . . . . . . . . . . . . . . .  199
</p>
<p>Fig. 6.41 Creating the baseline Design Alternative in the project . . . . . . . . . .  200
</p>
<p>Fig. 6.42 Running the project containing only the baseline . . . . . . . . . . . . . .  200
</p>
<p>Fig. 6.43 Examining the baseline data point . . . . . . . . . . . . . . . . . . . . . . . . . .  200
</p>
<p>Fig. 6.44 Reviewing the monthly end use breakdown for the baseline . . . . . .  201
</p>
<p>Fig. 6.45 PAT comparison summary containing only the baseline . . . . . . . . .  201
</p>
<p>Fig. 6.46 Finding EE Measures for the project . . . . . . . . . . . . . . . . . . . . . . . .  202
</p>
<p>Fig. 6.47 Downloading the AEDGK12HVACDualDuctDoas Measure  . . . . .  203
</p>
<p>Fig. 6.48 Adding three AEDG K-12 HVAC Measures to the project . . . . . . .  203
</p>
<p>Fig. 6.49 Defaults for a new dual duct DOAS option . . . . . . . . . . . . . . . . . . .  204
</p>
<p>Fig. 6.50 Defining the dual duct DOAS option and entering system cost  . . .  204
</p>
<p>Fig. 6.51 Creating a fan coil DOAS Measure option  . . . . . . . . . . . . . . . . . . .  205
</p>
<p>Fig. 6.52 Creating a GSHP DOAS Measure option  . . . . . . . . . . . . . . . . . . . .  205
</p>
<p>Fig. 6.53 Adding the Xcel Energy utility rate tariff to the project  . . . . . . . . .  206
</p>
<p>Fig. 6.54 Creating a utility rate Measure option . . . . . . . . . . . . . . . . . . . . . . .  206
</p>
<p>Fig. 6.55 Adding three additional Design Alternatives to the project . . . . . . .  206
</p>
<p>Fig. 6.56 Simulating the four Design Alternatives . . . . . . . . . . . . . . . . . . . . .  207
</p>
<p>Fig. 6.57 PAT Project directory structure  . . . . . . . . . . . . . . . . . . . . . . . . . . . .  207
</p>
<p>Fig. 6.58 Reviewing the Measure actions that produced the  
</p>
<p>GSHP DOAS data point . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  208
</p>
<p>Fig. 6.59 Comparing the three Design Alternatives against the baseline . . . .  208
</p>
<p>Fig. 6.60 Adding additional Measures to the project  . . . . . . . . . . . . . . . . . . .  209
</p>
<p>Fig. 6.61 Defining a Design Alternative with GSHP and additional  
</p>
<p>EE Measures  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  210
</p>
<p>Fig. 6.62 Comparing the four Design Alternatives to the baseline . . . . . . . . .  210
</p>
<p>Fig. 6.63 Comparing end use breakdowns for the baseline  
</p>
<p>and Design Alternatives . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  210
</p>
<p>Fig. 6.64 Adding the &ldquo;Reduce Lighting Loads by Percentage&rdquo;  
</p>
<p>Measure with two options . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  211
</p>
<p>Fig. 6.65 Comparing the two additional Design Alternatives  
</p>
<p>with the baseline  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  212
</p>
<p>Fig. 6.66 Comparing end user breakdowns for baseline and alternatives . . . .  212
</p>
<p>Fig. 7.1 PAT, OpenStudio Server, and Workers . . . . . . . . . . . . . . . . . . . . . . .  216
</p>
<p>Fig. 7.2 PAT analysis Tab in algorithmic mode . . . . . . . . . . . . . . . . . . . . . . .  217
</p>
<p>Fig. 7.3 Selecting an algorithm in PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  217
</p>
<p>Fig. 7.4 A DOE with two independent variables and two  
</p>
<p>sampling levels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  219
</p>
<p>Fig. 7.5 LHS concept with two independent variables  
</p>
<p>and four samples  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  220
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxiii
</p>
<p>Fig. 7.6 Morris method concept with initial and subsequent data  
</p>
<p>points for r&nbsp;=&nbsp;4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  221
</p>
<p>Fig. 7.7 Optim conceptual progression to optimal solution  . . . . . . . . . . . . .  222
</p>
<p>Fig. 7.8 Example particle swarm optimization progression  
</p>
<p>(Figure adapted from Ephramac, 2017) . . . . . . . . . . . . . . . . . . . . . .  223
</p>
<p>Fig. 7.9 Genetic algorithm &ldquo;DNA&rdquo; for three building data points  . . . . . . . .  224
</p>
<p>Fig. 7.10 Genetic algorithm applied to a building optimization problem . . . .  224
</p>
<p>Fig. 7.11 Multi-variate optimization of heating and cooling energy use  
</p>
<p>with Pareto Front . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  225
</p>
<p>Fig. 7.12 Assigning multiple variable types to a Measure&rsquo;s inputs . . . . . . . . .  227
</p>
<p>Fig. 7.13 Uniform distribution for window to wall ratio . . . . . . . . . . . . . . . . .  227
</p>
<p>Fig. 7.14 Discrete distribution for cardinal direction  . . . . . . . . . . . . . . . . . . .  228
</p>
<p>Fig. 7.15 Normal distribution for window to wall ratio  . . . . . . . . . . . . . . . . .  228
</p>
<p>Fig. 7.16 LogNormal distribution for window to wall ratio . . . . . . . . . . . . . .  229
</p>
<p>Fig. 7.17 Triangle distribution for window to wall ratio . . . . . . . . . . . . . . . . .  230
</p>
<p>Fig. 7.18 &ldquo;Pivoting&rdquo; an analysis on building type . . . . . . . . . . . . . . . . . . . . . .  230
</p>
<p>Fig. 7.19 PAT&rsquo;s Design Alternatives Tab in algorithmic mode . . . . . . . . . . . .  231
</p>
<p>Fig. 7.20 PAT&rsquo;s Outputs Tab in algorithmic mode  . . . . . . . . . . . . . . . . . . . . .  231
</p>
<p>Fig. 7.21 Outputs available from the OpenStudio Results Measure . . . . . . . .  232
</p>
<p>Fig. 7.22 Configuring selected outputs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  232
</p>
<p>Fig. 7.23 PAT&rsquo;s Run Tab in algorithmic mode  . . . . . . . . . . . . . . . . . . . . . . . .  233
</p>
<p>Fig. 7.24 PAT&rsquo;s Run Tab with Run on Cloud selected  . . . . . . . . . . . . . . . . . .  234
</p>
<p>Fig. 7.25 AWS console with secret key option highlighted  . . . . . . . . . . . . . .  234
</p>
<p>Fig. 7.26 Server and worker node configuration in PAT&rsquo;s Run Tab  . . . . . . . .  236
</p>
<p>Fig. 7.27 PAT AWS responsibility dialog . . . . . . . . . . . . . . . . . . . . . . . . . . . .  236
</p>
<p>Fig. 7.28 AWS cluster starting up in PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . .  236
</p>
<p>Fig. 7.29 AWS cluster starting up in the AWS console . . . . . . . . . . . . . . . . . .  237
</p>
<p>Fig. 7.30 AWS cluster nearly ready for use in the AWS console  . . . . . . . . . .  237
</p>
<p>Fig. 7.31 Cloud run completed . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  237
</p>
<p>Fig. 7.32 OpenStudio Cloud Management Console front page  . . . . . . . . . . .  238
</p>
<p>Fig. 7.33 OpenStudio Cloud Management Console view of a project . . . . . .  239
</p>
<p>Fig. 7.34 OpenStudio Cloud Management Console project  
</p>
<p>variable summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  240
</p>
<p>Fig. 7.35 OpenStudio Cloud Management Console parallel coordinate  
</p>
<p>plot visualization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  241
</p>
<p>Fig. 7.36 Net zero building study visualized as a parallel coordinate plot . . .  242
</p>
<p>Fig. 7.37 Net zero building study with output filtering . . . . . . . . . . . . . . . . . .  242
</p>
<p>Fig. 7.38 Setting up an LHS sampling problem with our school model . . . . .  243
</p>
<p>Fig. 7.39 Setting up outputs for LHS sampling problem with our  
</p>
<p>school model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  244
</p>
<p>Fig. 7.40 LHS sampling analysis in progress for school model problem . . . .  245
</p>
<p>Fig. 7.41 OpenStudio Server reporting progress of LHS analysis  
</p>
<p>for school model problem  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  245
</p>
<p>Fig. 7.42 LHS analysis report page for school model problem . . . . . . . . . . . .  246
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxiv
</p>
<p>Fig. 7.43 Variable distributions for LHS sampling of school  
</p>
<p>model problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  246
</p>
<p>Fig. 7.44 Parallel coordinate plot for LHS sampling of school  
</p>
<p>model problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  247
</p>
<p>Fig. 7.45 Preparing to add electricity and gas consumption data  
</p>
<p>to school model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  249
</p>
<p>Fig. 7.46 Adding electricity consumption data to school model . . . . . . . . . . .  249
</p>
<p>Fig. 7.47 Adding gas consumption data to school model . . . . . . . . . . . . . . . .  250
</p>
<p>Fig. 7.48 Setting up a Morris Method problem with our school model . . . . .  252
</p>
<p>Fig. 7.49 Setting up outputs for Morris Method problem with our  
</p>
<p>school model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  252
</p>
<p>Fig. 7.50 Completed Morris Method analysis for school model problem  . . .  253
</p>
<p>Fig. 7.51 Morris Method elementary effects box plots for school  
</p>
<p>model problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  254
</p>
<p>Fig. 7.52 Morris Method * plots for school model problem . . . . . . . . . . . . .  255
</p>
<p>Fig. 7.53 Setting up an SPEA2 optimization problem with our  
</p>
<p>school model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  255
</p>
<p>Fig. 7.54 School model calibration project with completed SPEA2  
</p>
<p>optimization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  256
</p>
<p>Fig. 7.55 SPEA2 optimizer results for school model calibration problem . . .  257
</p>
<p>Fig. 7.56 PSO optimizer results for school model calibration problem . . . . .  257
</p>
<p>Fig. 7.57 Parallel coordinate plot of all SPEA2 data points . . . . . . . . . . . . . .  258
</p>
<p>Fig. 7.58 Parallel coordinate plot of SPEA2 results filtered for  
</p>
<p>ASHRAE Guideline 14 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  258
</p>
<p>Fig. 7.59 Additional filtering of SPEA2 results on parallel  
</p>
<p>coordinate plot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  259
</p>
<p>Fig. 7.60 An SPEA2 optimized solution for the school calibration  
</p>
<p>problem  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  260
</p>
<p>Fig. 7.61 School model calibration reports pre and post  
</p>
<p>SPEA2 optimization. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  260
</p>
<p>Fig. 8.1 gbXML import within the OpenStudio Application  . . . . . . . . . . . .  268
</p>
<p>Fig. 8.2 gbXML Model import previewed in the geometry Tab . . . . . . . . . .  268
</p>
<p>Fig. 8.3 OpenStudio SketchUp Plug-in gbXML Import Menu . . . . . . . . . . .  269
</p>
<p>Fig. 8.4 Initial Model import screen in SketchUp . . . . . . . . . . . . . . . . . . . . .  270
</p>
<p>Fig. 8.5 Rotated view of Model in SketchUp . . . . . . . . . . . . . . . . . . . . . . . .  270
</p>
<p>Fig. 8.6 Rendering in SketchUp by Thermal Zone . . . . . . . . . . . . . . . . . . . .  271
</p>
<p>Fig. 8.7 Isolated Atrium Space from Original Model . . . . . . . . . . . . . . . . . .  271
</p>
<p>Fig. 8.8 Section Cut of the Atrium Space . . . . . . . . . . . . . . . . . . . . . . . . . . .  272
</p>
<p>Fig. 8.9 Placing a Daylighting Control in a Model . . . . . . . . . . . . . . . . . . . .  272
</p>
<p>Fig. 8.10 Moving a Daylighting Control Within a Model . . . . . . . . . . . . . . . .  273
</p>
<p>Fig. 8.11 Inspecting Daylighting Controls  . . . . . . . . . . . . . . . . . . . . . . . . . . .  273
</p>
<p>Fig. 8.12 Placing an Illuminance Map in a Model  . . . . . . . . . . . . . . . . . . . . .  274
</p>
<p>Fig. 8.13 Resizing an Illuminance Map within a Model . . . . . . . . . . . . . . . . .  274
</p>
<p>Fig. 8.14 Inspecting the Illuminance Map . . . . . . . . . . . . . . . . . . . . . . . . . . . .  275
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxv
</p>
<p>Fig. 8.15 Inspecting the Atrium Thermal Zone . . . . . . . . . . . . . . . . . . . . . . . .  275
</p>
<p>Fig. 8.16 Deleting Thermal Zones from the Imported Model . . . . . . . . . . . . .  276
</p>
<p>Fig. 8.17 Deleting Space Types from the Imported Model . . . . . . . . . . . . . . .  276
</p>
<p>Fig. 8.18 Applying a New Schedule Set to the Imported Model  . . . . . . . . . .  276
</p>
<p>Fig. 8.19 Applying a Lighting Definition . . . . . . . . . . . . . . . . . . . . . . . . . . . .  277
</p>
<p>Fig. 8.20 Reviewing the Lighting Schedules. . . . . . . . . . . . . . . . . . . . . . . . . .  277
</p>
<p>Fig. 8.21 Adding an output Variable to the Model  . . . . . . . . . . . . . . . . . . . . .  278
</p>
<p>Fig. 8.22 Running a simulation using EnergyPlus for  
</p>
<p>Daylighting calculations  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  278
</p>
<p>Fig. 8.23 EnergyPlus Illuminance Map on 6/21 at 8:00&nbsp;AM DST . . . . . . . . .  279
</p>
<p>Fig. 8.24 EnergyPlus Illuminance Map on 6/21 at 1:00&nbsp;PM DST  . . . . . . . . .  279
</p>
<p>Fig. 8.25 EnergyPlus Daylighting Illuminance and Electric  
</p>
<p>Lighting Energy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  280
</p>
<p>Fig. 8.26 OpenStudio Radiance Measure added to workflow . . . . . . . . . . . . .  280
</p>
<p>Fig. 8.27 OpenStudio Radiance measure parameters . . . . . . . . . . . . . . . . . . .  281
</p>
<p>Fig. 8.28 Re-running simulation with the OpenStudio Radiance  
</p>
<p>measure  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  282
</p>
<p>Fig. 8.29 Radiance Illuminance Map on 6/21 at 8:00&nbsp;AM DST . . . . . . . . . . .  282
</p>
<p>Fig. 8.30 Radiance Illuminance Map on 6/21 at 1:00&nbsp;PM DST . . . . . . . . . . .  283
</p>
<p>Fig. 8.31 Radiance Daylighting Illuminance and Electric  
</p>
<p>Lighting Energy . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  283
</p>
<p>Fig. 8.32 Comparison of EnergyPlus and Radiance Illuminance  
</p>
<p>Calculations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  284
</p>
<p>Fig. 8.33 OpenStudio Radiance Measure run directory  . . . . . . . . . . . . . . . . .  284
</p>
<p>Fig. 8.34 Radiance scene rendering  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  285
</p>
<p>Fig. 8.35 Additional Daylighting Metrics . . . . . . . . . . . . . . . . . . . . . . . . . . . .  285
</p>
<p>Fig. 9.1 NEST thermostat Measure concept . . . . . . . . . . . . . . . . . . . . . . . . .  288
</p>
<p>Fig. 9.2 Code beautify used to inspect a Measure.xml file . . . . . . . . . . . . . .  289
</p>
<p>Fig. 9.3 Anatomy of a Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  289
</p>
<p>Fig. 9.4 Measure library with BCL fenestration content shown . . . . . . . . . .  291
</p>
<p>Fig. 9.5 Measure flow in PAT . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  291
</p>
<p>Fig. 9.6 OpenStudio Apply Measure Now dialog highlighting BCL  
</p>
<p>and MyMeasures content . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  292
</p>
<p>Fig. 9.7 Preparing to make a copy of a Measure in the  
</p>
<p>OpenStudio Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  292
</p>
<p>Fig. 9.8 Reading through a Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  294
</p>
<p>Fig. 9.9 Initial edits to the new Measure . . . . . . . . . . . . . . . . . . . . . . . . . . . .  295
</p>
<p>Fig. 9.10 Verifying that the argument changes were made correctly  . . . . . . .  296
</p>
<p>Fig. 9.11 Identifying the location of a Measure error . . . . . . . . . . . . . . . . . . .  296
</p>
<p>Fig. 9.12 Making a second change to the Measure . . . . . . . . . . . . . . . . . . . . .  296
</p>
<p>Fig. 9.13 Making a third change to the Measure . . . . . . . . . . . . . . . . . . . . . . .  297
</p>
<p>Fig. 9.14 Making a fourth Measure change  . . . . . . . . . . . . . . . . . . . . . . . . . .  297
</p>
<p>Fig. 9.15 Final Measure change  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  298
</p>
<p>Fig. 9.16 Output from a successful application of our Measure . . . . . . . . . . .  298
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxvi
</p>
<p>Fig. 9.17 Boiler efficiency modified successfully by our new Measure . . . . .  299
</p>
<p>Fig. 9.18 OpenStudio Application Measure creation dialog . . . . . . . . . . . . . .  299
</p>
<p>Fig. 9.19 New Measure template file edited within the RubyMine IDE . . . . .  300
</p>
<p>Fig. 9.20 Example Measure arguments method . . . . . . . . . . . . . . . . . . . . . . .  301
</p>
<p>Fig. 9.21 Run method from the new Measure template  . . . . . . . . . . . . . . . . .  301
</p>
<p>Fig. 9.22 Creating the new Measure XML . . . . . . . . . . . . . . . . . . . . . . . . . . .  303
</p>
<p>Fig. 9.23 Measure argument code . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  304
</p>
<p>Fig. 9.24 Assigning Measure arguments to Measure variables . . . . . . . . . . . .  304
</p>
<p>Fig. 9.25 Identifying the largest Space in a Model . . . . . . . . . . . . . . . . . . . . .  304
</p>
<p>Fig. 9.26 Error trapping logic for models with no spaces . . . . . . . . . . . . . . . .  305
</p>
<p>Fig. 9.27 Ruby code that adds electric or gas equipment objects  
</p>
<p>to the largest Space in the Model . . . . . . . . . . . . . . . . . . . . . . . . . . .  305
</p>
<p>Fig. 9.28 Reporting the final state of the Model after the  
</p>
<p>Measure completes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  305
</p>
<p>Fig. 9.29 Successful addition of a process load to the largest Space  
</p>
<p>in a Model  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  305
</p>
<p>Fig. 9.30 A typical Measure unit test  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  307
</p>
<p>Fig. 9.31 Typical Measure unit test output . . . . . . . . . . . . . . . . . . . . . . . . . . .  308
</p>
<p>Fig. 9.32 Modified unit test for the Gas Boiler Efficiency Measure . . . . . . . .  309
</p>
<p>Fig. 9.33 Unit test output for Gas Boiler Efficiency Measure . . . . . . . . . . . . .  310
</p>
<p>Fig. 9.34 Example OSW file . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  311
</p>
<p>Fig. 9.35 OpenStudio CLI enabled analysis (Credit: Marjorie Schott) . . . . . .  311
</p>
<p>Fig. 9.36 OpenStudio CLI help text  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  312
</p>
<p>Fig. 9.37 OpenStudio Meta CLI enabled analysis (Credit: Marjorie  
</p>
<p>Schott)  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  313
</p>
<p>Fig. 9.38 OpenStudio Meta CLI help text . . . . . . . . . . . . . . . . . . . . . . . . . . . .  313
</p>
<p>Fig. A.1 OpenStudio documentation web page . . . . . . . . . . . . . . . . . . . . . . .  316
</p>
<p>Fig. A.2 The Unmet Hours web page  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  317
</p>
<p>Fig. A.3 EnergyPlus documentation web page  . . . . . . . . . . . . . . . . . . . . . . .  318
</p>
<p>Fig. A.4 PAT server running on a four core laptop  . . . . . . . . . . . . . . . . . . . .  320
</p>
<p>Fig. A.5 PAT server troubleshooting tools . . . . . . . . . . . . . . . . . . . . . . . . . . .  320
</p>
<p>Fig. A.6 PAT server troubleshooting tools . . . . . . . . . . . . . . . . . . . . . . . . . . .  321
</p>
<p>List of Figures</p>
<p/>
</div>
<div class="page"><p/>
<p>xxxvii
</p>
<p>List of Tables
</p>
<p>Table 2.1 OpenStudio to EnergyPlus Material type mapping . . . . . . . . . . . .  31
</p>
<p>Table 2.2 Material properties for our first Model . . . . . . . . . . . . . . . . . . . . .  32
</p>
<p>Table 2.3 Defining Construction layers . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  37
</p>
<p>Table 3.1 Typical power consumption associated with various activities 
</p>
<p>(ASHRAE 2013, Table&nbsp;1, p.&nbsp;18.4.) . . . . . . . . . . . . . . . . . . . . . . . .  68
</p>
<p>Table 3.2 Schedule Types and names for Checkpoint 3 exercise . . . . . . . . .  78
</p>
<p>Table 6.1 EE Measure Option names and arguments . . . . . . . . . . . . . . . . . .  209
</p>
<p>Table 7.1 Variable assignments for LHS school model analysis . . . . . . . . . .  244</p>
<p/>
</div>
<div class="page"><p/>
<p>1&copy; Springer International Publishing AG, part of Springer Nature 2018 
L. Brackney et al., Building Energy Modeling with OpenStudio, 
https://doi.org/10.1007/978-3-319-77809-9_1
</p>
<p>Chapter 1
</p>
<p>Introduction to&nbsp;Building Energy  
Modeling
</p>
<p>1.1  Why Modeling?
</p>
<p>There is good reason that so much attention is paid to the concept of mathematical 
</p>
<p>model in engineering and physics curriculum. Simple regressions derived from 
</p>
<p>empirical data, differential equations based on first-principles, or detailed computa-
</p>
<p>tional fluid dynamic simulations each provide an analytical framework that yields 
</p>
<p>insight into the behavior of physical systems. In turn, those insights can lead to 
</p>
<p>design decisions that have real impact on safety, cost, and performance of the cars 
</p>
<p>we drive, the power grids that deliver our electricity, and the energy efficiency of the 
</p>
<p>buildings we live and work in.
</p>
<p>The cost/benefit of modeling has varied across markets and over time. A few 
</p>
<p>examples include:
</p>
<p>&bull; 1960s Aerospace: The aerospace industry was early to embrace model-based 
</p>
<p>design in order to manage the incredible cost of prototyping aircraft while pro-
</p>
<p>tecting the lives of test pilots.
</p>
<p>&bull; 1970s Automotive: Increasingly stringent fuel efficiency and emissions stan-
</p>
<p>dards, coupled with reliance on complex electronic controls drove engine and car 
</p>
<p>manufacturers to adopt sophisticated model-centric processes to minimize devel-
</p>
<p>opment cost and time to market.
</p>
<p>&bull; 1980s Financial: While statistical analysis had long been used to assess trends 
</p>
<p>and risk in financial markets, widespread integration of computers into financial 
</p>
<p>transactions put greater pressure on real-time modeling and analytics to maxi-
</p>
<p>mize profit in both short and long terms.
</p>
<p>&bull; 2000s Power: Beside the issues of load growth and emissions reduction, the 
</p>
<p>power sector was faced with myriad challenges ranging from increased penetra-
</p>
<p>tion of renewable energy resources to the introduction of demand response strat-
</p>
<p>egies that introduced volatility to the grid. Increasingly sophisticated models of 
</p>
<p>generation, transmission, distribution, and demand systems were required to 
</p>
<p>plan capital expenditures, schedule power reserves, etc.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_1&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_1&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>2
</p>
<p>That is not to say these (and other) sectors did not make use of mathematical 
</p>
<p>models earlier&nbsp;&ndash; they did. This brief list is meant to point out significant historical 
</p>
<p>events such as the space race, the 70s fuel crisis, advent of the personal computer, 
</p>
<p>etc. that were significant drivers towards the adoption of rigorous mathematical 
</p>
<p>modeling to meet market challenges. Fortuitously, these needs were enabled by 
</p>
<p>improvements in the computing capability required to perform increasingly sophis-
</p>
<p>ticated analysis.
</p>
<p>So, what of the topic of this book, the built environment? In a 2012&nbsp;U.S.&nbsp;Energy 
</p>
<p>Information Administration survey buildings consumed nearly half of the 95.1 
</p>
<p>Quadrillion BTUs of energy produced in the United States. Figure&nbsp;1.1 shows overall 
</p>
<p>consumption by sector along with a breakdown of end uses in both residential and 
</p>
<p>commercial buildings.
</p>
<p>Given the increased urgency in curbing global greenhouse gas emissions, reduc-
</p>
<p>ing the carbon footprint of new and existing buildings has become a priority in 
</p>
<p>many jurisdictions. This is evident in increasingly stringent energy efficient build-
</p>
<p>ing codes and standards,1,2 voluntary performance certification programs like 
</p>
<p>LEED&trade; (Leadership in Energy and Environmental Design),3 the Architecture 2030 
</p>
<p>1 American Society of Heating, Refrigeration, and Air-Conditioning Engineers (ASHRAE) 
Standards and Guidelines Overview (https://www.ashrae.org/standards-research--technology/
standards--guidelines).
2 California Energy Commission (CEC) Title 24 Energy Efficiency Standards (http://www.energy.
ca.gov/title24/).
3 Leadership in Energy and Environmental Design (LEED&trade;) Certification Overview (https://
www.usgbc.org/leed).
</p>
<p>Fig. 1.1 U.S. Energy consumption by sector with end use breakdowns. (Data source U.S.&nbsp;Energy 
Information Administration 2012)
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
<div class="annotation"><a href="https://www.ashrae.org/standards-researchDOUBLEHYPHENtechnology/standardsDOUBLEHYPHENguidelines">https://www.ashrae.org/standards-researchDOUBLEHYPHENtechnology/standardsDOUBLEHYPHENguidelines</a></div>
<div class="annotation"><a href="https://www.ashrae.org/standards-researchDOUBLEHYPHENtechnology/standardsDOUBLEHYPHENguidelines">https://www.ashrae.org/standards-researchDOUBLEHYPHENtechnology/standardsDOUBLEHYPHENguidelines</a></div>
<div class="annotation"><a href="http://www.energy.ca.gov/title24/">http://www.energy.ca.gov/title24/</a></div>
<div class="annotation"><a href="http://www.energy.ca.gov/title24/">http://www.energy.ca.gov/title24/</a></div>
<div class="annotation"><a href="https://www.usgbc.org/leed">https://www.usgbc.org/leed</a></div>
<div class="annotation"><a href="https://www.usgbc.org/leed">https://www.usgbc.org/leed</a></div>
</div>
<div class="page"><p/>
<p>3
</p>
<p>Commitment,4 and a host of utility incentive programs that are driving adoption of 
</p>
<p>energy efficiency (EE) technologies. As in other industries, system modeling is a 
</p>
<p>valuable tool for transforming the built environment. That said, why aren&rsquo;t analyti-
</p>
<p>cal design tools already in widespread use?
</p>
<p>Unlike other sectors, the buildings industry does not generally benefit from an 
</p>
<p>&ldquo;economy of scale.&rdquo; A car manufacturer may amortize investment in analytical capa-
</p>
<p>bility across many products sold. On the other hand, buildings are usually &ldquo;one offs&rdquo; 
</p>
<p>produced by a diverse group of stakeholders including architects, engineering firms, 
</p>
<p>construction companies, owners, and occupants&nbsp;&ndash; none of which could would recoup 
</p>
<p>investment during a project. Assuming that foundational modeling capability even 
</p>
<p>existed, the perceived value of building energy modeling (BEM) varies wildly across 
</p>
<p>these stakeholders, and a prospective building owner may not be inclined to procure a 
</p>
<p>model for their project even though it could reduce their long-term operating expenses.
</p>
<p>1.2  A Brief History of&nbsp;Building Energy Modeling 
</p>
<p>and&nbsp;Simulation
</p>
<p>The path to what we now recognize as BEM and simulation running on personal 
</p>
<p>computers or high performance computing clusters has its roots in the 1960s. Digital 
</p>
<p>computing had evolved to the point that ordinary and partial differential equations 
</p>
<p>representing exterior and interior heat transfer involving buildings could be solved 
</p>
<p>numerically. Unfortunately, even the most rudimentary analysis was restricted to 
</p>
<p>academics or federal employees with access to the mainframe computers of the day. 
</p>
<p>The U.S.&nbsp;Postal Service is recognized as one of the first federal agencies to make 
</p>
<p>significant investment in dedicated software that could assess the thermal perfor-
</p>
<p>mance of buildings.5
</p>
<p>Additional federal agencies began making their own investments in building 
</p>
<p>energy simulation codes in the early 1970s, largely in response to geopolitical and 
</p>
<p>economic turmoil of the time. The U.S.&nbsp;National Bureau of Standards (NBS), now 
</p>
<p>known as the National Institute of Standards and Technology, created NBSLD, the 
</p>
<p>National Bureau of Standards Load Determination program.6 NBSLD was a ground-
</p>
<p>breaking FORTRAN program successfully used to study the growing building 
</p>
<p>energy consumption problem for NBS, the Department of Housing and Urban 
</p>
<p>Development (HUD), and the Department of Defense (DOD).
</p>
<p>Around this time, DOD adapted NBSLD&rsquo;s source code into a new simulation 
</p>
<p>software that would be called the Building Loads Analysis and System 
</p>
<p>Thermodynamics program or BLAST.7 In parallel, the Department of Energy (DOE) 
</p>
<p>4 American Institute of Architects (AIA) 2030 Commitment Overview (https://www.aia.org/
resources/6616-the-2030-commitment).
5 Lau and Ayres (1979).
6 Kusuda (1976).
7 Hittle (1977).
</p>
<p>1.2 A Brief History of&nbsp;Building Energy Modeling and&nbsp;Simulation</p>
<p/>
<div class="annotation"><a href="https://www.aia.org/resources/6616-the-2030-commitment">https://www.aia.org/resources/6616-the-2030-commitment</a></div>
<div class="annotation"><a href="https://www.aia.org/resources/6616-the-2030-commitment">https://www.aia.org/resources/6616-the-2030-commitment</a></div>
</div>
<div class="page"><p/>
<p>4
</p>
<p>elected to adapt the Postal Service software into its own FORTRAN code that would 
</p>
<p>come to be known as DOE-28 developed at Lawrence Berkeley National Laboratory 
</p>
<p>(LBNL). In 1998, DOD discontinued BLAST and DOE halted support for DOE-2, 
</p>
<p>although DOE-2 development would continue for a number of years with funding 
</p>
<p>from the California Public Utilities Commission (CPUC).
</p>
<p>In 1997 and 1998, DOE co-authored several papers, including &ldquo;Beyond BLAST 
</p>
<p>and DOE-2: EnergyPlus, a New-Generation Energy Simulation Program.9&rdquo; These 
</p>
<p>described in some detail, a technical comparison of the approaches used by both 
</p>
<p>BLAST and DOE-2 along with DOE&rsquo;s roadmap for creating new software that 
</p>
<p>would draw on the best of both predecessors. The new simulation engine would be 
</p>
<p>coded from scratch and known as EnergyPlus. Originally written in FORTRAN, 
</p>
<p>EnergyPlus was converted to C++ in 2014 through a code-contribution from 
</p>
<p>Autodesk. EnergyPlus is made available under a permissive BSD-style open source 
</p>
<p>license in collaboration with multiple national laboratories, universities, contrac-
</p>
<p>tors, and companies10 like Trane and Carrier.
</p>
<p>Part of the original EnergyPlus design philosophy was that it would be a simula-
</p>
<p>tion &ldquo;engine&rdquo; only, taking as input a text file and returning simulation results. 
</p>
<p>EnergyPlus text Input Data Files (IDFs) for buildings of any significant complexity 
</p>
<p>were tens of thousands of lines long, requiring precise specification of building 
</p>
<p>geometry, constructions, individual thermal loads, detailed heating ventilation and 
</p>
<p>air conditioning (HVAC) interconnections, and more. Crafting these files by hand 
</p>
<p>was a time consuming and error prone undertaking. It was always DOE&rsquo;s intention 
</p>
<p>that third-party software developers would step up to create graphical user inter-
</p>
<p>faces (GUI) that would author IDFs. Unfortunately, with DOE-2 and its freely avail-
</p>
<p>able eQUEST GUI available, along with the advent of new simulation engines like 
</p>
<p>ESP-r and ApacheSIM and their own interfaces, DOE investment in a state of the art 
</p>
<p>engine like EnergyPlus was not reaching the marketplace.
</p>
<p>In 2008, a researcher at the National Renewable Energy Laboratory (NREL), 
</p>
<p>Peter Ellis, created what he referred to as the OpenStudio SketchUp Plug-In.11 
</p>
<p>Google SketchUp, as it was then known, was free and used by a significant number 
</p>
<p>of architects for early concept design. It stood to reason that creating a Plug-In to 
</p>
<p>convert building geometry from SketchUp into IDF would tackle one of the obstacles 
</p>
<p>for modeling and analysis with EnergyPlus. That solved one part of the IDF author-
</p>
<p>ing problem, but what about all of the other data required as input for EnergyPlus? If 
</p>
<p>making the creation of a single model was easier, would it be possible to automate 
</p>
<p>the creation of hundreds or thousands of design alternatives without the use of a labo-
</p>
<p>ratory or university super computer? Moreover, was there a way to help third-party 
</p>
<p>software developers unleash the power of EnergyPlus more easily? The next step in 
</p>
<p>the evolution of &ldquo;OpenStudio&rdquo; sought to answer these questions and more.
</p>
<p>8 https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf.
9 Crawley et&nbsp;al. (1998).
10 http://energyplus.net.
11 The SketchUp Plug-In is now called &ldquo;Euclid&rdquo; and is available here: http://bigladdersoftware.
com/projects/euclid.
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
<div class="annotation"><a href="https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf">https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf</a></div>
<div class="annotation"><a href="http://energyplus.net">http://energyplus.net</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/projects/euclid">http://bigladdersoftware.com/projects/euclid</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/projects/euclid">http://bigladdersoftware.com/projects/euclid</a></div>
</div>
<div class="page"><p/>
<p>5
</p>
<p>1.3  What Is OpenStudio?
</p>
<p>For an increasing number of people, it will be hard to recall a time when one didn&rsquo;t 
</p>
<p>use an &ldquo;app store&rdquo; to find and download software for personal computers and mobile 
</p>
<p>devices. The advent of operating systems, associated software development kits 
</p>
<p>(SDKs), and app store-like distribution mechanisms has transformed the pace with 
</p>
<p>which software innovations are brought to market. Faced with slow uptake of 
</p>
<p>EnergyPlus, DOE wondered if a similar approach to software development might 
</p>
<p>spur development of BEM-based applications that supported the built environ-
</p>
<p>ment&rsquo;s many stakeholders.
</p>
<p>In 2010, NREL released version 0.1 of a new version of OpenStudio that had 
</p>
<p>been re-envisioned as an SDK that aims to reduce the time and expense of develop-
</p>
<p>ing new BEM applications.12 Subsequent quarterly releases increased coverage of 
</p>
<p>EnergyPlus capability, supported DOE&rsquo;s Radiance daylighting analysis engine, 
</p>
<p>added example applications, and introduced entirely new BEM paradigms. 
</p>
<p>OpenStudio has also served as an effective collaboration platform, coordinating 
</p>
<p>contributions from colleagues at Argonne (ANL), Lawrence Berkeley (LBNL), Oak 
</p>
<p>Ridge (ORNL), and Pacific Northwest National Laboratories (PNNL), Pennsylvania 
</p>
<p>State University, National Resources Canada (NRCan), Group 14 Engineering, and 
</p>
<p>others.
</p>
<p>Like EnergyPlus, OpenStudio is offered under a BSD-style open source license 
</p>
<p>that allows companies to create and sell their own derivative works built with the 
</p>
<p>SDK. It runs on Windows, Mac, and Linux, and has been used to create web and 
</p>
<p>server applications as well. While the SDK itself is written in C++, code &ldquo;bindings&rdquo; 
</p>
<p>allow it to be invoked from other languages including Ruby, C#, Python, and 
</p>
<p>Javascript. As of this writing, nearly two-dozen applications have been produced 
</p>
<p>using the SDK by NREL, other national laboratories, and private sector developers. 
</p>
<p>A few are highlighted in Fig.&nbsp; 1.2, catering to a diversity of end users including 
</p>
<p>building and portfolio owners, architects, engineers, policy makers, and utilities.
</p>
<p>In addition to its role in expediting the development of innovative applications, 
</p>
<p>OpenStudio has borrowed a few key concepts from other software domains, adding 
</p>
<p>them to the BEM discourse. We will learn more about them throughout the book, 
</p>
<p>but they are worth introducing here:
</p>
<p>&bull; Application Programming Interface (API)&nbsp; &ndash; Computer systems tend to be 
</p>
<p>built in &ldquo;layers&rdquo;. Each layer implements some level of functionality and then 
</p>
<p>presents that functionality to the layer above using a convenient API.&nbsp;The API is 
</p>
<p>essentially a software &ldquo;contract&rdquo; that relieves developers of higher-level layers 
</p>
<p>from lower-level implementation details and allows layers to evolve largely inde-
</p>
<p>pendently. The OpenStudio SDK contains a rich API that is the basis for creating 
</p>
<p>OpenStudio Measures or full-blown applications. The OpenStudio API also 
</p>
<p>allows client applications to evolve independently from EnergyPlus by insulat-
</p>
<p>ing the former from changes in the latter. The API is discussed in Chap. 9.
</p>
<p>12 https://www.openstudio.net.
</p>
<p>1.3 What Is OpenStudio?</p>
<p/>
<div class="annotation"><a href="http://openstudio.net">http://openstudio.net</a></div>
</div>
<div class="page"><p/>
<p>6
</p>
<p>&bull; Hierarchy and Inheritance&nbsp;&ndash; The term &ldquo;object-oriented&rdquo; is somewhat broad 
</p>
<p>and encompasses several characteristics. However, one of the main character-
</p>
<p>istics is the notion of an object hierarchy with parent-child relationships, in 
</p>
<p>which more-specific child objects &ldquo;inherit&rdquo; attributes and capabilities from 
</p>
<p>more-general parent objects. OpenStudio makes extensive use of hierarchy 
</p>
<p>and inheritance to improve the efficiency of creating and modifying models. 
</p>
<p>The concepts of hierarchy and inheritance as they apply to BEM will be  
</p>
<p>introduced in Chap. 2.
</p>
<p>&bull; Scripting and Measures&nbsp; &ndash; The OpenStudio API may be invoked from the 
</p>
<p>Ruby scripting language. The OpenStudio SDK itself can execute Ruby pro-
</p>
<p>grams, essentially creating an extension and automation facility for the SDK 
</p>
<p>that is similar to Visual Basic for Excel. Specially structured OpenStudio Ruby 
</p>
<p>scripts are called Measures because the most common use case is applying an 
</p>
<p>energy efficiency measure (EEM) to a building model to improve simulated 
</p>
<p>performance in the same way the EEM is applied to a building to improve 
</p>
<p>actual performance. However, as we will learn in Chap. 6, OpenStudio 
</p>
<p>Measures are much more powerful and have become one of the core value 
</p>
<p>propositions of the platform.
</p>
<p>&bull; Cloud Computing&nbsp;&ndash; The availability of commodity cloud computing has been 
</p>
<p>game changing for other sectors, and it should be no different for BEM.&nbsp;OpenStudio 
</p>
<p>Fig. 1.2 OpenStudio as a BEM operating system. (Credit: Marjorie Schott)
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
</div>
<div class="page"><p/>
<p>7
</p>
<p>makes it easy for anyone13 to leverage cloud computing for large-scale sampling, 
</p>
<p>optimization, and other analyses. OpenStudio Measures are a key to leveraging 
</p>
<p>cloud computing as they provide a systematic way of defining a large simulation 
</p>
<p>space. We will explore this capability first-hand in Chap. 7.
</p>
<p>&bull; Shared Content and Crowd-Sourcing&nbsp; &ndash; The &ldquo;open&rdquo; in OpenStudio comes 
</p>
<p>from open source. Modern open source software projects are largely about free-
</p>
<p>dom to create and commercialize derivative works, but many also try to create a 
</p>
<p>community that encourages&mdash;or at least enables&mdash;sharing of knowledge and cre-
</p>
<p>ated content. OpenStudio does this via the Building Component Library (BCL), 
</p>
<p>an online repository for OpenStudio content including Measures. The BCL is 
</p>
<p>first introduced in Chap. 2 but will pop up in subsequent Chapters as well.
</p>
<p>1.4  Overview of&nbsp;Book Structure
</p>
<p>The majority of this text is organized around one of the first example applications 
</p>
<p>built using the OpenStudio SDK, the OpenStudio Application. The &ldquo;App&rdquo; supports 
</p>
<p>construction, simulation, and review of individual building energy models. 
</p>
<p>Figure&nbsp;1.3 is a typical screenshot of the App annotated to highlight its workflow-
</p>
<p>centric design. Tabs along the left-hand side of the window are generally placed in 
</p>
<p>the order they are used, although not all Tabs are necessarily required for modeling 
</p>
<p>a building. Some Tabs are also broken down into Sub-Tabs identified along the top 
</p>
<p>of the window. In general, the first (left most) Sub-Tab will be most frequently used, 
</p>
<p>while subsequent sections are used in specialized circumstances.
</p>
<p>Like the OpenStudio Application, this book is organized according to steps com-
</p>
<p>monly used in a BEM workflow. The Application&rsquo;s Tabs and related Chapters are as 
</p>
<p>follows:
</p>
<p> Site&nbsp;&ndash; Specify weather, life cycle costs and utility bills (Chap. 2)
</p>
<p> Schedules&nbsp;&ndash; Define schedules applied to building loads (Chap. 3)
</p>
<p> Constructions&nbsp;&ndash; Specify materials, construction assemblies, and sets (Chap. 2)
</p>
<p> Loads&nbsp;&ndash; Define individual building loads (Chap. 3)
</p>
<p> Space Types&nbsp;&ndash; Create profiles for how spaces are occupied ( Chap. 3)
</p>
<p> Geometry&nbsp;&ndash; Define the building exterior and interior geometries (Chap. 2)
</p>
<p> Building&nbsp;&ndash; Assign building level defaults and exterior items (Chaps. 2, 3, and 8)
</p>
<p> Spaces&nbsp;&ndash; Assign profiles to individual spaces (Chap. 3)
</p>
<p> Thermal Zones&nbsp;&ndash; Group spaces into Thermal Zones and assign Zone Equipment 
</p>
<p>(Chaps. 4 and 5)
</p>
<p>13 Previously, large-scale BEM analysis was the purview of laboratory or university researchers 
with access to high performance computers. No small engineering firms can run hundreds of 
simulations in the space of a few minutes for under $10.
</p>
<p>1.4 Overview of&nbsp;Book Structure</p>
<p/>
</div>
<div class="page"><p/>
<p>8
</p>
<p> HVAC&nbsp;&ndash; Specify heating, cooling, and water systems for the building (Chaps. 4 
</p>
<p>and 5)
</p>
<p> Variables&nbsp;&ndash; Specify additional simulation reporting variables (Chaps. 2, 3, 4, and 
</p>
<p>5)
</p>
<p> Simulation Settings&nbsp;&ndash; Customize simulation settings (Chap. 8 and Appendix A)
</p>
<p> Measures&nbsp;&ndash; Assign OpenStudio Measure scripts to a workflow (Chaps. 6 and 9)
</p>
<p> Run Simulations&nbsp;&ndash; Perform a single energy simulation (Chaps. 2, 3, 4, 5, and 6)
</p>
<p> Reports&nbsp;&ndash; Review simulation results for a single energy simulation (Chaps. 2, 3, 
</p>
<p>4, 5, and 6)
</p>
<p>Simulating individual buildings is certainly useful, but the real power of 
</p>
<p>modeling is in the ability to perform comparative analysis of many candidate 
</p>
<p>designs. A second example OpenStudio application aimed at comparative anal-
</p>
<p>ysis of multiple models is called the Parametric Analysis Tool, or &ldquo;PAT&rdquo; for 
</p>
<p>short (Fig.&nbsp;1.4).
</p>
<p>PAT takes one or more models developed using the OpenStudio Application and 
</p>
<p>modifies them using OpenStudio Measures for small or large-scale analysis. PAT is 
</p>
<p>organized according to a tabular workflow as follows:
</p>
<p> Analysis&nbsp;&ndash; Specify the type of analysis to be performed (Chaps. 6 and 7)
</p>
<p> Design Alternatives&nbsp; &ndash; Manually define Design Alternatives for small studies 
</p>
<p>(Chap. 6)
</p>
<p> Outputs&nbsp;&ndash; Specify key analysis outputs for large-scale analysis and visualization 
</p>
<p>(Chap. 7)
</p>
<p> Run Simulations&nbsp;&ndash; Manage local or cloud-based analysis (Chaps. 6 and 7)
</p>
<p> Compare Results&nbsp;&ndash; Compare results from small studies (Chap. 6)
</p>
<p> Analysis Server&nbsp;&ndash; Manage and interact with large-scale cloud analyses (Chap. 7)
</p>
<p>Each Chapter begins with multiple sections describing one or more concepts 
</p>
<p>corresponding to the App or PAT Tabs. Focus then shifts to a series of exercises 
</p>
<p>that are intended to practically demonstrate those same concepts. These are 
</p>
<p>referred to as &ldquo;Checkpoint&rdquo; exercises because they are intended to build upon 
</p>
<p>each other successively. That is, Chap. 4&rsquo;s exercise picks up where Checkpoint 
</p>
<p>Four left off at the end of Chap. 3. Each Chapter concludes with some sugges-
</p>
<p>tions for additional exercises that allow the reader to explore concepts in 
</p>
<p>greater depth.
</p>
<p>By following the material and performing the exercises in each Chapter, the 
</p>
<p>reader will learn the rudiments of modeling as applied by many BEM tools, and 
</p>
<p>become familiar with the OpenStudio SDK using example applications. Chapter 
</p>
<p>9 introduces the reader to direct application of the SDK, however it is not intended 
</p>
<p>as a comprehensive guide. Readers requiring more depth on these topics are 
</p>
<p>referred to the resources section of the Appendix for links to in-depth online 
</p>
<p>documentation.
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
</div>
<div class="page"><p/>
<p>9
</p>
<p>Fig. 1.3 OpenStudio Application workflow and detail
</p>
<p>Fig. 1.4 OpenStudio Parametric Analysis Tool (PAT) workflow
</p>
<p>1.4 Overview of&nbsp;Book Structure</p>
<p/>
</div>
<div class="page"><p/>
<p>10
</p>
<p>1.5  Installing OpenStudio
</p>
<p>The remaining Chapters assume that you have installed OpenStudio and its 
</p>
<p>example Applications on your computer. OpenStudio is a free download avail-
</p>
<p>able at http://openstudio.net (Fig.&nbsp;1.5). The OpenStudio website includes down-
</p>
<p>loads, documentation, tutorials, links to instructional YouTube videos, and more.
</p>
<p>Clicking the Downloads link at the top of the webpage takes you to the Download 
</p>
<p>page shown in Fig.&nbsp;1.6. Links for Windows, Linux, and Mac downloads of the latest 
</p>
<p>major release of OpenStudio are available on this page. Major releases are made 
</p>
<p>Fig. 1.5 OpenStudio home page (http://openstudio.net)
</p>
<p>Fig. 1.6 OpenStudio download page
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
<div class="annotation"><a href="http://openstudio.net">http://openstudio.net</a></div>
<div class="annotation"><a href="http://openstudio.net">http://openstudio.net</a></div>
</div>
<div class="page"><p/>
<p>11
</p>
<p>every 3&nbsp; months. Minor release packages are provided more frequently on the 
</p>
<p>Developers page but are not recommended for users as they may include features 
</p>
<p>that are under development and unstable. Select the correct installer for your system 
</p>
<p>and download the package.
</p>
<p>Launch the downloaded package and follow the instructions to install OpenStudio 
</p>
<p>(Fig.&nbsp;1.7). To perform all of the activities described in this book, you will need to 
</p>
<p>install all of the components offered except for the SketchUp Plugin, which is 
</p>
<p>optional. Following a successful installation, it&rsquo;s time to begin learning about BEM 
</p>
<p>and OpenStudio!
</p>
<p>Fig. 1.7 OpenStudio installer dialogs on a Mac
</p>
<p>1.5 Installing OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>12
</p>
<p>References
</p>
<p>Crawley D, Lawrie L et&nbsp; al (1998) Beyond BLAST and DOE-2: EnergyPlus, a new-generation 
energy simulation program. ACEEE Summer Study
</p>
<p>Hittle D (1977) The building loads analysis and system thermodynamics program, BLAST, 
U.S.&nbsp;Army Construction Engineering Research Laboratory, Champaign, IL
</p>
<p>Kusuda T (1976) NBSLD, the computer program for heating and cooling loads in buildings, NBS 
Building Science Series 69
</p>
<p>Lau H, Ayres J&nbsp;1979 Building energy analysis programs. In: Proceedings of the 11th conference on 
winter simulation, vol 1, pp.&nbsp;283&ndash;289, San Diego, CA
</p>
<p>https://www.aia.org/resources/6616-the-2030-commitment
https://www.ashrae.org/standards-research--technology/standards--guidelines
http://bigladdersoftware.com/projects/euclid
https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf
http://www.energy.ca.gov/title24
http://energyplus.net
https://www.openstudio.net
https://www.usgbc.org/leed
</p>
<p>1 Introduction to&nbsp;Building Energy Modeling</p>
<p/>
<div class="annotation"><a href="https://www.aia.org/resources/6616-the-2030-commitment">https://www.aia.org/resources/6616-the-2030-commitment</a></div>
<div class="annotation"><a href="https://www.ashrae.org/standards-research--technology/standards--guidelines">https://www.ashrae.org/standards-research--technology/standards--guidelines</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/projects/euclid">http://bigladdersoftware.com/projects/euclid</a></div>
<div class="annotation"><a href="https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf">https://buildings.lbl.gov/sites/default/files/lbnl-18046.pdf</a></div>
<div class="annotation"><a href="http://www.energy.ca.gov/title24">http://www.energy.ca.gov/title24</a></div>
<div class="annotation"><a href="http://energyplus.net">http://energyplus.net</a></div>
<div class="annotation"><a href="https://www.openstudio.net">https://www.openstudio.net</a></div>
<div class="annotation"><a href="https://www.usgbc.org/leed">https://www.usgbc.org/leed</a></div>
</div>
<div class="page"><p/>
<p>13&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_2
</p>
<p>Chapter 2
</p>
<p>Building Envelope Specification
</p>
<p>2.1  Building Envelope
</p>
<p>The most basic definition of a building is a man-made structure that isolates the inte-
</p>
<p>rior from the outdoor environment. The portions of the building that separate the 
</p>
<p>building&rsquo;s interior from the outdoor environment (e.g. walls, roofs, floors) are often 
</p>
<p>referred to as the building envelope. The envelope protects the interior from rain, 
</p>
<p>snow, wind, and excessive heat or cold; helping to make the interior a safe, comfort-
</p>
<p>able, and productive environment for its occupants. Often, a building&rsquo;s interior is con-
</p>
<p>ditioned with Heating, Ventilation and Air Conditioning (HVAC) to maximize 
</p>
<p>occupant comfort. There are many important considerations when designing a build-
</p>
<p>ing envelope. The envelope must be sufficiently strong to support itself. It must effec-
</p>
<p>tively keep water or other unwanted environmental materials from damaging the 
</p>
<p>building or its contents. It must be secure enough to keep unwanted pests (or people) 
</p>
<p>out of it. It must be visually appealing. These aspects are all very important and there 
</p>
<p>are numerous texts devoted to each of them. As this book is devoted to building energy 
</p>
<p>modeling our focus will be on the transfer of energy through the building envelope.
</p>
<p>2.2  Weather
</p>
<p>As noted weather personality Willard Scott once said, &ldquo;Everyone complains about 
</p>
<p>the weather, but nobody ever seems to do anything about it.&rdquo; It should come as no 
</p>
<p>surprise that weather drives a significant portion of energy transfer into and out of 
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_2) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_2&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_2&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>14
</p>
<p>a building. An office building in Alaska will be subject to very different environ-
</p>
<p>mental conditions than an office building in Florida. It is also well known that, 
</p>
<p>while the actual weather conditions occurring at any given time are difficult to 
</p>
<p>predict, a location&rsquo;s general climate may be described in a meaningful way.
</p>
<p>Because weather varies from year to year, a methodology for combining measured 
</p>
<p>weather data from multiple years into what is referred to as a &ldquo;Typical&rdquo; Meteorological 
</p>
<p>Year (TMY) has been developed.1 TMY data attempts to represent both the annual 
</p>
<p>average weather as well as a range of weather extremes that a given location experi-
</p>
<p>ences. This makes TMY data more useful in predicting future energy use than Actual 
</p>
<p>Meteorological Year (AMY) data for a particular year. TMY data for many locations 
</p>
<p>may be downloaded in EnergyPlus Weather (EPW) format from https://energyplus.
</p>
<p>net/weather. EPW files are a key input for any OpenStudio Model, representing the 
</p>
<p>ambient conditions a building is exposed to.
</p>
<p>The American Society of Heating, Refrigerating, and Air-Conditioning Engineers 
</p>
<p>(ASHRAE) categorizes a location&rsquo;s climate into one of several climate zones based 
</p>
<p>on TMY data for that location.2 ASHRAE climate zones are codified with a climate 
</p>
<p>zone number ranging from 0 for extremely hot through 8 for sub-arctic along with 
</p>
<p>a sub-type letter: A for Moist, B for Dry, and C for Marine. Each location&rsquo;s climate 
</p>
<p>zone number is a function of Heating Degree Days (HDD) and Cooling Degree 
</p>
<p>Days (CDD) calculated from TMY data for that location.
</p>
<p>HDD are calculated by summing the difference between a base temperature 
</p>
<p>(typically 65&nbsp; &deg;F) and the average hourly outdoor air temperature over an entire 
</p>
<p>year, discarding any hours for which the outdoor air temperature is greater than the 
</p>
<p>base temperature. Assuming that a typical building requires no mechanical heating 
</p>
<p>when outdoor air temperatures are above the base temperature this gives a rough 
</p>
<p>metric related to how much heating energy will be required. CDD are calculated in 
</p>
<p>a similar manner with a different base temperature for cooling (typically 50&nbsp;&deg;F).
</p>
<p> 
</p>
<p>HDD
MAX T T
</p>
<p>i
</p>
<p>base heating i

</p>
<p> 

</p>
<p>
1
</p>
<p>8760 0
</p>
<p>24
</p>
<p>,
</p>
<p> 
</p>
<p> 
</p>
<p>CDD
MAX T T
</p>
<p>i
</p>
<p>i base cooling

</p>
<p> 

</p>
<p>
1
</p>
<p>8760 0
</p>
<p>24
</p>
<p>,
</p>
<p> 
</p>
<p>The climate zone subtype is related to the location&rsquo;s humidity and is a function 
</p>
<p>of the average annual rainfall as well as the outdoor air temperatures. Using these 
</p>
<p>definitions, the climate zone designation for all locations in the US is illustrated in 
</p>
<p>Fig.&nbsp;2.1. A representative city has been chosen for each climate zone, and it is often 
</p>
<p>assumed that TMY data for these cities are representative of the entire climate zone 
</p>
<p>when performing large-scale analyses involving prototypical buildings.
</p>
<p>A location&rsquo;s climate zone designation is useful for understanding the tempera-
</p>
<p>tures that a building experiences. However, there are many more aspects to a loca-
</p>
<p>1 Wilcox and Marion (2008).
2 ANSI/ASHRAE (2013).
</p>
<p>2 Building Envelope Specification</p>
<p/>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
</div>
<div class="page"><p/>
<p>15
</p>
<p>tion&rsquo;s environment including altitude, wind speed and direction, psychrometric 
</p>
<p>conditions, and solar radiation incident on the surface of the Earth (solar insolation) 
</p>
<p>that are often captured in weather data files. Tools like DView (included with 
</p>
<p>OpenStudio), Climate Consultant from UCLA (Fig.&nbsp;2.2), Elements from Big Ladder 
</p>
<p>Software, or Ladybug for Grasshopper are useful for exploring TMY data for a 
</p>
<p>particular location in detail.
</p>
<p>Additional weather information useful for energy modeling is also found in 
</p>
<p>Design Day (DDY) files, which are freely available for many locations at https://
</p>
<p>energyplus.net/weather. Data in DDY files describe extreme climate conditions 
</p>
<p>expected for a particular location. DDY files are frequently used when sizing HVAC 
</p>
<p>systems since they must be capable of keeping the building comfortable during 
</p>
<p>extreme heating, cooling, humidification, and dehumidification conditions. We 
</p>
<p>shall revisit the topic of design days and HVAC sizing in Chap. 4.
</p>
<p>Fig. 2.1 Climate zone locations in U.S
</p>
<p>2.2 Weather</p>
<p/>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
</div>
<div class="page"><p/>
<p>16
</p>
<p>2.3  Envelope Geometry and&nbsp;Building Spaces
</p>
<p>There are number of ways to develop envelope and interior geometry for an 
</p>
<p>OpenStudio Model. The floor plan editor integrated within the OpenStudio 
</p>
<p>Application may be used to develop a two-dimensional floor plan for each building 
</p>
<p>story (Fig.&nbsp;2.3). The OpenStudio Plug-In for Trimble SketchUp can also be used to 
</p>
<p>modify detailed building geometry in three dimensions (Fig.&nbsp; 2.4). Third party 
</p>
<p>Computer Aided Drafting (CAD) tools capable of exporting geometry in Green 
</p>
<p>Building Extensible Markup Language (gbXML) format may also be used since 
</p>
<p>OpenStudio can import gbXML files. Finally, the OpenStudio API, discussed in 
</p>
<p>Chap. 9, may be used to procedurally create geometry for an OpenStudio Model. 
</p>
<p>While this book focuses primarily on the free and open source floor plan editor 
</p>
<p>integrated with the OpenStudio Application, the general concepts discussed in this 
</p>
<p>Chapter apply to the geometry of any OpenStudio Model, regardless of the source.
</p>
<p>The interior geometry of an OpenStudio Model is composed of distinct (non- 
</p>
<p>overlapping), three-dimensional volumes called Spaces. It is important to note that 
</p>
<p>Spaces are an OpenStudio abstraction not presently shared with EnergyPlus. 
</p>
<p>OpenStudio Spaces are useful for specifying programmatic activities within a build-
</p>
<p>ing (e.g. Office, Classroom, etc.) and their corresponding energy loads. A shared 
</p>
<p>Fig. 2.2 TMY data inspected using climate consultant
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>17
</p>
<p>Fig. 2.3 Building envelope drawn with the OpenStudio Application floor plan editor
</p>
<p>Fig. 2.4 Building envelope drawn using the OpenStudio Plug-In for Trimble SketchUp
</p>
<p>2.3 Envelope Geometry and&nbsp;Building Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>18
</p>
<p>definition of typical loads and schedules for a specific activity is referred to as an 
</p>
<p>OpenStudio Space Type.3 Each Space can be assigned a single Space Type. 
</p>
<p>Figure&nbsp;2.5 illustrates the second floor of a small office building divided into three 
</p>
<p>Spaces which reference two Space Types. Space Types will be discussed in greater 
</p>
<p>detail in Chap. 3.
</p>
<p>One or more OpenStudio Spaces may be grouped together to form an OpenStudio 
</p>
<p>Thermal Zone (Fig.&nbsp;2.6). Thermal Zones are the primary object of simulation in 
</p>
<p>EnergyPlus and will be discussed in Chap. 4. Because Thermal Zones are com-
</p>
<p>prised of Spaces, Space geometry defines the geometry of a Thermal Zone. In the 
</p>
<p>simplest case, an entire building could be treated as a single Thermal Zone consist-
</p>
<p>ing of a single Space.
</p>
<p>In practice, the division of Spaces and Space Types within a building is generally 
</p>
<p>prescribed by intended use of a given space. On the other hand, selecting building 
</p>
<p>zoning is a far trickier task in terms of both building and energy Model perfor-
</p>
<p>mance. Furthermore, simulation time increases with the number of Thermal Zones 
</p>
<p>and space boundaries so excessive geometry becomes computationally expensive. It 
</p>
<p>is recommended to make Spaces only as small as required to capture the different 
</p>
<p>activities within a building while also supporting proper thermal zoning. Thermal 
</p>
<p>Zones will be revisited in Chap. 4.
</p>
<p>3 It is worth noting that standards like ASHRAE 90.1 and California Title 24 specify assumptions 
</p>
<p>and minimum performance requirements in the context of prescribed ID=&rdquo;ITerm32&rdquo;space types. The standard-
</p>
<p>ized definition of space types is not simply a useful concept, it is fundamental to the development 
</p>
<p>of building codes and the projects that reference them.
</p>
<p>Fig. 2.5 Simple office building with three Spaces and two Space Types on second floor
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>19
</p>
<p>2.4  Surfaces
</p>
<p>Each Space in an OpenStudio Model is bounded on all sides by a Surface. Each 
</p>
<p>Surface is an infinitely thin, two-dimensional polygon that separates the volume 
</p>
<p>inside a Space from the region outside the Space. The normal vector of a Surface 
</p>
<p>(calculated by tracing the vertices using the right-hand rule) always points out of a 
</p>
<p>Space. The collection of Surfaces associated with a Space defines the total volume 
</p>
<p>of the Space. Omitting a Surface from a Space&rsquo;s boundary (e.g. not fully enclosing 
</p>
<p>a Space) results in incorrect volume and area calculations and should be avoided.
</p>
<p>Surfaces play a large role in defining the heat transfer into and out of Spaces and 
</p>
<p>their related Thermal Zones (Fig.&nbsp;2.7). Modes of heat transfer through a surface are 
</p>
<p>shown in Fig.&nbsp;2.8. Note that sunlight does not pass directly through the surface into 
</p>
<p>the space. Transparent openings such as windows and skylights must be modeled 
</p>
<p>separately as Sub-Surfaces, which are discussed later in this Chapter. Heat and mass 
</p>
<p>transfer via (unintentional) infiltration is described in Chap. 3 and mechanical ven-
</p>
<p>tilation is introduced in Chap. 4.
</p>
<p>Because Surfaces are infinitely thin, new modellers commonly wonder how they 
</p>
<p>should describe actual building surfaces, which have non-zero thickness. The 
</p>
<p>authors recommend placing Surfaces on the exterior face of all building surfaces 
</p>
<p>exposed to outdoor or ground boundary conditions as shown in Fig.&nbsp;2.9. Surfaces 
</p>
<p>should be placed on the centreline of interior building surfaces as shown in Fig.&nbsp;2.10. 
</p>
<p>This technique ensures that the exterior area exposed to the outdoor environment is 
</p>
<p>fully captured. Assuming that the envelope surface area is a more significant driver 
</p>
<p>Fig. 2.6 Simple office building with first and second floors zoned separately
</p>
<p>2.4 Surfaces</p>
<p/>
</div>
<div class="page"><p/>
<p>20
</p>
<p>of building thermal performance than interior heat transfer effect, this can improve 
</p>
<p>thermal model fidelity. It should be noted that this approach does artificially extend 
</p>
<p>floor Surfaces into wall cavities, yielding a floor area that is somewhat larger than 
</p>
<p>the usable area. Additionally, the calculated air volume derived from the bounding 
</p>
<p>Surfaces will include the volume of air inside the wall and ceiling cavities. For 
</p>
<p>larger buildings, these effects will be minimal.
</p>
<p>Each individual Surface may be classified as a wall, floor, or roof/ceiling. These 
</p>
<p>classifications allow for calculations such as the floor area of a Space or total exte-
</p>
<p>rior wall area. Each Surface also specifies the outside boundary condition that is 
</p>
<p>Fig. 2.7 Heat transfer mechanisms within a space. (Credit Marjorie Schott)
</p>
<p>Fig. 2.8 Interior and exterior surface heat transfer
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>21
</p>
<p>applied to that Surface. Outdoor Surfaces are exposed to the exterior environment 
</p>
<p>typically including outdoor air temperature and solar radiation. Ground Surfaces 
</p>
<p>are in contact with the ground domain and are not typically exposed to the outdoor 
</p>
<p>air temperature or solar radiation. Interior Surfaces are in contact with a Surface 
</p>
<p>in another space and are exposed to the indoor conditions of the other Space 
</p>
<p>instead of the outdoor environment. A special Adiabatic Surface type does not 
</p>
<p>allow any heat transfer by conduction into a Space and can be useful in some 
</p>
<p>advanced applications.
</p>
<p>Fig. 2.9 Two story building with building surface thickness shown
</p>
<p>Fig. 2.10 Recommended placement of OpenStudio surfaces to define Spaces
</p>
<p>2.4 Surfaces</p>
<p/>
</div>
<div class="page"><p/>
<p>22
</p>
<p>It is important to check that all Surfaces have the proper boundary conditions. 
</p>
<p>The Geometry ( ) Tab in the Application shown in Fig.&nbsp;2.11 may be used for this 
</p>
<p>purpose. It is recommended to check for correct boundary conditions on all exterior 
</p>
<p>surfaces first before hiding roof geometry and proceeding story by story to check 
</p>
<p>that all interior surfaces have the correct boundary conditions. A Surface&rsquo;s boundary 
</p>
<p>condition &ndash;not its location- dictates how it will treated by the simulation engine. 
</p>
<p>Matched interior Surfaces should show up in green, whereas exteriors will appear 
</p>
<p>blue and ground contact Surfaces render in light brown. Incorrect assignments will 
</p>
<p>fail to simulate or produce unexpected results.
</p>
<p>2.5  Constructions
</p>
<p>Each Surface has an associated Construction. A Construction is comprised of layers 
</p>
<p>of Materials as shown in Fig.&nbsp;2.12. Materials are ordered from the exterior to inte-
</p>
<p>rior Surface. Each Material layer has properties related to its heat transfer character-
</p>
<p>istics. Composite layers, such as a wood stud wall with batt insulation, are modelled 
</p>
<p>with the Material properties of the overall assembly. Libraries of common construc-
</p>
<p>tion material and assembly properties are distributed with OpenStudio. Additional 
</p>
<p>Materials can also be found in the Building Component Library. Accessing materi-
</p>
<p>als from these sources will be discussed further in this Chapter&rsquo;s tutorial section. 
</p>
<p>During simulation, the temperature on both sides of each Material layer is com-
</p>
<p>puted. Heat transfer through each Material is a function of the temperature differ-
</p>
<p>ence across the Material, the Material&rsquo;s thermal resistance, and the Material&rsquo;s 
</p>
<p>capacity to store thermal energy. This is commonly represented as an equivalent RC 
</p>
<p>circuit model as shown in Fig.&nbsp;2.13.
</p>
<p>Fig. 2.11 Inspecting geometry boundary conditions in the OpenStudio Application
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>23
</p>
<p>Interior Surfaces between adjacent Spaces are represented by Surfaces in each 
</p>
<p>Space that reference one another. By design, these adjacent Surfaces each have 
</p>
<p>Constructions which mirror each other, that is their Material layers are identical but 
</p>
<p>in reverse order. If a Construction is symmetric (e.g. a layer of drywall followed by 
</p>
<p>wood stud wall and another layer of drywall) then both Surfaces may reference the 
</p>
<p>same Construction. This concept is shown in Fig.&nbsp;2.14.
</p>
<p>2.6  Sub-Surfaces
</p>
<p>Surfaces may have openings such as doors, windows, and skylights. These Sub- 
</p>
<p>Surfaces are linked to a parent Surface. The Sub-Surface overlaps the parent Surface, 
</p>
<p>and its area is subtracted from the parent&rsquo;s gross area for the purpose of heat 
</p>
<p>Fig. 2.12 Material layers in a ceiling construction
</p>
<p>Fig. 2.13 Equivalent RC network for a construction
</p>
<p>2.6 Sub-Surfaces</p>
<p/>
</div>
<div class="page"><p/>
<p>24
</p>
<p>transfer. Like Surfaces, Sub-Surfaces also reference related Constructions. 
</p>
<p>Constructions for opaque Sub-Surfaces such as doors may use the same opaque 
</p>
<p>Materials as Surfaces. All Sub-Surfaces must be explicitly modeled. Cutting a hole 
</p>
<p>in a surface or leaving a gap in the space boundary does not result in simulation of 
</p>
<p>air transfer or allow light into the space. Note that solar radiation only passes 
</p>
<p>through transparent Sub-Surfaces like windows or skylights.
</p>
<p>Constructions for transparent Sub-Surfaces such as windows or skylights must 
</p>
<p>be made of window Materials such as glass, gas filled voids, or window shading 
</p>
<p>such as blinds or screens. Like opaque Materials, transparent Materials allow heat 
</p>
<p>transfer through conduction as well as heat storage. However, transparent Materials 
</p>
<p>also allow solar radiation to pass through or be reflected back at each layer 
</p>
<p>(Fig.&nbsp;2.15). Transparent properties are often provided separately for the entire solar 
</p>
<p>radiation spectrum and for the spectrum of visible light.
</p>
<p>Fig. 2.14 Mirrored constructions for adjacent surfaces
</p>
<p>Fig. 2.15 Heat transfer through transparent constructions
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>25
</p>
<p>2.7  Introduction to&nbsp;Data Inheritance in&nbsp;OpenStudio
</p>
<p>At this point, many readers may be reeling at the prospect of properly assigning 
</p>
<p>Space Types, Constructions, and Materials subject to the rules and constraints 
</p>
<p>described in previous sections. In truth, creating correct EnergyPlus input files 
</p>
<p>requires significant attention to detail, but fortunately OpenStudio comes to our 
</p>
<p>rescue with a concept known as &ldquo;data inheritance.&rdquo; Data inheritance is a key feature 
</p>
<p>of object oriented software paradigms, allowing child objects to inherit data from 
</p>
<p>their parents without explicit specification. For example, defining a building type 
</p>
<p>allows OpenStudio to inherit a standard Space Type that is automatically applied to 
</p>
<p>all Spaces within that building. For example, Spaces within a school building auto-
</p>
<p>matically inherit a &ldquo;classroom&rdquo; Space Type, the most common in schools. Explicit 
</p>
<p>assignment of Space Type to any given Space becomes the exception rather than the 
</p>
<p>rule, saving time and reducing the opportunity for error.
</p>
<p>The concept of data inheritance also applies to Constructions and Materials. 
</p>
<p>With OpenStudio, users may specify a top-level Construction Set that will be 
</p>
<p>applied to an entire building. Each Construction Set specifies a standard Construction 
</p>
<p>for a particular type of Surface or Sub-Surface (e.g. walls, roofs, windows, doors). 
</p>
<p>When a Surface or Sub-Surface is queried for its Construction, the Surface first 
</p>
<p>checks if a Construction has been explicitly assigned to it. If not, the Surface or Sub- 
</p>
<p>Surface checks if its associated Space has a Construction set which defines a con-
</p>
<p>struction for it. If not, the Space&rsquo;s Building Story Construction Set is checked and 
</p>
<p>finally the Construction Set assigned to the whole building will be checked.
</p>
<p>The inheritance process, shown in Fig.&nbsp; 2.16, allows for constructions to be 
</p>
<p>quickly assigned to all surfaces in the Model while also allowing explicit 
</p>
<p>Construction specification for Surfaces, Spaces, or building Stories as needed. 
</p>
<p>Fig. 2.16 Construction 
</p>
<p>inheritance hierarchy
</p>
<p>2.7 Introduction to&nbsp;Data Inheritance in&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>26
</p>
<p>Numbers in this figure represent the relative priority of Construction or Material 
</p>
<p>data that may have been explicitly assigned at any level. For example, a Construction 
</p>
<p>Set that may have been explicitly assigned in a Space will take precedence over any 
</p>
<p>Construction Sets that may have been assigned for the Story or Building. Of course, 
</p>
<p>if the modeler has defined a specific Surface or Sub-Surface construction in a Space 
</p>
<p>that will always be respected.
</p>
<p>Typically, Construction Sets contain definitions for all types of Surfaces or Sub- 
</p>
<p>Surfaces. However, Construction Sets may also include partial definitions&nbsp;&ndash; e.g. win-
</p>
<p>dow Constructions, but not wall Constructions. In such cases, the inheritance search 
</p>
<p>process halts as soon as it finds appropriate data. This allows, for example, a 
</p>
<p>Construction Set to specify a particular window Construction to use for one Story of 
</p>
<p>the building while all other Constructions would be inherited from the Building 
</p>
<p>Construction Set.
</p>
<p>Data inheritance is a key feature of OpenStudio, and understanding how it works 
</p>
<p>is important for maximizing a modeler&rsquo;s productivity. We will reinforce this concept 
</p>
<p>in Chap. 3 where Space Type inheritance will be discussed in greater detail, but 
</p>
<p>inheritence applies throughout the SDK and we cannot overstate the value of under-
</p>
<p>standing how it works.
</p>
<p>2.8  Checkpoint One: Creating an&nbsp;Energy Model 
</p>
<p>with&nbsp;an&nbsp;Unconditioned Envelope
</p>
<p>In this first exercise, we will create a simple Model with a single Space and Thermal 
</p>
<p>Zone. The geometry for our first Model shown in Fig.&nbsp;2.17 comes from ASHRAE 
</p>
<p>Standard 140 test case 600. ASHRAE Standard 140 is used to evaluate energy simu-
</p>
<p>lation programs, and is designed around BESTEST, a suite of building modeling 
</p>
<p>test cases.4 For this first exercise, we will only specify our simple building&rsquo;s enve-
</p>
<p>lope geometry and Constructions. This will allow us to simulate the envelope&rsquo;s 
</p>
<p>unconditioned response to weather conditions. In Chap. 3 we will add internal heat 
</p>
<p>gains related to Space use. We will revisit this Model once more in Chap. 4, adding 
</p>
<p>an HVAC system for Space conditioning.
</p>
<p>2.8.1  Adding Weather to&nbsp;a&nbsp;Model
</p>
<p>To begin, we must first identify the location and weather file for our Model. We 
</p>
<p>recommend that you seek out weather files associated with your own city. Weather 
</p>
<p>files in EPW format are freely available at https://energyplus.net/weather. Download 
</p>
<p>weather data for a location of interest. Once downloaded, examine the data using the 
</p>
<p>4 https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html.
</p>
<p>2 Building Envelope Specification</p>
<p/>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
<div class="annotation"><a href="https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html">https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html</a></div>
</div>
<div class="page"><p/>
<p>27
</p>
<p>DView Application packaged with OpenStudio (Fig.&nbsp;2.18) to become acquainted 
</p>
<p>with the type of information it contains. With weather files in hand, it is time to  
</p>
<p>create our first OpenStudio Model.
</p>
<p>Locate the OpenStudio Application on your computer and launch it. As the pro-
</p>
<p>gram begins running, the user is presented with a startup dialog shown in Fig.&nbsp;2.19, 
</p>
<p>while a new, empty Model is created. After a brief pause, the dialog is replaced with 
</p>
<p>the main OpenStudio Application window shown in Fig.&nbsp;2.20.
</p>
<p>Fig. 2.17 ASHRAE Standard 140 BESTEST Case 600 Building
</p>
<p>Fig. 2.18 TMY data inspected with DView
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>28
</p>
<p>As with any electronic document, it is a good practice to save work often and to 
</p>
<p>create backups along the way. This allows you to restore your Model from the last 
</p>
<p>save point rather than having to start completely over if you make a mistake. Get 
</p>
<p>off to a good start by using the File Menu and selecting the Save option. A dialog 
</p>
<p>opens allowing you to select the working directory and name of your first Model. 
</p>
<p>Saving the empty Model creates an OSM (OpenStudio Model) file along with an 
</p>
<p>identically named directory (Fig.&nbsp;2.21). The OSM is an OpenStudio Model file and 
</p>
<p>is the file you would send if you wanted to share your Model with someone. The 
</p>
<p>corresponding Model directory will eventually contain supporting files, simulation 
</p>
<p>results, and more.
</p>
<p>Fig. 2.19 OpenStudio launch dialog
</p>
<p>Fig. 2.20 OpenStudio Application with a newly created model
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>29
</p>
<p>The OpenStudio Application initially opens in the Site ( ) Tab used to specify 
</p>
<p>site details like weather. Click on the  Button and select the EPW file you 
</p>
<p>have downloaded. This will attach the weather file to your Model and import loca-
</p>
<p>tion information such as latitude, longitude, and elevation as shown in Fig.&nbsp;2.22.
</p>
<p>Save the Model once again and note that the Model directory now includes a 
</p>
<p>copy of the EPW in a &ldquo;files&rdquo; subdirectory as shown in Fig.&nbsp;2.23.
</p>
<p>2.8.2  Creating New Materials
</p>
<p>The next step in the process is to define properties for some of the Materials in our 
</p>
<p>building. Click on the Constructions ( ) Tab in the Application. This Tab contains 
</p>
<p>three Sub-Tabs: Construction Sets, Constructions, and Materials. We need to start 
</p>
<p>by defining some basic materials so click the  Sub-Tab. On the left side of the 
</p>
<p>Materials Sub-Tab shown in Fig.&nbsp;2.24 note the categories for Material Object types 
</p>
<p>including &ldquo;Materials,&rdquo; &ldquo;No Mass Materials&rdquo;, and so on.
</p>
<p>Fig. 2.21 A newly saved OpenStudio Model
</p>
<p>Fig. 2.22 Adding EPW and DDY files in the OpenStudio Application
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>30
</p>
<p>These are the different Material types supported in OpenStudio, which closely 
</p>
<p>mirrors materials supported by EnergyPlus. Detailed information about these 
</p>
<p> material types can be found in the EnergyPlus I/O Reference and Engineering 
</p>
<p>Guides.5 A mapping between Material types and EnergyPlus materials is given in 
</p>
<p>Table&nbsp;2.1.
</p>
<p>We will start by making a new Material of type &ldquo;No Mass Materials.&rdquo; Click on 
</p>
<p>that label and press the  Button. This will create a new Object as shown in Fig.&nbsp;2.25.
</p>
<p>Name the Object &ldquo;R25 Insulation&rdquo; and set the properties as shown in Table&nbsp;2.2. 
</p>
<p>Repeat this process for the remaining material objects in the Table.
</p>
<p>2.8.3  Importing Materials from&nbsp;Existing Models
</p>
<p>We have now made several Material objects by hand and have a better understand-
</p>
<p>ing of how Materials are represented in OpenStudio and EnergyPlus. However, this 
</p>
<p>process is tedious and prone to error when performed frequently. Instead, let&rsquo;s 
</p>
<p>5 The authors recommend bookmarking this ID=&rdquo;ITerm109&rdquo;site, because we will refer to it frequently in later 
</p>
<p>Chapters&nbsp;&ndash; https://energyplus.net/documentation.
</p>
<p>Fig. 2.23 Model directory with EPW file
</p>
<p>Fig. 2.24 The OpenStudio Application Constructions Tab and Materials Sub-Tab
</p>
<p>2 Building Envelope Specification</p>
<p/>
<div class="annotation"><a href="https://energyplus.net/documentation">https://energyplus.net/documentation</a></div>
</div>
<div class="page"><p/>
<p>31
</p>
<p>explore how to load Materials from OpenStudio&rsquo;s built-in libraries as well as the 
</p>
<p>online Building Component Library. The OpenStudio Application allows a user to 
</p>
<p>extract data like Space Types, Constructions, and Materials from any OSM by load-
</p>
<p>ing it as a &ldquo;Library&rdquo;. Users can then incorporate pieces of information from the 
</p>
<p>Library OSM into their current working Model.
</p>
<p>Select Load Library from the File Menu. This will bring up a dialog where you 
</p>
<p>can browse for other OSM files to use as a Library. The dialog defaults to a direc-
</p>
<p>tory within the OpenStudio installation package containing a number of useful 
</p>
<p>OSMs as shown in Fig.&nbsp;2.26, but the user is free to navigate to other directories 
</p>
<p>containing OSMs.
</p>
<p>For the purpose of this exercise, select CECTemplate.osm. On the right side of 
</p>
<p>the Materials Tab click on the  Tab and expand the Materials section just beneath 
</p>
<p>it. You can now see all of the Material objects in the Library. Any of these can be 
</p>
<p>added to the current Model by right clicking, dragging, and dropping them on the 
</p>
<p>space labeled &ldquo;Drag From Library.&rdquo; Once a Material has been added to the Model it 
</p>
<p>may be inspected, edited, and used in the same manner as any hand-generated 
</p>
<p>Table 2.1 OpenStudio to 
</p>
<p>EnergyPlus Material type 
</p>
<p>mapping
</p>
<p>OpenStudio Material 
</p>
<p>type EnergyPlus Material type
</p>
<p>Materials Material
</p>
<p>No Mass Materials Material:NoMass
</p>
<p>Air Gap Materials Material:AirGap
</p>
<p>Simple glazing system 
</p>
<p>window Materials
</p>
<p>WindowMaterial:SimpleGlaz
</p>
<p>ingSystem
</p>
<p>Glazing window 
</p>
<p>Materials
</p>
<p>WindowMaterial:Glazing
</p>
<p>Gas window Materials WindowMaterial:Gas
</p>
<p>Gas mixture window 
</p>
<p>Materials
</p>
<p>WindowMaterial:GasMixture
</p>
<p>Blind window 
</p>
<p>Materials
</p>
<p>WindowMaterial:Blind
</p>
<p>Screen window 
</p>
<p>Materials
</p>
<p>WindowMaterial:Screen
</p>
<p>Shade window 
</p>
<p>Materials
</p>
<p>WindowMaterial:Shade
</p>
<p>Air wall Materials N/A
</p>
<p>Infrared transparent 
</p>
<p>Materials
</p>
<p>Material:InfraredTransparent
</p>
<p>Roof vegetation 
</p>
<p>Materials
</p>
<p>Material:RoofVegetation
</p>
<p>Refraction extinction 
</p>
<p>method glazing window 
</p>
<p>Materials
</p>
<p>WindowMaterial:Glazing:Ref
</p>
<p>ractionExtinctionMethod
</p>
<p>Glazing group 
</p>
<p>thermochromic window 
</p>
<p>Materials
</p>
<p>WindowMaterial:GlazingGro
</p>
<p>up:Thermochromic
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>32
</p>
<p>T
a
b
</p>
<p>le
 2
</p>
<p>.2
 
</p>
<p>M
at
</p>
<p>er
ia
</p>
<p>l 
p
ro
</p>
<p>p
er
</p>
<p>ti
es
</p>
<p> f
o
r 
</p>
<p>o
u
r 
</p>
<p>fi
rs
</p>
<p>t 
M
</p>
<p>o
d
el
</p>
<p>M
a
</p>
<p>te
ri
</p>
<p>a
l 
</p>
<p>n
a
m
</p>
<p>e
</p>
<p>R
2
5
 
</p>
<p>In
su
</p>
<p>la
ti
</p>
<p>o
n
</p>
<p>A
ir
</p>
<p> 
</p>
<p>g
ap
</p>
<p>P
la
</p>
<p>st
er
</p>
<p>b
o
ar
</p>
<p>d
</p>
<p>F
ib
</p>
<p>er
g
la
</p>
<p>ss
 
</p>
<p>q
u
il
</p>
<p>t
</p>
<p>R
o
o
f 
</p>
<p>d
ec
</p>
<p>k
</p>
<p>T
im
</p>
<p>b
er
</p>
<p> 
</p>
<p>fl
o
o
ri
</p>
<p>n
g
</p>
<p>D
o
o
r 
</p>
<p>sh
el
</p>
<p>l
</p>
<p>In
te
</p>
<p>ri
o
r 
</p>
<p>w
al
</p>
<p>l
</p>
<p>W
o
o
</p>
<p>d
 
</p>
<p>si
d
in
</p>
<p>g
G
</p>
<p>la
ss
</p>
<p>W
in
</p>
<p>d
o
w
</p>
<p> 
</p>
<p>ai
r 
</p>
<p>fi
ll
</p>
<p>P
ro
</p>
<p>p
er
</p>
<p>ti
es
</p>
<p>M
a
te
</p>
<p>ri
a
l 
</p>
<p>ty
p
</p>
<p>e
N
</p>
<p>o
 m
</p>
<p>as
s
</p>
<p>A
ir
</p>
<p> 
</p>
<p>g
ap
</p>
<p>M
at
</p>
<p>er
ia
</p>
<p>ls
M
</p>
<p>at
er
</p>
<p>ia
ls
</p>
<p>M
at
</p>
<p>er
ia
</p>
<p>ls
M
</p>
<p>at
er
</p>
<p>ia
ls
</p>
<p>M
at
</p>
<p>er
ia
</p>
<p>ls
M
</p>
<p>at
er
</p>
<p>ia
ls
</p>
<p>M
at
</p>
<p>er
ia
</p>
<p>ls
G
</p>
<p>la
zi
</p>
<p>n
g
 
</p>
<p>w
in
</p>
<p>d
o
w
</p>
<p>G
as
</p>
<p> 
</p>
<p>w
in
</p>
<p>d
o
w
</p>
<p>M
a
te
</p>
<p>ri
a
l 
</p>
<p>p
ro
</p>
<p>p
er
</p>
<p>ti
es
</p>
<p>R
o
u
g
h
n
es
</p>
<p>s
R
</p>
<p>o
u
g
h
</p>
<p>&ndash;
R
</p>
<p>o
u
g
h
</p>
<p>R
o
u
g
h
</p>
<p>R
o
u
g
h
</p>
<p>R
o
u
g
h
</p>
<p>V
er
</p>
<p>y
 
</p>
<p>sm
o
o
th
</p>
<p>R
o
u
g
h
</p>
<p>R
o
u
g
h
</p>
<p>&ndash;
&ndash;
</p>
<p>T
h
ic
</p>
<p>k
n
es
</p>
<p>s 
(m
</p>
<p>)
&ndash;
</p>
<p>&ndash;
0
.0
</p>
<p>1
2
</p>
<p>0
.0
</p>
<p>6
6
</p>
<p>0
.0
</p>
<p>1
9
</p>
<p>0
.0
</p>
<p>2
5
</p>
<p>0
.0
</p>
<p>0
3
2
</p>
<p>0
.2
</p>
<p>0
.0
</p>
<p>0
9
</p>
<p>0
.0
</p>
<p>0
3
2
</p>
<p>0
.0
</p>
<p>1
3
</p>
<p>C
o
n
d
u
ct
</p>
<p>iv
it
</p>
<p>y
 
</p>
<p>(W
/m
</p>
<p>-K
)
</p>
<p>&ndash;
&ndash;
</p>
<p>0
.1
</p>
<p>6
0
.0
</p>
<p>4
0
.1
</p>
<p>4
0
.1
</p>
<p>4
1
.0
</p>
<p>6
0
.5
</p>
<p>1
0
.1
</p>
<p>4
1
.0
</p>
<p>6
&ndash;
</p>
<p>R
es
</p>
<p>is
ta
</p>
<p>n
ce
</p>
<p> 
</p>
<p>(m
2
-K
</p>
<p>/W
)
</p>
<p>2
5
.0
</p>
<p>7
5
</p>
<p>0
.1
</p>
<p>5
8
8
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
</p>
<p>D
en
</p>
<p>si
ty
</p>
<p> (
k
g
/m
</p>
<p>3
)
</p>
<p>&ndash;
&ndash;
</p>
<p>9
5
0
</p>
<p>1
2
</p>
<p>5
3
0
</p>
<p>6
5
0
</p>
<p>2
5
0
0
</p>
<p>1
4
0
0
</p>
<p>5
3
0
</p>
<p>&ndash;
&ndash;
</p>
<p>S
p
ec
</p>
<p>ifi
c 
</p>
<p>h
ea
</p>
<p>t 
(J
</p>
<p>/
</p>
<p>k
g
-K
</p>
<p>)
</p>
<p>&ndash;
&ndash;
</p>
<p>8
4
0
</p>
<p>8
4
0
</p>
<p>9
0
0
</p>
<p>1
2
0
0
</p>
<p>7
5
0
</p>
<p>1
0
0
0
</p>
<p>9
0
0
</p>
<p>&ndash;
&ndash;
</p>
<p>T
h
er
</p>
<p>m
al
</p>
<p> 
</p>
<p>A
b
so
</p>
<p>rp
ta
</p>
<p>n
ce
</p>
<p>0
.9
</p>
<p>&ndash;
0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>0
.9
</p>
<p>&ndash;
</p>
<p>S
o
la
</p>
<p>r 
A
</p>
<p>b
so
</p>
<p>rp
ta
</p>
<p>n
ce
</p>
<p>0
.6
</p>
<p>&ndash;
0
</p>
<p>.6
0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>&ndash;
</p>
<p>V
is
</p>
<p>ib
le
</p>
<p> 
</p>
<p>A
b
so
</p>
<p>rp
ta
</p>
<p>n
ce
</p>
<p>0
.6
</p>
<p>&ndash;
0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>0
.6
</p>
<p>&ndash;
</p>
<p>O
p
ti
</p>
<p>ca
l 
</p>
<p>d
at
</p>
<p>a 
ty
</p>
<p>p
e
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
S
</p>
<p>p
ec
</p>
<p>tr
al
</p>
<p> 
</p>
<p>av
er
</p>
<p>ag
e
</p>
<p>&ndash;
</p>
<p>S
o
la
</p>
<p>r 
</p>
<p>tr
an
</p>
<p>sm
it
</p>
<p>ta
n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.8
</p>
<p>6
2
</p>
<p>&ndash;
</p>
<p>F
ro
</p>
<p>n
t 
</p>
<p>so
la
</p>
<p>r 
</p>
<p>re
fl
</p>
<p>ec
ta
</p>
<p>n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.0
</p>
<p>7
8
</p>
<p>&ndash;
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>33
</p>
<p>B
ac
</p>
<p>k
 s
</p>
<p>o
la
</p>
<p>r 
</p>
<p>re
fl
</p>
<p>ec
ta
</p>
<p>n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.0
</p>
<p>7
8
</p>
<p>&ndash;
</p>
<p>V
is
</p>
<p>ib
le
</p>
<p> 
</p>
<p>tr
an
</p>
<p>sm
it
</p>
<p>ta
n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.9
</p>
<p>1
3
</p>
<p>&ndash;
</p>
<p>F
ro
</p>
<p>n
t 
</p>
<p>v
is
</p>
<p>ib
le
</p>
<p> 
</p>
<p>re
fl
</p>
<p>ec
ta
</p>
<p>n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.0
</p>
<p>8
2
</p>
<p>&ndash;
</p>
<p>B
ac
</p>
<p>k
 v
</p>
<p>is
ib
</p>
<p>le
 
</p>
<p>re
fl
</p>
<p>ec
ta
</p>
<p>n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.0
</p>
<p>8
2
</p>
<p>&ndash;
</p>
<p>In
fr
</p>
<p>ar
ed
</p>
<p> 
</p>
<p>tr
an
</p>
<p>sm
it
</p>
<p>ta
n
ce
</p>
<p> a
t 
</p>
<p>n
o
rm
</p>
<p>al
 i
</p>
<p>n
ci
</p>
<p>d
en
</p>
<p>ce
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
</p>
<p>&ndash;
</p>
<p>F
ro
</p>
<p>n
t 
</p>
<p>in
fr
</p>
<p>ar
ed
</p>
<p> 
</p>
<p>em
is
</p>
<p>si
v
it
</p>
<p>y
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.8
</p>
<p>4
&ndash;
</p>
<p>R
ea
</p>
<p>r 
in
</p>
<p>fr
ar
</p>
<p>ed
 
</p>
<p>em
is
</p>
<p>si
v
it
</p>
<p>y
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
0
.8
</p>
<p>4
&ndash;
</p>
<p>G
as
</p>
<p> t
y
p
e
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>&ndash;
&ndash;
</p>
<p>A
ir
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>34
</p>
<p>Fig. 2.25 Creating a new Material in the OpenStudio Application
</p>
<p>Fig. 2.26 OSM Load Library options included with OpenStudio
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>35
</p>
<p>Material. Figure&nbsp; 2.27 illustrates inspecting the properties of a &frac12;&Prime; Hardwood 
</p>
<p>Material while adding a &frac34;&Prime; Hardwood Material from the Library. We won&rsquo;t be 
</p>
<p>using any Materials from this Library for our example Model, but feel free to exper-
</p>
<p>iment with them.
</p>
<p>2.8.4  Importing Materials from&nbsp;the&nbsp;Building Component 
</p>
<p>Library
</p>
<p>Besides existing OSMs, another source for Material data is the Building Component 
</p>
<p>Library (BCL). The BCL is an online repository of energy modeling tool agnostic 
</p>
<p>data, but it has been designed to integrate with OpenStudio tools particularly well. 
</p>
<p>A web interface to the BCL is available at http://bcl.nrel.gov, however it may also 
</p>
<p>be accessed within the Application under the &ldquo;Components &amp; Measures&rdquo; Menu 
</p>
<p>category. Prior to using the BCL from within the Application, you will need to cre-
</p>
<p>ate an account on the BCL web page, navigate to &ldquo;My Dashboard,&rdquo; and make note 
</p>
<p>of your unique BCL &ldquo;API Key.&rdquo; The OpenStudio Application will request this Key 
</p>
<p>the first time you attempt to access BCL content.
</p>
<p>Selecting &ldquo;Find Components&rdquo; within the Application launches an integrated 
</p>
<p>browser that allows the user to search, inspect, and download components from 
</p>
<p>the BCL directly into your Model. Click on the Material category and the Opaque 
</p>
<p>Fig. 2.27 Dragging and Dropping Materials from Library into a Model
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
<div class="annotation"><a href="http://bcl.nrel.gov">http://bcl.nrel.gov</a></div>
</div>
<div class="page"><p/>
<p>36
</p>
<p>sub- category to bring up the list of materials shown in Fig.&nbsp;2.28. Select one or 
</p>
<p>more of these objects and press the  Button at the bottom of the window to 
</p>
<p>download Materials and add them to your Model. We will revisit the BCL in  
</p>
<p>Chap. 6.
</p>
<p>2.8.5  Creating Construction Assemblies
</p>
<p>Now that Materials have been added to the Model, it is time to combine them to 
</p>
<p>create Constructions using the  Sub-Tab (Fig.&nbsp;2.29). Select the &ldquo;Constructions&rdquo; 
</p>
<p>Object type and press the  Button to create a new Construction Object. As in the 
</p>
<p> Sub-Tab, the right-hand pane may be used to inspect objects currently loaded in 
</p>
<p>the working Model or library. Click either  or  and select Materials to drag 
</p>
<p>onto the &ldquo;Drag from Library&rdquo; drop zone in the Construction editor. This adds the 
</p>
<p>selected Material to the currently edited Construction. Materials may be deleted 
</p>
<p>from a Construction by clicking the  Button next to it. Remember that Construction 
</p>
<p>layers are ordered from the outside layer at the top and move towards the Space 
</p>
<p>interior as you progress down the layer list in the editor.
</p>
<p>Fig. 2.28 Downloading a Construction Material from the Building Component Library
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>37
</p>
<p>Use the Constructions Sub-Tab to create the following Construction objects 
</p>
<p>listed in Table&nbsp;2.3.
</p>
<p>Note that Libraries may also contain complete Constructions. Selecting the 
</p>
<p>Constructions category under  lists any Constructions that may have been 
</p>
<p>imported from an OSM. As with Materials, Library Constructions may be dragged 
</p>
<p>and dropped into the working Model to save time and reduce the opportunity for 
</p>
<p>error. Adding Constructions in this manner also adds all requisite Materials from the 
</p>
<p>Library with no additional effort required.
</p>
<p>Fig. 2.29 Creating a double pane window Construction in the OpenStudio Application
</p>
<p>Table 2.3 Defining Construction layers
</p>
<p>Object name
</p>
<p>Interior 
</p>
<p>wall
</p>
<p>Double pane 
</p>
<p>window Door Floor Roof Wall
</p>
<p>Space 
</p>
<p>exterior
</p>
<p>Layer 1 Interior 
</p>
<p>wall
</p>
<p>Glass Door 
</p>
<p>shell
</p>
<p>R25 
</p>
<p>insulation
</p>
<p>Roof deck Wood siding
</p>
<p>Layer 2 &ndash; Window air fill Air 
</p>
<p>gap
</p>
<p>Timber 
</p>
<p>flooring
</p>
<p>Fiberglass 
</p>
<p>quilt
</p>
<p>Fiberglass 
</p>
<p>quilt
</p>
<p>Space 
</p>
<p>interior
</p>
<p>Layer 3 &ndash; Glass Door 
</p>
<p>shell
</p>
<p>&ndash; Plasterboard Plasterboard
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>38
</p>
<p>2.8.6  Creating a&nbsp;Construction Set
</p>
<p>The next step in our process is to combine individual Constructions into a 
</p>
<p>Construction Set that may be applied to the entire building. Go to the  Sub- 
</p>
<p>Tab and create a new Construction Set named &ldquo;My Construction Set&rdquo; using the  
</p>
<p>Button. Drag constructions from  into the appropriate slots within the 
</p>
<p>Construction Set as shown in Fig.&nbsp;2.30.
</p>
<p>Fig. 2.30 Building a Construction Set in the OpenStudio Application
</p>
<p>Fig. 2.31 Setting a Construction Set as the Default for a building
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>39
</p>
<p>The last step is setting a Construction Set as the default for our entire building is 
</p>
<p>performed on the Building ( ) Tab. Select &ldquo;My Construction Set&rdquo; and drag it to the 
</p>
<p>Default Construction Set slot as shown in Fig.&nbsp;2.31.
</p>
<p>As with Materials and Constructions, entire Construction Sets may be pulled in 
</p>
<p>from . This allows the modeler to quickly assign Constructions to walls, floors, 
</p>
<p>roofs, etc. at the Building level with a single drag-and-drop operation. Using pre- 
</p>
<p>built Construction Sets is the most common way to begin creating a new Model in 
</p>
<p>OpenStudio, but it is important for us to understand how Construction Sets are 
</p>
<p>formed so that we may evaluate their suitability and modify them as needed for any 
</p>
<p>given project.
</p>
<p>2.8.7  Creating Geometry with&nbsp;the&nbsp;OpenStudio Floor Plan 
</p>
<p>Editor
</p>
<p>Having assigned weather files and a Construction Set to our Model, we are now 
</p>
<p>ready to define the building&rsquo;s geometry. Click on the Geometry ( ) Tab to open the 
</p>
<p>OpenStudio Application&rsquo;s Geometry editor and previewer. You will initially see an 
</p>
<p>empty window on the  Sub-Tab because the current Model does not yet contain 
</p>
<p>any geometry. Click on the  Sub-Tab to reveal OpenStudio&rsquo;s floor plan geome-
</p>
<p>try editor. The editor initially presents the user with some introductory text and the 
</p>
<p>option to create a new floor plan. Clicking the  Button opens the QuickStart 
</p>
<p>dialog shown in Fig.&nbsp;2.32. Select &ldquo;New&rdquo; to create a new floor plan on an empty grid 
</p>
<p>(Fig.&nbsp;2.33).
</p>
<p>Figure 2.33 points out key sections of the floor plan editor. These include:
</p>
<p>&bull; Drawing Editor Sub-Tabs used to:
</p>
<p>Draw the floor plan
</p>
<p>Assign Construction Sets, Space Types, Thermal Zones, etc. to regions of the 
</p>
<p>floor plan
</p>
<p>Assign windows, doors, etc. to Surfaces on the floor plan
</p>
<p>Fig. 2.32 Floor plan geometry Editor Quick Start Dialog
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>40
</p>
<p>&bull; Drawing Tools including:
</p>
<p>Rectangular drawing tool
</p>
<p>Polygon drawing tool
</p>
<p>Floor-to-floor copy tool
</p>
<p>Rectangular erase tool
</p>
<p>Background image import for floor plan tracing
</p>
<p>&bull; Grid Settings used to manage draw snapping behavior
</p>
<p>&bull; Story pane allowing addition and editing of stories to the Model
</p>
<p>&bull; Space pane primarily used to add, delete, and edit Spaces from the Model
</p>
<p>The choice menu near the top of this pane also enables editing of shading sur-
</p>
<p>faces and background images
</p>
<p>&bull; Model integration Buttons that convert the 2D floor plan drawing into OpenStudio 
</p>
<p>3D Model geometry
</p>
<p>For this simple Model, we will rely on the editor&rsquo;s &ldquo;grid snap&rdquo; feature, which is 
</p>
<p>active when the Grid check box is selected near the upper right-hand corner of the 
</p>
<p>window. Grid spacing is set immediately to right of the check box. For this example, 
</p>
<p>specify a 2&nbsp; m grid and use a mouse wheel or track pad to zoom in so that an 
</p>
<p>8&nbsp;m&nbsp;&times;&nbsp;6&nbsp;m rectangle will fit in the drawing area.
</p>
<p>Notice that the editor opened with a single Story and Space already created for us. 
</p>
<p>They are named &ldquo;Story 1&rdquo; and &ldquo;Space 1-1&rdquo; respectively. All that remains is to select 
</p>
<p>the  drawing tool to create an 8&nbsp;m&nbsp;&times;&nbsp;6&nbsp;m rectangle for &ldquo;Space 1-1&rdquo; as shown in 
</p>
<p>Fig.&nbsp;2.34. If you make a mistake, use the undo/redo ( ) Buttons near the upper 
</p>
<p>Fig. 2.33 Annotated floor plan editor with empty floor plan in the OpenStudio Application
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>41
</p>
<p>left-hand corner of the window. Drawing adjacent rectangles will add to the currently 
</p>
<p>selected Space, while the  tool can be used to remove rectangular regions.
</p>
<p>The height of our single Space is defined within the Story that contains it. Stories 
</p>
<p>may be added and modified at the Stories pane of the editor window. Click on the  
</p>
<p>Button to expand the Story editor as shown in Fig.&nbsp;2.35, and change the floor to 
</p>
<p>ceiling height from its default value to 2.7&nbsp;m.
</p>
<p>Near the top of the editor, click on the Assignments Sub-Tab. This Sub-Tab 
</p>
<p>allows us to assign Construction Sets, Thermal Zones, Space Types, and more to 
</p>
<p>sections of the Model. By default, the Assignment choice menu lists &ldquo;Thermal 
</p>
<p>Fig. 2.34 Drawing BESTEST Case 600&nbsp;in the OpenStudio Application
</p>
<p>Fig. 2.35 Editing floor height in the OpenStudio Application
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>42
</p>
<p>Zones&rdquo; on the left-hand side of the window. Our Model doesn&rsquo;t yet have any, so 
</p>
<p>press the  Button immediately to the right of the choice menu to create one, then 
</p>
<p>click on Space 1-1 to assign it to that Thermal Zone as shown in Fig.&nbsp;2.36.
</p>
<p>Finally, we must add the two windows shown in Fig.&nbsp;2.17 using the Components 
</p>
<p>Sub-Tab. In the Components Sub-Tab, the Spaces Pane changes, allowing us to 
</p>
<p>add Window definitions to the model (Fig.&nbsp;2.37). Click the  Button to add a new 
</p>
<p>definition, then expand it with the adjacent  Button.
</p>
<p>Define &ldquo;Window 1&rdquo; to have width of 3&nbsp;m, height of 2&nbsp;m, and sill height of 0.2&nbsp;m. 
</p>
<p>Mousing over the perimeter walls indicates locations where windows will fit. Place 
</p>
<p>windows on the South fa&ccedil;ade as shown in Fig.&nbsp;2.38.
</p>
<p>Fig. 2.36 Model with &ldquo;Space 1-1&rdquo; assigned to &ldquo;Thermal Zone 1&rdquo;
</p>
<p>Fig. 2.37 Adding a Window definition with the Geometry editor
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>43
</p>
<p>We are now done defining the geometry for our first Model. Press the  to 
</p>
<p>translate your 2D floor plan to a full 3D model usable by OpenStudio. Switching 
</p>
<p>back to the  Sub-Tab should look similar to Fig.&nbsp;2.39. If your Model doesn&rsquo;t 
</p>
<p>look quite right, switch back to the editor, make changes, and re-merge your work 
</p>
<p>until you are satisfied.
</p>
<p>In this view, the green axis is pointing North. Next to &ldquo;Render By&rdquo; choose 
</p>
<p>&ldquo;Boundary&rdquo;, this will color all of your surfaces by their boundary conditions. 
</p>
<p>Fig. 2.38 Placing a Window with the Geometry editor
</p>
<p>Fig. 2.39 Inspecting the BESTEST Case 600 Building in the OpenStudio Application
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>44
</p>
<p>Check all of the boundary conditions by clicking on each surface. Next, choose 
</p>
<p>Render By &ldquo;Construction&rdquo;. Verify that each of the surfaces have the appropriate 
</p>
<p>construction assigned.
</p>
<p>2.8.8  Running Your First Energy Simulation
</p>
<p>You are almost ready to run your first simulation. Before doing so, we want to 
</p>
<p>configure the simulation to write out some detailed time series data to examine. 
</p>
<p>Select the Variables ( ) Tab to specify a number of detailed results that we can 
</p>
<p>request from our simulation. Toggle the request Button to &ldquo;On&rdquo; next to &ldquo;Surface 
</p>
<p>Inside Face Temperature,&rdquo; &ldquo;Surface Outside Face Temperature,&rdquo; &ldquo;Zone Air 
</p>
<p>Temperature,&rdquo; and &ldquo;Zone Outdoor Air Drybulb Temperature.&rdquo; Also change the log-
</p>
<p>ging rate for each variable from Hourly to Timestep to capture data more fre-
</p>
<p>quently as shown in Fig.&nbsp;2.40.
</p>
<p>We are now ready to run the simulation. Go to the Run ( ) Tab and press the  
</p>
<p>Button (Fig.&nbsp;2.41). You will see simulation output until the EnergyPlus simulation 
</p>
<p>completes.
</p>
<p>Once the simulation is complete, select the Reports ( ) Tab to view simulation 
</p>
<p>results. By default, two reports are available from the selector in the upper left-hand 
</p>
<p>corner of the window: OpenStudio Results and EnergyPlus Results. The standard 
</p>
<p>OpenStudio Results report is shown in Fig.&nbsp;2.42.
</p>
<p>Related to this Chapter&rsquo;s focus on building envelope, clicking on that report 
</p>
<p>heading takes us directly to a summary of high level information about the build-
</p>
<p>ing&rsquo;s shell as shown in Fig.&nbsp; 2.43. This can be a useful check to ensure that 
</p>
<p>Constructions were applied as expected.
</p>
<p>Fig. 2.40 The OpenStudio Application Output Variables Tab
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>45
</p>
<p>Figure 2.44 highlights another part of the summary report, presenting our build-
</p>
<p>ing&rsquo;s Zone temperature and humidity for the entire year that we simulated. Since the 
</p>
<p>air in our small building was unconditioned and subject to the ambient conditions 
</p>
<p>described by our weather file, a great many hours spent throughout the year in our 
</p>
<p>tiny building would be considered uncomfortable. This is why we use mechanical 
</p>
<p>systems to condition spaces in our buildings and will be the subject of Chap. 4.
</p>
<p>Fig. 2.42 The OpenStudio Standard Report within the Results Summary Tab
</p>
<p>Fig. 2.41 The OpenStudio Application Simulation Run Tab
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>46
</p>
<p>Changing the report selector near the top of the window switches to an alterna-
</p>
<p>tive report. This summary (Fig.&nbsp;2.45) is produced by the EnergyPlus engine itself 
</p>
<p>and can be a useful supplement to the higher-level information presented in the 
</p>
<p>OpenStudio report.
</p>
<p>Since this represents our first complete simulation, it&rsquo;s worth revisiting the Model 
</p>
<p>directory structure we discussed back in Sect. 2.8.1. Recall that the Application 
</p>
<p>saves the OSM along with a directory structure that it populates throughout the 
</p>
<p>Fig. 2.43 The OpenStudio Standard Report with Envelope Summary
</p>
<p>Fig. 2.44 The OpenStudio Standard Report with Zone Condition Summary
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>47
</p>
<p>Fig. 2.46 Model directory after simulation
</p>
<p>Fig. 2.45 The EnergyPlus Report Viewed within the Results Summary Tab
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>48
</p>
<p>modeling and simulation process. We first noted that our weather EPW file was 
</p>
<p>neatly tucked away in the &ldquo;files&rdquo; subdirectory but take a look in Fig.&nbsp;2.46 at what 
</p>
<p>OpenStudio produced when the simulation ran.
</p>
<p>We will discuss a few of these files in subsequent Chapters, but let&rsquo;s take a 
</p>
<p>moment to point out some of the more significant subdirectories and files. We have 
</p>
<p>already seen the contents of the &ldquo;reports&rdquo; subdirectory in the Application itself. 
</p>
<p>Both the EnergyPlus and OpenStudio reports are located here as simple HyperText 
</p>
<p>Markup Language (HTML) documents viewable in any web browser.
</p>
<p>Within the run directory are a number of files generated by OpenStudio and 
</p>
<p>EnergyPlus itself. Key files of note include:
</p>
<p>in.osm&nbsp;&ndash; The final6 OpenStudio Model prior to calling EnergyPlus
</p>
<p>in.idf&nbsp;&ndash; The EnergyPlus input file created by OpenStudio for simulation
</p>
<p>eplusout.err&nbsp;&ndash; A file containing simulation warnings and error messages used for 
</p>
<p>troubleshooting
</p>
<p>eplusout.sql&nbsp;&ndash; A time series database of simulation results used by plotting soft-
</p>
<p>ware like DView
</p>
<p>2.8.9  Studying Time Series Results
</p>
<p>The eplusout.sql file is a natural segue into the final topic for our first checkpoint 
</p>
<p>exercise&nbsp; - investigating time series results from building energy simulations. 
</p>
<p>EnergyPlus is able to generate very large sets of time series data based on standard 
</p>
<p>reporting variables along with additional variables we may have specified using the 
</p>
<p>OpenStudio Application. These data sets are stored in a SQLite database format 
</p>
<p>(SQL) instead of comma space delimited text files to save disk space and make 
</p>
<p>subsequent access of the data more efficient. The DView application has been 
</p>
<p>designed expressly to study time series data and is able to utilize the eplusout.sql 
</p>
<p>file generate by EnergyPlus. This file may be opened manually within DView or 
</p>
<p>using the convenient Button in the upper right-hand corner of the Application&rsquo;s 
</p>
<p>Reports ( ) Tab (Fig.&nbsp;2.45).
</p>
<p>DView provides a number of ways to inspect and explore our simulation results. 
</p>
<p>Figure&nbsp;2.47 compares the outdoor drybulb and Zone temperatures for our Model at 
</p>
<p>the finest time resolution available. A number of qualitative observations immedi-
</p>
<p>ately spring forth:
</p>
<p> 1. Interior space temperatures lag ambient temperature trends by approximately an 
</p>
<p>hour;
</p>
<p> 2. Interior temperature profiles are &ldquo;smoother,&rdquo; having been effectively dampened 
</p>
<p>by the inherent thermal capacitance of the structure;
</p>
<p>6 Final model? I thought I was working on the final model in the OpenStudio Application! The 
</p>
<p>distinction between models you edit in the OpenStudio Application and the &ldquo;final&rdquo; model that is 
</p>
<p>actually simulated will become clearer in Chap. 6.
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>49
</p>
<p> 3. Interior temperatures are elevated above ambient by radiant energy admitted 
</p>
<p>through the South-facing fenestration;
</p>
<p> 4. And, lastly, this building would be an incredibly unpleasant structure to live or 
</p>
<p>work in!
</p>
<p>DView provides other ways to explore simulation results&nbsp;&ndash; for example examin-
</p>
<p>ing exterior or interior surface temperatures. As an example, consider the tempera-
</p>
<p>tures of the South-facing fa&ccedil;ade of our building. Using the Geometry ( ) Tab 
</p>
<p>previewer, we can inspect the South fa&ccedil;ade and note that OpenStudio has automati-
</p>
<p>cally assigned it the name &ldquo;Face 2&rdquo; (Fig.&nbsp;2.48).
</p>
<p>Once identified, variables associated with that surface&rsquo;s name can be selected in 
</p>
<p>DView to plot surface temperatures in a variety of useful ways. Figure&nbsp;2.49 dis-
</p>
<p>plays the exterior surface temperature of the South fa&ccedil;ade as a &ldquo;heatmap,&rdquo; a col-
</p>
<p>ored chart that allows the user to quickly identify thermal extremes by month of the 
</p>
<p>year and time of day.
</p>
<p>Figure 2.49 displays monthly &ldquo;profiles&rdquo; for the exterior and interior surface 
</p>
<p>temperatures of the South Fa&ccedil;ade by averaging daily temperatures for each day 
</p>
<p>of every month. Both visualizations can be useful in spotting performance 
</p>
<p>trends, aberrant behavior in simulations, etc. We will make greater use of 
</p>
<p>DView in Chaps. 3, 4, and 5 to examine Space, Zone, and HVAC system behav-
</p>
<p>ior in detail.
</p>
<p>Fig. 2.47 Comparison of Outdoor and Zone temperatures in DView
</p>
<p>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</p>
<p/>
</div>
<div class="page"><p/>
<p>50
</p>
<p>2.9  Checkpoint Two: Energy Model of&nbsp;a&nbsp;School
</p>
<p>Now we are ready to begin work on our real capstone Model that we will improve 
</p>
<p>upon throughout this book. We will be attempting to create a simple primary school 
</p>
<p>Model using pre-built Library data to speed up the process. A floor plan for this 
</p>
<p>building is shown in Fig.&nbsp;2.51. Use the following steps to get started:
</p>
<p> 1. Create a new OpenStudio Model.
</p>
<p> 2. Under the Preferences Menu make sure that the default units are set to English 
</p>
<p>(I-P).
</p>
<p> 3. Navigate to the Site ( ) Tab and:
</p>
<p>Fig. 2.48 Identifying the 
</p>
<p>Surface name for the South 
</p>
<p>Facing Fa&ccedil;ade
</p>
<p>Fig. 2.49 South exterior wall surface temperature plotted in DView as a Heatmap
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>51
</p>
<p> (a) Select the USA_CO_Golden_NREL.72466_TMY3.epw weather file.
</p>
<p> (b) Specify ASHRAE Climate Zone 5B from the Optional Measure Tags menu.7
</p>
<p> 4. Pick &ldquo;Load Library&rdquo; from the File menu and import PrimarySchool.osm to load 
</p>
<p>the Model library with Construction Sets and other appropriate data.
</p>
<p> 5. Navigate to the Constructions ( ) Tab, select the Construction Set named 
</p>
<p>90.1&ndash;2010-CZ5&ndash;6-PriSchl, and drag it into your Model as shown in Fig.&nbsp;2.50.
</p>
<p> 6. Navigate to the Buildings ( ) Tab, select the Construction Set you just added, 
</p>
<p>and drag it to become the Default Building Construction Set.
</p>
<p> 7. Save your Model.
</p>
<p>Now we&rsquo;re ready to define our Envelope and Spaces using the Geometry ( ) Tab. 
</p>
<p>Create a new floor plan with the editor. Once again, decline to place this Model on 
</p>
<p>a map. Select an appropriate grid spacing that will allow you to comfortably draw 
</p>
<p>the floor plan shown in Fig.&nbsp;2.51. Add additional Spaces with the  Button and use 
</p>
<p>the  Tool to add them to the floor plan. The drawing cursor will turn into a larger 
</p>
<p>red dot when you are on top of an adjacent vertex, which can help avoid leaving 
</p>
<p>gaps between Spaces.
</p>
<p>Expand the Space pane with the  Button to change Space names and colors to 
</p>
<p>your liking. Your finished floor plan should look like the one shown in Fig.&nbsp;2.52.
</p>
<p>To complete this stage of your primary school Model:
</p>
<p>7 Will discuss the significance of this in a later chapter, but for now know that this choice helps 
</p>
<p>OpenStudio select ID=&rdquo;ITerm194&rdquo;Constructions and HVACID=&rdquo;ITerm195&rdquo; systems that are appropriate for Climate Zone 5B 
</p>
<p>where our school is located.
</p>
<p>Fig. 2.50 Monthly temperature profiles for Exterior and Interior Surfaces on South Fa&ccedil;ade
</p>
<p>2.9 Checkpoint Two: Energy Model of&nbsp;a&nbsp;School</p>
<p/>
</div>
<div class="page"><p/>
<p>52
</p>
<p>Fig. 2.51 Empty Model Loaded with ASHRAE 90.1-2010 Construction Set for a primary school
</p>
<p>Fig. 2.52 Primary school floor plan
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>53
</p>
<p>Fig. 2.53 Primary school floor plan drawn with the Geometry editor
</p>
<p>Fig. 2.54 Boundary condition view of primary school Model
</p>
<p>2.9 Checkpoint Two: Energy Model of&nbsp;a&nbsp;School</p>
<p/>
</div>
<div class="page"><p/>
<p>54
</p>
<p> 1. Expand the Story pane with the  Button to specify a floor to ceiling height of 
</p>
<p>13&nbsp;feet.
</p>
<p> 2. Use the Components Sub-Tab to define and add windows to your model.
</p>
<p> (a) Select a &ldquo;Window to Wall Ratio&rdquo; type window to create a band of windows 
</p>
<p>on each surface.
</p>
<p> (b) A Window to Wall Ratio of 0.3 will produce a window roughly 4&nbsp;feet tall 
</p>
<p>(0.3&nbsp;&times;&nbsp;13&nbsp;feet)
</p>
<p> (c) Select a sill height of 3&nbsp;feet.
</p>
<p> (d) Add a window to each Space Surface around the perimeter of your Model as 
</p>
<p>shown in Fig.&nbsp;2.53.
</p>
<p> 3. Use the Assignments Sub-Tab to create Thermal Zones for each Space in the 
</p>
<p>model. Change their names and colors to your liking.
</p>
<p>Fig. 2.55 Boundary condition preview of primary school Model in editor
</p>
<p>Fig. 2.56 Construction View of primary school Model
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>55
</p>
<p>Fig. 2.57 Unconditioned primary school envelope summary report
</p>
<p>Fig. 2.58 Unconditioned primary school zone overview
</p>
<p>Fig. 2.59 Unconditioned primary school zone conditions
</p>
<p>2.9 Checkpoint Two: Energy Model of a School</p>
<p/>
</div>
<div class="page"><p/>
<p>56
</p>
<p> 4. Use the  Button to visually inspect your Model for defects using multiple 
</p>
<p>render modes. The boundary condition view should look like Fig.&nbsp;2.54.
</p>
<p> 5. When you are satisfied, press the  Button to integrate the floor plan with the 
</p>
<p>rest of your Model. You can verify that your Model merged correctly by using 
</p>
<p>the  Sub-Tab as shown in Fig.&nbsp;2.55.
</p>
<p> 6. Save your Model and create a backup in case you wish to return to this step.
</p>
<p>At this point, you should be able to run a simulation of the unconditioned envelope. 
</p>
<p>Review the standard reports (Figs.&nbsp;2.56, 2.57, and 2.58) to see if they make sense 
</p>
<p>given what you have learned so far.
</p>
<p>Consider the time series plots shown in Fig.&nbsp;2.59 that compare the outdoor tem-
</p>
<p>perature (dark green) with the Lobby (red) and Mechanical Room (blue) Zone tem-
</p>
<p>peratures. The Lobby temperature fluctuates significantly more than the Mechanical 
</p>
<p>Room. Does this make sense? Why? (Fig.&nbsp;2.60).
</p>
<p>Remember that our primary school does not yet include any definition of activities 
</p>
<p>that happen within each Space. That is the topic for our next Chapter.
</p>
<p>2.10  Additional Exercises
</p>
<p>Creating additional exercises related to building envelope is as simple as using the 
</p>
<p>floor plan editor to create a new Model. One editor feature that we didn&rsquo;t mention in 
</p>
<p>the previous exercises is the ability to import images for tracing to create floor plans 
</p>
<p>of existing buildings. Image imports are most effectively used when creating a new 
</p>
<p>Fig. 2.60 DView time series plots of Outdoor, Lobby, and Mechanical room temperatures
</p>
<p>2 Building Envelope Specification</p>
<p/>
</div>
<div class="page"><p/>
<p>57
</p>
<p>floor plan and selecting &ldquo;New with Map&rdquo; from the floor plan quick start dialog 
</p>
<p>shown in Fig.&nbsp;2.32. The interface allows the user to search for a specific address, 
</p>
<p>pan, zoom, and rotate to establish a region for drawing the foot print of a proposed 
</p>
<p>or existing building (Fig.&nbsp;2.61). The  Button is then used to select an image that 
</p>
<p>can be scaled, rotated, and placed on top of the map for tracing spaces. Figure&nbsp;2.62 
</p>
<p>Fig. 2.61 Geolocating a new Model with the floor plan editor
</p>
<p>Fig. 2.62 Tracing over an image with the floor plan editor
</p>
<p>2.10 Additional Exercises</p>
<p/>
</div>
<div class="page"><p/>
<p>58
</p>
<p>shows a snap shot of a fire escape drawing that was used to create the first floor of 
</p>
<p>the Model shown in Figs.&nbsp;2.3 and 2.4. Multiple images may be imported and associ-
</p>
<p>ated with various floors of the Model.
</p>
<p>As an exercise:
</p>
<p>&bull; Take a photo of a fire escape drawing of the building you study or work in,
</p>
<p>&bull; Create a new OpenStudio model with an appropriate weather file,
</p>
<p>&bull; Enter the building&rsquo;s address in the floor plan editor to geolocate it,
</p>
<p>&bull; Import your fire escape photo(s)&nbsp;- scaling and rotating as needed to register it on 
</p>
<p>the map,
</p>
<p>&bull; Trace Spaces on your Model using the imported image(s),
</p>
<p>&bull; Import an appropriate Library of Constructions from a similar Model (e.g. 
</p>
<p>School, Office, etc.),
</p>
<p>&bull; Assign Thermal Zones to your Spaces so you can simulate the unconditioned 
</p>
<p>response, and
</p>
<p>&bull; Save your Model for use in subsequent Chapters.
</p>
<p>Compare your Model with the previous exercises, when run with different 
</p>
<p>weather files. Do your results make sense?
</p>
<p>References
</p>
<p>Wilcox S, Marion W (2008) User&rsquo;s Manual for TMY3 Data Sets, NREL/TP-581-43156, National 
</p>
<p>Renewable Energy Laboratory, Apr 2008
</p>
<p>ANSI/ASHRAE Standard 169-2013, Climatic data for building design standards, 2013
</p>
<p>http://bcl.nrel.gov
</p>
<p>https://energyplus.net/documentation
</p>
<p>https://energyplus.net/weather
</p>
<p>https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html
</p>
<p>2 Building Envelope Specification</p>
<p/>
<div class="annotation"><a href="http://bcl.nrel.gov">http://bcl.nrel.gov</a></div>
<div class="annotation"><a href="https://energyplus.net/documentation">https://energyplus.net/documentation</a></div>
<div class="annotation"><a href="https://energyplus.net/weather">https://energyplus.net/weather</a></div>
<div class="annotation"><a href="https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html">https://yeungus.com/ashrae-standards-analysis-free-related-pdf.html</a></div>
</div>
<div class="page"><p/>
<p>59&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_3
</p>
<p>Chapter 3
</p>
<p>Defining Energy Uses and&nbsp;Spaces
</p>
<p>3.1  Energy Uses and&nbsp;Thermal Loads
</p>
<p>In Chap. 2 we defined the building envelope, the ambient weather conditions it is 
</p>
<p>exposed to, and the interior Spaces that a building is subdivided into. Of course, the 
</p>
<p>activities that take place in those Spaces are significant drivers for energy consump-
</p>
<p>tion as well as the reason buildings exist in the first place. In this Chapter, we will 
</p>
<p>gain a better understanding of how Space occupancy and energy end uses are 
</p>
<p>defined by OpenStudio. As with Constructions, the amount of data required to fully 
</p>
<p>specify Space loads is significant, and we will come to appreciate how OpenStudio 
</p>
<p>Libraries and data inheritance make this process both fast and consistent.
</p>
<p>Building end uses may consume energy directly as is the case with lighting, elec-
</p>
<p>tric, and gas Equipment; however, these end uses may also add heat to the Spaces in 
</p>
<p>which they are contained. This heat may impact the heating or cooling energy, which 
</p>
<p>must be provided by the building&rsquo;s HVAC systems. Modeling these types of interac-
</p>
<p>tions is an important feature of whole building energy simulation. Another signifi-
</p>
<p>cant source of thermal loading within Spaces are the occupants themselves; people 
</p>
<p>contribute both sensible and latent heat through physical activity, perspiration, and 
</p>
<p>respiration. Infiltration, unconditioned air that leaks into Space, is also considered a 
</p>
<p>load that will be discussed in this Chapter. Lastly, while they don&rsquo;t generate heat or 
</p>
<p>consume energy explicitly, we will also consider the role that the thermal mass of 
</p>
<p>inanimate objects within Spaces plays in storing and releasing thermal energy.
</p>
<p>It is important to note that Space loads are a strong function of occupant 
</p>
<p>behavior. As such, this step in building energy modeling is arguably the most 
</p>
<p>subjective and error prone part of the process. Whereas the thermal properties of 
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_3) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_3&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_3&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>60
</p>
<p>an insulation material may be well known and accurately modeled, how can one 
</p>
<p>model the actions of building occupant with certainty? Does an occupant show up 
</p>
<p>within a Space for the same period of time each day, and how many are there? 
</p>
<p>Can we predict the level of physical activity an occupant undertakes? How will 
</p>
<p>the occupant operate lights and other equipment? These are only a few factors 
</p>
<p>that drive uncertainty in an analytical process that requires unambiguous numeri-
</p>
<p>cal input of occupant behavior for 8760&nbsp;h of each simulated year.
</p>
<p>Before you give up and throw this book in the rubbish bin, consider a few key 
</p>
<p>points:
</p>
<p> 1. As mentioned in Chap. 1, comparative analysis is one of the most important 
</p>
<p>capabilities offered by building energy modeling. As long as occupant behavior 
</p>
<p>is held constant across simulations, uncertainty in occupant behavior will lead to 
</p>
<p>systematic error, which in general, does not invalidate comparisons between 
</p>
<p>multiple energy simulations. The energy impact of changes in occupant behavior 
</p>
<p>can also be modelled as long as the assumptions behind changing the simulation 
</p>
<p>input are well understood.
</p>
<p> 2. Guidelines like ASHRAE Standard 90.1, ASHRAE Standard 189.1, and 
</p>
<p>California&rsquo;s Title 24 compliance modeling approach are prescriptive about many 
</p>
<p>inputs for energy modeling including Space load assumptions. These guidelines 
</p>
<p>have been informed by surveys like RECS (Residential Energy Consumption 
</p>
<p>Survey), CBECS (Commercial Building Energy Consumption Survey), and 
</p>
<p>CEUS (California End Use Survey) that provide some insight into how different 
</p>
<p>building types are most frequently used. Use of prescriptive input sets is cer-
</p>
<p>tainly no guarantee that modeled and as-operated energy performance will agree 
</p>
<p>for a specific building, but it does improve consistency in the modeling process.
</p>
<p> 3. Unlike the previous generation of BEM tools, parametric analysis of multiple 
</p>
<p>OpenStudio simulations (discussed in Chap. 7) enables us to perform Monte Carlo 
</p>
<p>sampling over uncertain inputs. Adopting statistical methods allows the analyst to 
</p>
<p>evaluate distributions of expected performance, which frankly is a more responsi-
</p>
<p>ble approach than reporting a single, expected savings number to a stakeholder.
</p>
<p> 4. For existing buildings, calibration (tuning) of building models against measured 
</p>
<p>consumption data is a recommended option to reduce uncertainty in key inputs. 
</p>
<p>OpenStudio makes the calibration process for existing buildings relatively easy.
</p>
<p>This Chapter focuses on modeling with standardized inputs (item 2 above) in 
</p>
<p>order to create more consistent modeling outcomes. The approaches suggested in 
</p>
<p>bullet points 3 and 4 will be key topics that we shall revisit in Chap. 7.
</p>
<p>3.2  Space Types
</p>
<p>Just as Construction Sets are comprised of Constructions, which are in turn com-
</p>
<p>prised of Materials, OpenStudio defines Space Types in terms of smaller building 
</p>
<p>blocks that may be assembled flexibly to describe a variety of programmatic activi-
</p>
<p>ties. In general, OpenStudio Space Types are defined by a set of thermal loads and 
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>61
</p>
<p>schedules. In aggregate, these loads consume energy and add heat to a Space as a 
</p>
<p>function of time as shown in Fig.&nbsp;3.1.
</p>
<p>Space Types make it easy to define representative loads and schedules once, in 
</p>
<p>order to apply them quickly and consistently across Spaces with similar activities. 
</p>
<p>A Space Type may apply to a single Space within a building, or it may be applied to 
</p>
<p>multiple Spaces if similar activities take place within them. As with Construction 
</p>
<p>Sets, Space Types may also be imported from other OSMs to speed up the modeling 
</p>
<p>process even further.
</p>
<p>3.2.1  Schedules
</p>
<p>As we have established, individual loads within Spaces are most often a strong 
</p>
<p>function of occupancy, which usually varies with the time of day and day of the 
</p>
<p>week. In terms of modeling approach, this means that we will need to capture occu-
</p>
<p>pant, lighting, and equipment schedules if we are to reasonably describe energy uses 
</p>
<p>and their associated thermal loads. The Schedules ( ) Tab in the OpenStudio 
</p>
<p>Application shown in Fig.&nbsp;3.2 is used for this purpose. New Schedule Sets may be 
</p>
<p>created with the  Button, the  Button is used to duplicate Sets for editing, and the 
</p>
<p> Button deletes Sets. The  Button &ldquo;purges&rdquo; unused Schedule Sets from your 
</p>
<p>Model and is useful for tidying up occasionally.
</p>
<p>The Schedules ( ) Tab consists of two Sub-Tabs. The  Sub-Tab is used to 
</p>
<p>define collections of Schedules that apply generally to a Space Type. The illustrated 
</p>
<p>example contains Schedule Sets for office break and conference rooms, lobby and 
</p>
<p>open office space. Each Schedule Set may include any or all of the ten categories 
</p>
<p>shown. Individual schedules within a Set may be distinct or duplicative. For exam-
</p>
<p>ple, Occupancy, Lighting, and Electric Equipment Schedules might be the same in 
</p>
<p>an office with staff who diligently turn off lights and equipment whenever they leave 
</p>
<p>a Space. However, different schedules might be used to indicate that occupants 
</p>
<p>leave some lights and equipment on when they leave for lunch.
</p>
<p>Fig. 3.1 OpenStudio Space Type conceptually applied to a Space
</p>
<p>3.2 Space Types</p>
<p/>
</div>
<div class="page"><p/>
<p>62
</p>
<p>The right-hand pane lists the six types of Schedules that OpenStudio supports. 
</p>
<p>Compact, Constant and Year Schedules are identical to the EnergyPlus objects doc-
</p>
<p>umented online.1 Fixed and Variable Interval Schedules are used to capture sched-
</p>
<p>ules from actual recorded data, these are similar to the Schedule:File Object in 
</p>
<p>EnergyPlus but the data is contained in the OSM rather than an external Comma 
</p>
<p>Separated Value (CSV) file. The final OpenStudio Schedule is the Ruleset Schedule. 
</p>
<p>This Object is unique to OpenStudio and is automatically converted into a Year 
</p>
<p>Schedule for use by EnergyPlus prior to simulation.
</p>
<p>Ruleset Schedules are created and edited in the  Sub-Tab as shown in Figs.&nbsp;3.3 
</p>
<p>and 3.4. These particular schedules are &ldquo;fractional,&rdquo; meaning they vary from 0 to 1 
</p>
<p>and are used as multipliers on the maximum expected occupancy in a Space to create 
</p>
<p>a time varying number of people. Similar Schedules are used to modulate the total 
</p>
<p>power consumed by lighting, electric Equipment, etc. The Schedule Editor enables 
</p>
<p>visual editing of a variety of schedules and will be discussed in Sect. 3.4.
</p>
<p>3.2.2  Load Definitions
</p>
<p>Space Load definitions are entered using the Loads ( ) Tab, and fall into a number of 
</p>
<p>categories including lighting, miscellaneous electric,2 gas, steam, and other fuel 
</p>
<p>Equipment, people, and hot water uses. Space load definitions describe a particular 
</p>
<p>type of load. We will use Space load instances in Sects. 3.2.3 and 3.3 to actually 
</p>
<p>assign loads of these types to Space Types and Spaces. Lighting loads may include 
</p>
<p>1 http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.
</p>
<p>html#group-schedules.
2 Pieces of Miscellaneous Electric Equipment are sometimes referred to as &ldquo;MELs&rdquo; or Plug Loads.
</p>
<p>Fig. 3.2 Schedule Set for an Office Break Room
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules</a></div>
</div>
<div class="page"><p/>
<p>63
</p>
<p>individual table or desk lamps, arrays of linear fluorescent tubes, emergency exit 
</p>
<p>lights, high intensity discharge (HID) lamps in high bay installations, and many 
</p>
<p>more. Copy machines, coffee pots, microwave ovens, simple refrigerators, laptops, 
</p>
<p>televisions, video game consoles, hair dryers, etc. are all examples of electric plug 
</p>
<p>loads. Common gas loads include ovens or cook tops. In OpenStudio, occupants, 
</p>
<p>infiltration, and internal mass objects are grouped along with these loads but are spe-
</p>
<p>cial cases and will be discussed in subsequent sections. Like most of the Application 
</p>
<p>Tabs, use the  ,  ,  , and  Buttons to create, duplicate, delete, and purge Loads.
</p>
<p>Depending upon use, available data, etc. the power consumed by most loads is 
</p>
<p>typically entered in OpenStudio in one of three ways:
</p>
<p>&bull; Rated power consumed by an individual unit (e.g. single laptop or television) 
</p>
<p>within a Space,
</p>
<p>&bull; Rated power consumed per unit of floor area in a Space, or
</p>
<p>&bull; Rated power consumed per occupant within a Space.
</p>
<p>Fig. 3.3 An office Ruleset Schedule defined for workdays
</p>
<p>Fig. 3.4 An office Ruleset Schedule defined for Saturdays, and Sundays
</p>
<p>3.2 Space Types</p>
<p/>
</div>
<div class="page"><p/>
<p>64
</p>
<p>3.2.2.1  Lights and&nbsp;Luminaires
</p>
<p>EnergyPlus does not simulate the distribution of electric lights, nor can it be used to 
</p>
<p>verify that a given lighting design provides sufficient illumination. During an 
</p>
<p>EnergyPlus simulation, the electric energy used by lights and luminaires is accounted 
</p>
<p>for as well as the thermal impact of this energy use on the surrounding Space. 
</p>
<p>EnergyPlus does account for the use of daylighting controls to offset energy used by 
</p>
<p>electric lighting, which will be discussed in Chap. 8. Figure&nbsp;3.5 shows a typical 
</p>
<p>lighting load entered in units of watts per square foot. This is frequently referred to 
</p>
<p>as Lighting Power Density (LPD) and is a common way of characterizing loads 
</p>
<p>such as linear fluorescent lighting that covers a large area; especially when detailed 
</p>
<p>information about the lighting design is not available.
</p>
<p>By comparison, individual desk lamps might be best represented in terms of watts 
</p>
<p>per person. If a detailed audit has determined the exact number of lighting fixtures of 
</p>
<p>a particular type, then lighting may be specified in terms of the rated power consumed 
</p>
<p>by an individual unit. In all cases, a multiplier is applied to the space load instance to 
</p>
<p>describe the number of units present in the Space Type or Space. Regardless of how 
</p>
<p>the load is characterized, individual loads are subsequently multiplied by an associated 
</p>
<p>Fig. 3.5 Lighting Power Density defined for an Open Office Space Type
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>65
</p>
<p>fractional schedule as described in the previous section. This enables us to simulate the 
</p>
<p>time varying nature of power consumption with the added flexibility of separating the 
</p>
<p>magnitude of loads from how frequently they are used. For lighting, all energy used by 
</p>
<p>the fixture is rejected to the environment (there is no useful mechanical work done and 
</p>
<p>very little energy storage). The mechanisms for heat transfer from Lights and 
</p>
<p>Luminaires are:
</p>
<p>&bull; Fraction Radiant&nbsp;&ndash; portion of energy radiated to the Space&rsquo;s Surfaces as long- 
</p>
<p>wave radiation,
</p>
<p>&bull; Fraction Visible&nbsp;&ndash; portion of energy radiated to the Space&rsquo;s Surfaces as short- 
</p>
<p>wave radiation,
</p>
<p>&bull; Return Air Fraction&nbsp;&ndash; portion of energy rejected to air leaving the space to an 
</p>
<p>air handler, and
</p>
<p>&bull; Fraction Convected&nbsp;&ndash; portion of energy rejected to the Space&rsquo;s air volume.
</p>
<p>The fraction convected is not entered directly, rather it is calculated from:
</p>
<p> 
f f f f
convected radiant visible return air
</p>
<p>= - - -1
 
</p>
<p>The EnergyPlus Input Output Reference has typical values for these fractional 
</p>
<p>energy factors for different lighting categories under the section for Lights.
</p>
<p>Luminaires do not exist as EnergyPlus Objects, and they are a unique to 
</p>
<p>OpenStudio&rsquo;s Object Model. Luminaires are meant to represent individual lighting 
</p>
<p>fixtures and are specified in terms of lighting power per unit. Luminaires also have 
</p>
<p>the ability to be positioned within a Space. This is meant to support simulation of 
</p>
<p>the distribution of electric lighting via Radiance in future versions of OpenStudio.
</p>
<p>Like Materials, Constructions, and Construction Sets; Light and Luminaire defi-
</p>
<p>nitions may also be imported to the current Model from an external Library. Load 
</p>
<p>definitions obtained via Library import contain pre-populated power and heat rejec-
</p>
<p>tion values, however the modeler should always consider the appropriateness of 
</p>
<p>these values for the specific application. The reader is referred to sources such as the 
</p>
<p>ASHRAE Fundamentals Handbook3 or The Lighting Handbook published by the 
</p>
<p>Illuminating Engineering Society (IES), as well as manufacturer data sheets for 
</p>
<p>input values DiLaura et al. (2011).
</p>
<p>3.2.2.2  Electric, Gas, Steam, and&nbsp;Other Equipment Loads
</p>
<p>Similar to lighting, EnergyPlus does not represent individual electric, gas, steam, or 
</p>
<p>other Equipment within Spaces. Most people would be concerned if their favorite 
</p>
<p>video game console was replaced by a toaster. However, to EnergyPlus, these are 
</p>
<p>simply devices that consume electricity and reject heat into the Space. The only way 
</p>
<p>that EnergyPlus differentiates between a blender and an electric kettle is by the 
</p>
<p>maximum power draw, schedule of operation, and the mechanisms of heat transfer 
</p>
<p>3 ASHRAE (2013).
</p>
<p>3.2 Space Types</p>
<p/>
</div>
<div class="page"><p/>
<p>66
</p>
<p>into the Space. Like Lights, Equipment may be quantified by power per unit, floor 
</p>
<p>area, or person (Fig.&nbsp;3.6). However, unlike Lights, Equipment may consume differ-
</p>
<p>ent types of fuel (e.g. electricity, gas, steam, or other). Each fuel type is accounted 
</p>
<p>for separately in the simulation results.
</p>
<p>Note that EnergyPlus allows for a Hot Water Equipment Object. This Object is 
</p>
<p>included in the OpenStudio SDK but has been deprecated from the OpenStudio 
</p>
<p>Application in preference to the more flexible Water Use Equipment Object dis-
</p>
<p>cussed later. Gas Equipment allows the user to specify a carbon dioxide generation 
</p>
<p>rate for air contaminant studies, this is an advanced topic beyond the scope of this 
</p>
<p>text. Other Equipment allows the user to select from less common fuel types&nbsp;&ndash; e.g. 
</p>
<p>propane, fuel oil, etc. The mechanisms of heat transfer allowed for Equipment 
</p>
<p>objects are:
</p>
<p>&bull; Fraction Latent&nbsp; &ndash; portion of energy added to the Space&rsquo;s air volume as 
</p>
<p>moisture;
</p>
<p>&bull; Fraction Radiant&nbsp;&ndash; portion of energy radiated to the Space&rsquo;s Surfaces as long- 
</p>
<p>wave radiation;
</p>
<p>&bull; Fraction Lost&nbsp;&ndash; portion of energy that does not impact the Space&rsquo;s heat balance, 
</p>
<p>by performing useful mechanical work or via rejection outside of the Space; and
</p>
<p>&bull; Fraction Convected&nbsp;&ndash; portion of energy rejected to the Space&rsquo;s air volume.
</p>
<p>Fraction Convected is not entered directly and is calculated according to:
</p>
<p> 
f f f f
convected latent radiant lost
</p>
<p>= - - -1
 
</p>
<p>3.2.2.3  People
</p>
<p>People represent very significant thermal loads in Spaces but are treated a bit differ-
</p>
<p>ently than lights or Equipment. Like other Loads, occupancy may be characterized 
</p>
<p>by the number of people present within a Space, or in terms of occupant density as 
</p>
<p>Fig. 3.6 Example of an Electric Equipment Load
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>67
</p>
<p>shown in Fig.&nbsp;3.7. People are also described by a fraction of radiant energy they 
</p>
<p>contribute to a space. The remainder of the heat they reject is split between sensible 
</p>
<p>and latent heat addition. EnergyPlus is able to automatically calculate the split 
</p>
<p>between sensible and latent heat gain from occupants based on typical metabolic 
</p>
<p>rates given the level of heat rejection. Astute readers may note that there is no field 
</p>
<p>to enter the &ldquo;rated&rdquo; power of a human in this window, so how does EnergyPlus 
</p>
<p>know how much heat each person is rejecting to use along with the fractional occu-
</p>
<p>pancy Schedules?
</p>
<p>Human power consumption is represented by an additional activity Schedule to 
</p>
<p>better reflect the time varying nature of human activity. Figure&nbsp;3.8 illustrates a typi-
</p>
<p>cal activity Schedule for a medium office in the Schedules ( ) Tab. In practice, 
</p>
<p>activity Schedules are often entered as constant values, as shown in this example, to 
</p>
<p>reflect that the type of activity in the space is constant while the number of occu-
</p>
<p>pants vary according to the occupancy schedule. However, the software allows for 
</p>
<p>the Modeler to capture a half-hour of calisthenics or naptime, depending upon the 
</p>
<p>culture prevalent in a building, independent of the occupancy schedule. Table&nbsp;3.1 
</p>
<p>contains typical power consumption estimates for a range of adult activity.
</p>
<p>Additional activity values may be found in the Energy Plus Input Output guide.4
</p>
<p>3.2.2.4  Water Use Equipment
</p>
<p>Water Use Equipment represents uses of water within a Space used for showers, 
</p>
<p>cooking, washing, etc. Water Use Equipment is defined in terms of a peak flow rate, 
</p>
<p>which is modulated by a fractional schedule. A Temperature Schedule dictates the 
</p>
<p>temperature of the water. The data entry form for a piece of Water Use Equipment 
</p>
<p>is shown in Fig.&nbsp;3.9.
</p>
<p>The method of accounting for water heating energy depends upon whether or not 
</p>
<p>heating Equipment has been installed elsewhere in the building Model, as will be 
</p>
<p>discussed in Chaps. 4 and 5. If heating Equipment has been specified, then the target 
</p>
<p>4 http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-
</p>
<p>lights-other.html#field-activity-level-schedule-name.
</p>
<p>Fig. 3.7 People definition for an Office Break Room Space Type
</p>
<p>3.2 Space Types</p>
<p/>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name</a></div>
</div>
<div class="page"><p/>
<p>68
</p>
<p>temperature is achieved by mixing hot and cold water at the fixture. If the Water Use 
</p>
<p>Equipment has not been connected to a heating system in the simulation, then it is 
</p>
<p>simply provided at the requested temperature and the energy required to heat mains 
</p>
<p>water to the given temperature is not tracked.
</p>
<p>In either case, the water consumption is accounted for in the simulation along with 
</p>
<p>any heat rejected to the Space. The mechanisms for heat transfer to the Space are sen-
</p>
<p>sible heat addition as well as latent moisture addition, any remaining heat is assumed 
</p>
<p>to be convected out of the space down the drain. For maximum flexibility, the fraction 
</p>
<p>of energy rejected to the Space in sensible and latent form are specified by a schedule 
</p>
<p>rather than a fixed value. Water use Equipment will be discussed further in Chap. 5.
</p>
<p>3.2.2.5  Infiltration
</p>
<p>Infiltration is unconditioned outdoor air that enters a space from the outside through 
</p>
<p>gaps in the envelope, doors or windows that are periodically opened. Design 
</p>
<p>Specification Outdoor Air is unconditioned, fresh outdoor air intentionally brought 
</p>
<p>into the building for occupant health. Because infiltration and design specification 
</p>
<p>Fig. 3.8 Occupant activity Schedule for an office
</p>
<p>Table 3.1 Typical power 
</p>
<p>consumption associated with 
</p>
<p>various activities (ASHRAE 
</p>
<p>2013, Table&nbsp;1, p.&nbsp;18.4.)
</p>
<p>Activity
</p>
<p>Average Power 
</p>
<p>Consumption (W)
</p>
<p>Sitting 97
</p>
<p>Moderate office work 130
</p>
<p>Light factory work 220
</p>
<p>Heavy factory work 425
</p>
<p>Exercise 586
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>69
</p>
<p>outdoor air increase or decrease heat and humidity in a Space, they are considered a 
</p>
<p>thermal Load that must be actively managed by HVAC systems. Unlike other Loads, 
</p>
<p>infiltration is defined directly in the Space Types ( ) Tab as shown in Fig.&nbsp;3.10.
</p>
<p>Note that in each of the four Space Types shown in the above example that three 
</p>
<p>types of infiltration Objects may be included:
</p>
<p>&bull; Design Specification Outdoor Air,
</p>
<p>&bull; Space Infiltration Design Flow Rates, and
</p>
<p>&bull; Space Infiltration Effective Leakage Area.
</p>
<p>The first is associated with ASHRAE Standards 62.1 and 62.2, which prescribes 
</p>
<p>minimum outdoor ventilation rates for occupant health and comfort and will be 
</p>
<p>discussed further in Chaps. 4 and 5. The latter two Objects represent different mod-
</p>
<p>els for unintended air infiltration. Modelers will most often select only one of these 
</p>
<p>last two Objects to represent Space infiltration. Figure&nbsp;3.11 shows some of the input 
</p>
<p>arguments for the Design Flow Rate method of calculation.
</p>
<p>Figure 3.12 illustrates selection of the Effective Leakage Area Object from the 
</p>
<p>Library after dragging and dropping it onto a Space Type. Note that dragging infiltration 
</p>
<p>Fig. 3.9 Example water 
</p>
<p>use equipment definition
</p>
<p>3.2 Space Types</p>
<p/>
</div>
<div class="page"><p/>
<p>70
</p>
<p>objects in from the library is the only way to create infiltration and design application 
</p>
<p>outdoor air objects in the OpenStudio Application. The reader is directed to the 
</p>
<p>EnergyPlus Input Output Reference Guide for more information on these Objects5 and 
</p>
<p>appropriate selection of input parameters.
</p>
<p>3.2.3  Building a&nbsp;Space Type
</p>
<p>The previous three Figures were our first introduction to OpenStudio&rsquo;s Space Type 
</p>
<p>( ) Tab. The &ldquo;General&rdquo; view allows the user to drag Space Types in from a Library, 
</p>
<p>as well as to create, duplicate, delete, or purge Space Types with the appropriate 
</p>
<p>5 http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow.
</p>
<p>Fig. 3.10 Outdoor air ventilation for an Office Lobby Space Type
</p>
<p>Fig. 3.11 Infiltration Flow Rate for an Office Lobby Space Type
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow">http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow</a></div>
</div>
<div class="page"><p/>
<p>71
</p>
<p>Button. This first view allows the user to assign custom colors, Construction Sets, 
</p>
<p>Schedule Sets, and infiltration Objects that will be used whenever the Space Type is 
</p>
<p>assigned to a Space. Note that in Fig.&nbsp;3.12 no Construction Set has been assigned to 
</p>
<p>any of the Space Types. Recall from the previous Chapter that in the absence of a 
</p>
<p>specific Construction Set definition, OpenStudio will look to the Object&rsquo;s parent (in 
</p>
<p>this case the Building Story) for guidance.
</p>
<p>Clicking on the Loads Button at the top of the window switches to a breakdown 
</p>
<p>of Loads within each Space Type as shown in Fig.&nbsp;3.13. Infiltration will show up 
</p>
<p>Fig. 3.12 Adding an Infiltration Effective Leakage Area Object
</p>
<p>Fig. 3.13 Adding loads to define four office Space Types
</p>
<p>3.2 Space Types</p>
<p/>
</div>
<div class="page"><p/>
<p>72
</p>
<p>automatically, and additional Load Instances may be added by dragging Load 
</p>
<p>Definitions from the right hand into the &ldquo;Definition&rdquo; column. Schedules are auto-
</p>
<p>matically assigned based on the Schedule Set but can be overridden if needed. Space 
</p>
<p>Type and Load Names may be customized based on the modeler&rsquo;s preference. 
</p>
<p>Lastly, Load Multipliers may be specified for Objects that were defined using indi-
</p>
<p>vidual rated power values (e.g. a multiplier of 10 might apply to the number of 
</p>
<p>computers in a Space).
</p>
<p>3.3  Spaces
</p>
<p>With Schedules, Loads, and Space Types defined, it&rsquo;s time to assign Space Types to 
</p>
<p>specific activity areas within the building. In the previous Chapter, we used the floor 
</p>
<p>plan editor in the Geometry ( ) Tab to create Spaces. As we with Thermal Zones in 
</p>
<p>Sect. 2.8.7, the Assignments Sub-Tab of the floor plan editor may be used to assign 
</p>
<p>Space Types to Spaces within a model as shown in Fig.&nbsp;3.14.
</p>
<p>The Spaces ( ) Tab shown in Fig.&nbsp;3.15 may also be used to assign Space Types. 
</p>
<p>At first glance, this Tab may seem superfluous given that the floor plan editor pro-
</p>
<p>vides similar functionality along with the convenience of being able to visualize the 
</p>
<p>Space locations within the floor plan. However, the Spaces Sub-Tabs allows us to 
</p>
<p>edit multiple Spaces on each Floor simultaneously, while providing added function-
</p>
<p>ality and a greater level of control in defining Space contents.
</p>
<p>Figure 3.16 shows the  Sub-Tab being used to inspect the Loads within each 
</p>
<p>Space. A quick comparison with the original Space Type definitions in Fig.&nbsp;3.13 
</p>
<p>Fig. 3.14 Assigning Space Types using the Geometry editor
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>73
</p>
<p>confirms that the loads prescribed by each Space Type were applied correctly. One 
</p>
<p>subtle distinction between these two views is the text color. The text in the Space 
</p>
<p>Type definitions is black, whereas the text in the actual Spaces is green. This is 
</p>
<p>OpenStudio&rsquo;s visual cue that data is being inherited and is used throughout the 
</p>
<p>Application. This particular Sub-Tab allows the user to drag in additional loads that 
</p>
<p>will show up in black text, which may be unique to an individual Space that is oth-
</p>
<p>erwise well described by a Space Type. By the same token, checkboxes next to 
</p>
<p>inherited rows may be used to select individual Loads for deletion with the  Button. 
</p>
<p>Like Construction Sets, Space Types allow the user to quickly assign activities and 
</p>
<p>loads from manually assembled definitions or Libraries, but they are not restrictive, 
</p>
<p>and Spaces may be customized when necessary.
</p>
<p>The  and  Sub-Tabs shown in Figs.&nbsp;3.17 and 3.18 also illustrate the 
</p>
<p>data inheritance concept with Construction Sets. In this case, appropriate 
</p>
<p>Constructions have been applied to each Surface and Sub-Surface based on the 
</p>
<p>Fig. 3.15 Space assignment Sub-Tab
</p>
<p>Fig. 3.16 Space load assignments defaulted from Space Type definition
</p>
<p>3.3 Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>74
</p>
<p>Surface Type. Unique Constructions may be dragged in to replace inherited 
</p>
<p>Constructions when required.
</p>
<p>One type of Load that was briefly mentioned earlier in the Chapter is an &ldquo;Internal 
</p>
<p>Mass Object.&rdquo; These Objects may be added to Space Types like other Loads as 
</p>
<p>shown in Fig.&nbsp;3.19. Internal Mass Objects don&rsquo;t consume energy or radiate heat in 
</p>
<p>the same sense as other Objects like people or Equipment, nor do they have associ-
</p>
<p>ated Schedules. Instead, the Objects add thermal capacitance to the spaces they 
</p>
<p>Fig. 3.17 Space Surfaces Sub-Tab with defaulted Construction Set
</p>
<p>Fig. 3.18 Space Sub-Surfaces Sub-Tab
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>75
</p>
<p>occupy; that is, they store and release heat, adding to the dynamic behavior of the 
</p>
<p>Space. The Object&rsquo;s Construction and surface area dictate this behavior. Internal 
</p>
<p>Mass Objects can provide a very significant effect in Spaces used for storage (e.g. 
</p>
<p>warehouses with heavily laden shelves).
</p>
<p>We mention Internal Mass Objects here because they are closely connected with 
</p>
<p>the  Sub-Tab shown in Fig.&nbsp;3.20. Interior Partitions are Surfaces that exist 
</p>
<p>within a Space to represent furniture, or other objects. Interior Partitions are included 
</p>
<p>in detailed renderings using Radiance but do not define boundaries between Spaces 
</p>
<p>or with the exterior environment. However, they may act as Internal Mass Objects, 
</p>
<p>storing and releasing heat within a Space. Interior Partitions will generally be speci-
</p>
<p>fied along with the Space geometry with an associated Construction. Checking the 
</p>
<p>&ldquo;Convert to Internal Mass&rdquo; column tells OpenStudio to include it as part of the 
</p>
<p>overall thermal mass within the Space.
</p>
<p>Fig. 3.19 Defining an Internal Mass Object for a Space
</p>
<p>Fig. 3.20 Interior partitions Sub-Tab
</p>
<p>3.3 Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>76
</p>
<p>The last Sub-Tab associated with Spaces is , shown in Fig.&nbsp;3.21. The significance 
</p>
<p>of Shading Surfaces as it relates to solar radiation exposure and daylight availability will 
</p>
<p>be discussed in Chap. 8.
</p>
<p>3.4  Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small 
</p>
<p>Model
</p>
<p>Now it&rsquo;s time to revisit the first Model we built in Checkpoint One. Recall when we 
</p>
<p>last worked with that Model; it was a simple box comprised of a single Space and 
</p>
<p>Thermal Zone with no Space Type definition and no HVAC system. The Space 
</p>
<p>Fig. 3.21 Shading Surfaces Sub-Tab
</p>
<p>Fig. 3.22 Creating a new Schedule Set
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>77
</p>
<p>temperature was strictly a function of ambient heat transfer through the envelope. In 
</p>
<p>this exercise, we will define a Space Type around a single unfortunate occupant named 
</p>
<p>&ldquo;Bob&rdquo; who is forced to use the small, unconditioned building as his office. If we&rsquo;re 
</p>
<p>feeling generous, perhaps we&rsquo;ll try to provide some rudimentary air conditioning for 
</p>
<p>him as well. Open up the last saved version of that Model, and let&rsquo;s get to work.
</p>
<p>3.4.1  Creating a&nbsp;Schedule Set
</p>
<p>Open the Model and create a new Schedule Set named &ldquo;Bob&rsquo;s Schedule Set&rdquo; with 
</p>
<p>the  Button in the Schedules ( ) Tab as shown in Fig.&nbsp;3.22. Leave it blank for the 
</p>
<p>moment and proceed to the  Sub-Tab.
</p>
<p>Use the  Button to create new Ruleset Schedules. A dialog pops up allowing the 
</p>
<p>user to select the type of Schedule as shown in Fig.&nbsp;3.23. Create the schedules listed 
</p>
<p>in Table&nbsp;3.2.
</p>
<p>Now we need to edit the Schedules themselves. Select one of the Schedule Objects 
</p>
<p>and note that each allows the user to specify Summer and Winter design day profiles 
</p>
<p>and a Default Run Period Profile. Ignore the design day profile options and select the 
</p>
<p>Default Run Period Profile that has a light blue band next to it. This activates a 
</p>
<p>graphical interface for editing our Schedules as shown in Fig.&nbsp;3.24. Recall from Sect. 
</p>
<p>3.2.2.3 that Activity Schedules like Bob&rsquo;s are often set as constant values throughout 
</p>
<p>the year, relying on a fractional occupancy Schedule to modulate them. If you would 
</p>
<p>like to make Bob lazier, click on the constant line and drag it down. You may also 
</p>
<p>hover the mouse over the bar, type in a number and press enter to set a specific value. 
</p>
<p>Let&rsquo;s leave Bob&rsquo;s Activity level at 100&nbsp;W for the purpose of this exercise.
</p>
<p>Having set Bob&rsquo;s typical energy consumption, we now need to specify a working 
</p>
<p>schedule for his thermal torture chamber&nbsp; &ndash; aka office. Select Bob&rsquo;s Schedule to 
</p>
<p>produce the Default Schedule shown in Fig.&nbsp;3.25. The &ldquo;tip list&rdquo; and Fig.&nbsp;3.26 will 
</p>
<p>help you understand how the Schedule editor works.
</p>
<p>Notice that the light blue color band next to Default matches the color of each 
</p>
<p>day on the calendar to the right of the window. This indicates that the Default sched-
</p>
<p>ule will be used 365&nbsp;days of the year. We can allow Bob to take days off by  specifying 
</p>
<p>Useful Schedule Editor Tips:
</p>
<p>&bull; Double clicking on horizontal lines splits them into multiple segments.
</p>
<p>&bull; Horizontal segments may be dragged up and down or set to a specific value 
</p>
<p>by typing a number and pressing enter.
</p>
<p>&bull; Double clicking on vertical lines deletes segments.
</p>
<p>&bull; Vertical segments may be dragged back and forth.
</p>
<p>&bull; The Hourly, 15&nbsp;min, and 1&nbsp;min selectors at the bottom of the window allow 
</p>
<p>for finer resolution along the time axis.
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>78
</p>
<p>Fig. 3.23 Creating a new Ruleset Schedule
</p>
<p>Table 3.2 Schedule Types 
</p>
<p>and names for Checkpoint 3 
</p>
<p>exercise
</p>
<p>Schedule Type Name
</p>
<p>Activity Bob&rsquo;s activity
</p>
<p>Fractional Bob&rsquo;s schedule
</p>
<p>Temperature Heating thermostat
</p>
<p>Temperature Cooling thermostat
</p>
<p>Fig. 3.24 Editing Bob&rsquo;s activity Schedule
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>79
</p>
<p>Fig. 3.25 Bob&rsquo;s default Occupancy Schedule
</p>
<p>Fig. 3.26 Using the Schedule editor to create a Fractional Occupancy Schedule
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>80
</p>
<p>additional Profiles and selection rules as part of the Ruleset Schedule. Click the 
</p>
<p>small  next to &ldquo;Run Period Profiles&rdquo; to add an additional Profile. We are given the 
</p>
<p>option to create an entirely new Profile or copy from another Profile in the Ruleset 
</p>
<p>Schedule as shown in Fig.&nbsp;3.27. Figure&nbsp;3.28 shows a second Profile that has been 
</p>
<p>copied from the default Profile. Notice that our new Profile is called &ldquo;Priority 1&rdquo; and 
</p>
<p>marked with a purple band. This Profile also includes a date range and Buttons 
</p>
<p> corresponding to the days of the week that was not present in the Default Profile. 
</p>
<p>Clicking on the Buttons corresponding to Saturday and Sunday and setting the 
</p>
<p>schedule to a uniform 0 fraction leads to the Profile shown in Fig.&nbsp;3.29.
</p>
<p>Additional Profiles may be added with their own date ranges and days of the 
</p>
<p>week to reflect holidays, cleaning crew occupancy, and more. Each new Profile is 
</p>
<p>assigned its own priority number. The highest priority (lowest number) always wins 
</p>
<p>Fig. 3.27 Creating a new Run Period Profile in a Ruleset Schedule
</p>
<p>Fig. 3.28 A new profile for Bob&rsquo;s Schedule copied from the default Profile
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>81
</p>
<p>out&nbsp;&ndash; another example of data inheritance in OpenStudio. Checking color codes on 
</p>
<p>the calendar is always recommended to ensure that a Ruleset Schedule will be 
</p>
<p>applied as expected.
</p>
<p>Now use the  Button to duplicate Bob&rsquo;s Schedule. Rename it &ldquo;Bob&rsquo;s Laptop,&rdquo; 
</p>
<p>and edit the Default Profile so it looks like Fig.&nbsp;3.30. This reflects the likelihood that 
</p>
<p>Bob leaves his Laptop running in the Space when he slips out during his lunch hour.
</p>
<p>Fig. 3.29 A higher priority Ruleset Schedule profile for weekends
</p>
<p>Fig. 3.30 Laptop usage profile derived from Occupancy Schedule
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>82
</p>
<p>The last two Schedules we need for this exercise are shown in Figs.&nbsp;3.31 and 
</p>
<p>3.32. Use the Schedule editor to create both of them and save your work.6
</p>
<p>With all of our Schedules defined, go back to the Schedule Set editor and drag 
</p>
<p>the individual Ruleset Schedules in as shown in Fig.&nbsp;3.33. This assignment assumes 
</p>
<p>that Bob turns off the lights whenever he leaves. We will make use of the thermostat 
</p>
<p>Schedules elsewhere.
</p>
<p>3.4.2  Defining Our Loads
</p>
<p>Now navigate to the Loads ( ) Tab to define all of the Loads for our Space Type. 
</p>
<p>Add Loads for Bob, Lights, and his laptop as shown in Fig.&nbsp;3.34.
</p>
<p>3.4.3  Defining and&nbsp;Assigning Our Space Type
</p>
<p>With Schedules and Loads defined, it&rsquo;s time to assemble them into a Space Type 
</p>
<p>that we can apply to Spaces within our Building. Use the Space Types ( ) Tab to 
</p>
<p>create a new Space Type with the  Button. Drag and drop the new Schedule Set 
</p>
<p>into the Default Schedule Set column as shown in Fig.&nbsp; 3.35. Ignore the other 
</p>
<p>6 The values shown assume that you have set the Application&rsquo;s units preference to English (I-P).
</p>
<p>Fig. 3.31 Setting a Heating Thermostat Ruleset Schedule for Bob&rsquo;s Office
</p>
<p>Fig. 3.32 Setting a Cooling Thermostat Ruleset Schedule for Bob&rsquo;s Office
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>83
</p>
<p>Fig. 3.33 Defining a Schedule Set for Bob&rsquo;s Office
</p>
<p>Fig. 3.34 Defining the Loads for Bob&rsquo;s Office
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>84
</p>
<p>columns, since we will let the Space Type inherit the Floor&rsquo;s Construction Set and 
</p>
<p>won&rsquo;t include infiltration for this first example.
</p>
<p>Next, click on the Loads Button. Use Fig.&nbsp;3.36 as an example of how to drag and 
</p>
<p>drop people, light, and electric Equipment definitions from &ldquo;My Model&rdquo; into the 
</p>
<p>Definitions column for the Bob&rsquo;s Office Space Type. Schedules are automatically 
</p>
<p>assigned based on the Schedule Set.
</p>
<p>Now that the Space Type has been defined, we&rsquo;re ready to apply it to the single 
</p>
<p>Space in our Building. Switch to the Spaces ( ) Tab to drag and drop the Bob&rsquo;s 
</p>
<p>Office Space Type onto our Space as shown in Fig.&nbsp;3.37. Switch to the  Sub-Tab 
</p>
<p>to verify that all of our Loads and Schedules were correctly inherited from the 
</p>
<p>Fig. 3.35 Creating a new Space Type and Adding a Schedule Set
</p>
<p>Fig. 3.36 Adding Loads to a Space Type
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>85
</p>
<p>Space Type (Fig.&nbsp;3.38). If you wish, you may check that Surfaces and Sub-Surfaces 
</p>
<p>were inherited from the Floor/Building as well.
</p>
<p>Since this particular building has only a single Space, the extra effort of defining 
</p>
<p>a Space Type isn&rsquo;t necessarily warranted. As mentioned previously in Sect. 3.3, we 
</p>
<p>could also have dragged loads and schedules directly into our Space without relying 
</p>
<p>on data inheritance. The real value of Space Types will become apparent in the next 
</p>
<p>exercise where many Spaces can benefit from common Space Type definitions.
</p>
<p>Fig. 3.37 Assigning our New Space Type to Bob&rsquo;s Space
</p>
<p>Fig. 3.38 Inspecting the Loads assigned to Bob&rsquo;s Space
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>86
</p>
<p>Fig. 3.39 Additional content in the OpenStudio report related to our Space
</p>
<p>Fig. 3.40 Annual end use breakdown for Bob&rsquo;s Unconditioned Office
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>87
</p>
<p>3.4.4  Running the&nbsp;Simulation
</p>
<p>We are told that Bob is (very reluctantly) prepared to begin his year-long tenure in 
</p>
<p>his unconditioned office. Let&rsquo;s make sure he shows up by adding &ldquo;People Occupant 
</p>
<p>Count&rdquo; as a Timestep variable with the Variables ( ) Tab. Use the Run ( ) Tab to 
</p>
<p>run the simulation. When the simulation has completed, switch to the Reports ( ) 
</p>
<p>Tab to view the OpenStudio standard report. Clicking on the Space Type Breakdown 
</p>
<p>link in the report produces Fig.&nbsp;3.39 allowing us to quickly verify that all of the 
</p>
<p>Loads we prescribed in &ldquo;Bob&rsquo;s Office&rdquo; are present and accounted for.
</p>
<p>The Annual Overview link (Fig.&nbsp;3.40) now includes pie charts showing the end 
</p>
<p>use breakdown for lighting and Bob&rsquo;s Laptop across the entire year. Hovering the 
</p>
<p>Fig. 3.41 Monthly end use breakdown for Bob&rsquo;s Unconditioned Office
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>88
</p>
<p>mouse over these plots reveals specific numbers, and the blue &ldquo;view table&rdquo; Buttons 
</p>
<p>expand to reveal detailed tabular data underlying the charts.
</p>
<p>Also of note is the Monthly Overview (Fig.&nbsp;3.41). These monthly consumption 
</p>
<p>plots are essentially flat, varying only based on the number of workdays that fall in 
</p>
<p>any given month.
</p>
<p>Of greatest interest (at least to Bob) is the Zone Conditions section of the report, 
</p>
<p>as it most concisely reflects the cruelty we have inflicted upon him. As evidenced by 
</p>
<p>Fig.&nbsp;3.42, adding Bob, his laptop, and lighting to the Space has increased the num-
</p>
<p>ber of hours spent in excess of 88 degrees Fahrenheit by nearly 300&nbsp;h! On the bright 
</p>
<p>side, the thermal Loads in Bob&rsquo;s office decreased the number of extremely cold 
</p>
<p>hours a small amount. Also of significance is the dramatic shift in humidity within 
</p>
<p>the Space. Bob&rsquo;s presence now results in nearly 3000 additional hours at 80% rela-
</p>
<p>tive humidity or higher.
</p>
<p>Adding insult to injury is the time series plot produced using DView and the 
</p>
<p>simulations&rsquo; eplusout.sql file. Figure&nbsp;3.43 compares ambient and interior tempera-
</p>
<p>tures over the same time period we plotted in Chap. 2. This new plot shows that Bob 
</p>
<p>did indeed turn up for work each day, and experienced peak temperatures that were 
</p>
<p>nearly ten degrees higher than if he and his equipment weren&rsquo;t in the Space. The 
</p>
<p>authors feel terrible about Bob&rsquo;s deplorable working conditions. Let&rsquo;s see if we 
</p>
<p>can&rsquo;t do something for him in the next part of this exercise.
</p>
<p>3.4.5  Ideal Air Loads
</p>
<p>We will begin considering HVAC systems in the next Chapter, but OpenStudio and 
</p>
<p>EnergyPlus provide a &ldquo;quick and dirty&rdquo; way of managing interior temperatures 
</p>
<p>called an Ideal Air Load. An Ideal Air Load represents a Zone that is conditioned by 
</p>
<p>an idealized HVAC system to maintain heating and cooling temperatures. Heating 
</p>
<p>or cooling is supplied by a fictitious district7 heating and cooling system with no 
</p>
<p>significant sizing or dynamic constraints placed upon its performance.
</p>
<p>7 District systems are heating or cooling systems that exist external to the building. Examples 
</p>
<p>include central steam or chiller plants that provide heating and cooling to a campus of buildings.
</p>
<p>Fig. 3.42 Zone Conditions for Bob&rsquo;s Unconditioned Office
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>89
</p>
<p>Ideal Air Loads are turned on with a simple checkbox on the Zones ( ) Tab. The 
</p>
<p>Ideal Air Load requires heating and cooling thermostat schedules to function prop-
</p>
<p>erly. Fortunately, we created them when we built our Space Type definition. Drag 
</p>
<p>the thermostats onto the Zone and check the Ideal Air Loads box as shown in 
</p>
<p>Fig.&nbsp;3.44. Remember to save your work, and run the updated simulation to see if 
</p>
<p>we&rsquo;ve made Bob&rsquo;s life any better.
</p>
<p>Jumping straight to the Zone Conditions summary in the OpenStudio report 
</p>
<p>(Fig.&nbsp;3.45) shows a tremendous change for the better. There are now zero hours in 
</p>
<p>excess of 88 degrees Fahrenheit. The number of chilly hours could be improved by 
</p>
<p>alterations to the heating thermostat schedule, but we don&rsquo;t want Bob to get too 
</p>
<p>complacent. The Annual and Monthly Overview sections of the reports shown in 
</p>
<p>Figs.&nbsp;3.46 and 3.47 have also changed to reflect the addition of district heating and 
</p>
<p>cooling to condition Bob&rsquo;s Office.
</p>
<p>Figure 3.47 represents our closest look yet at end use breakdowns required to 
</p>
<p>heat, cool, and light a building (albeit a simple one) that supports occupant activity. 
</p>
<p>As a building modeler, it is important to inspect these kinds of results to see if they 
</p>
<p>Fig. 3.43 DView time series plots for Bob&rsquo;s Unconditioned Office
</p>
<p>Fig. 3.44 Adding Thermostat Schedules and Ideal Air Loads to our Thermal Zone
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>90
</p>
<p>make sense. One feature of these monthly bar charts that should give us pause is the 
</p>
<p>need for simultaneous heating and cooling throughout the year, an indicator of an 
</p>
<p>inefficient design. In the case of an Ideal Air Load system, this can be a result of 
</p>
<p>poorly selected heating and cooling thermostat schedules. We can verify that this is 
</p>
<p>the case by looking at time series plots in DView (Fig.&nbsp;3.48).
</p>
<p>As we add non-idealized HVAC systems to our models, behaviors like simulta-
</p>
<p>neous heating and cooling, unmet hours of operation, and Equipment cycling 
</p>
<p>become more likely. Casting a critical eye at the annual, monthly, and time series 
</p>
<p>data provided by the software is an important role of the energy modeler. Just 
</p>
<p>because the simulation &ldquo;said so&rdquo; does not make it correct or optimal. In this case, 
</p>
<p>what would you do to eliminate simultaneous heating and cooling with our Ideal Air 
</p>
<p>Load System? Test your ideas by changing your Model and re-running it.
</p>
<p>Fig. 3.45 Zone Conditions with Ideal Air Loads
</p>
<p>Fig. 3.46 Annual end use breakdown with Ideal Air Loads
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>91
</p>
<p>Fig. 3.47 Monthly end use breakdown with Ideal Air Loads
</p>
<p>Fig. 3.48 Time series plots of ambient and interior temperatures alongside district heating/cooling 
</p>
<p>load
</p>
<p>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</p>
<p/>
</div>
<div class="page"><p/>
<p>92
</p>
<p>3.5  Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School 
</p>
<p>Model
</p>
<p>Let us continue refining our school capstone Model from Checkpoint Two. Instead 
</p>
<p>of going through all the tedious steps of defining Loads and Schedules we used in 
</p>
<p>the previous exercise, we will make use of Libraries to speed up the process. Use the 
</p>
<p>following steps to get started:
</p>
<p> 1. Open your Primary School Model (or a copy of it) from Checkpoint Two.
</p>
<p> (a) We recommend using &ldquo;Save As&rdquo; to preserve your previous work.
</p>
<p> 2. Pick &ldquo;Load Library&rdquo; from the File menu and import PrimarySchool.osm to load 
</p>
<p>the Model library with Space Types.
</p>
<p> 3. Navigate to the Space Type ( ) Tab, select Space Types labeled 90.1&ndash;2010&nbsp;&ndash; 
</p>
<p>PriSchl and drag them into your Model as shown in Fig.&nbsp;3.49. Rename them if 
</p>
<p>you wish.
</p>
<p> 4. Navigate to the Building ( ) Tab, select the Classroom Space Type you just 
</p>
<p>added, and drag it to become the Default Building Space Type (Fig.&nbsp;3.50).
</p>
<p> 5. Save your Model.
</p>
<p>Note that you could have selected any of the Space Types we just added as the 
</p>
<p>default Space Type. In general, you should select the Space Type that is most fre-
</p>
<p>quently used in your building&nbsp;&ndash; in this case a classroom.
</p>
<p>Before proceeding, this is a good opportunity to see how much time we just 
</p>
<p>saved by importing those Space Type Definitions, and also to verify the assumptions 
</p>
<p>we are making with loads, schedules. etc. Use the Loads section of the Space Types 
</p>
<p>( ) Tab to inspect the definitions for each Space Type as shown in Fig.&nbsp;3.51. Each 
</p>
<p>definition includes People, Lights, Equipment, Infiltration, and associated Schedules 
</p>
<p>without any significant effort on our part.
</p>
<p>We can dig a bit deeper into the underlying definitions using the Schedules ( ) 
</p>
<p>and Loads ( ) Tabs. Take a moment to browse through those sections of the Model 
</p>
<p>Fig. 3.49 Adding Space Types from the Library
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>93
</p>
<p>Fig. 3.50 Adding the Classroom Space Type as the building default
</p>
<p>Fig. 3.51 Inspecting load definitions for the new Space Types
</p>
<p>3.5 Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>94
</p>
<p>Fig. 3.52 Inspecting the imported people definition for the Cafeteria Space Type
</p>
<p>Fig. 3.53 Inspecting the Imported Schedule Set for the Cafeteria Space Type
</p>
<p>Fig. 3.54 Inspecting an Imported RuleSet Schedule for the Cafeteria Space Type
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>95
</p>
<p>to see what data has been added. For example, Fig.&nbsp;3.52 illustrates the definition of 
</p>
<p>a person in our Cafeteria.
</p>
<p>Figure 3.53 highlights the Cafeteria Schedule Set, just one of many we imported. 
</p>
<p>Switch to the  Sub-Tab to examine individual Schedules that were added as part 
</p>
<p>of those Sets. For example, Fig.&nbsp;3.54 illustrates the Cafeteria Occupancy Ruleset 
</p>
<p>Schedule built up from a Default Profile and Five different Priority Profiles repre-
</p>
<p>senting weekends, the School Year, Holidays, etc. How much time did making use 
</p>
<p>of pre-built schedules save? How many mistakes were potentially avoided?
</p>
<p>While we are in this particular Sub-Tab, take a moment to add two additional 
</p>
<p>Ruleset Schedules from the Library you imported. We will make use of: 
</p>
<p>PrimarySchool HtgSetp and PrimaryScool ClgSetp (Fig.&nbsp;3.55). As you might guess, 
</p>
<p>these are thermostat schedules that we will use when adding Idea Air Loads to our 
</p>
<p>Thermal Zones.
</p>
<p>Having verified the specific Loads and Schedules associated with our new Space 
</p>
<p>Types, it&rsquo;s time to actually apply them to the Spaces in our building. Navigate to the 
</p>
<p>Spaces ( ) Tab. Note in Fig.&nbsp;3.56 that the Classroom Space Type has been automati-
</p>
<p>cally assigned to all Spaces in the building per our default assignment. In general, 
</p>
<p>Fig. 3.55 Adding PrimarySchool HtgSetp and ClgSetp from the Library
</p>
<p>Fig. 3.56 All Spaces defaulted to the Classroom Space Type
</p>
<p>3.5 Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>96
</p>
<p>that&rsquo;s a good thing, but it did incorrectly assign Spaces like the Cafeteria as a 
</p>
<p>Classroom. Drag and drop the correct Space Types onto the appropriate Spaces as 
</p>
<p>shown in Fig.&nbsp;3.57.
</p>
<p>To reinforce our understanding of data inheritance and verify that the correct 
</p>
<p>Loads and Schedules are applied to our Spaces, switch to the  Sub-Tab. The 
</p>
<p>telltale green text in Fig.&nbsp;3.58 informs us that Loads and Schedules were inherited 
</p>
<p>from either the Building Default Space Type or the Space Types we manually 
</p>
<p>assigned. If we wished to add specific loads to Spaces that aren&rsquo;t pre-defined by the 
</p>
<p>Space Types, we could drag them in here. For our purposes we will stick with the 
</p>
<p>default definitions.
</p>
<p>If you didn&rsquo;t check out the Surface and Subsurface assignments during the 
</p>
<p>Checkpoint Two exercise, this is a convenient time to do so. Select the  or 
</p>
<p> Sub-Tabs to verify that the building Construction Set was correctly applied to 
</p>
<p>your Spaces. Figure&nbsp;3.59 is an example illustrating that the Default Constructions 
</p>
<p>that were applied to each surface in every Space. Again, we could choose to replace 
</p>
<p>Fig. 3.57 Overriding Space Type defaults for other Spaces
</p>
<p>Fig. 3.58 Verifying load definitions for Spaces
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>97
</p>
<p>any of these with a custom construction, but there is no need to do so for our 
</p>
<p>exercise.
</p>
<p>The last step in preparing our Model for simulation is to assign our heating and 
</p>
<p>cooling thermostats and turn on Idea Air Loads in each Thermal Zone. Switch to the 
</p>
<p>Zones ( ) Tab shown in Fig.&nbsp;3.60. Dragging and dropping the Heating and Cooling 
</p>
<p>Schedules onto every Zone in our Model is, pardon the pun, a drag. Fortunately, 
</p>
<p>OpenStudio makes this easier. Use the following steps to assign multiple schedules 
</p>
<p>at once:
</p>
<p> 1. Click the checkbox under the &ldquo;All&rdquo; column. This selects every Thermal Zone in 
</p>
<p>your Model.
</p>
<p> 2. Drag your Heating Thermostat Schedule onto the correct column for one of the 
</p>
<p>Zones.
</p>
<p> 3. Click that Schedule to highlight it.
</p>
<p> 4. Click the  Button to apply that Schedule to all the selected Thermal Zones.
</p>
<p> 5. Repeat for the Cooling Thermostat Schedule as shown in Fig.&nbsp;3.60.
</p>
<p> 6. Don&rsquo;t forget to check the Ideal Air Load boxes too!
</p>
<p>Fig. 3.59 Verifying Surface Constructions for Spaces
</p>
<p>Fig. 3.60 Using multi-select to assign the cooling Thermostat Schedule to all zones
</p>
<p>3.5 Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>98
</p>
<p>Fig. 3.61 Space Type breakdown for the Primary School Model
</p>
<p>Fig. 3.62 HVAC Loads and Zone Conditions for the Primary School Model
</p>
<p>Fig. 3.63 Annual end use breakdowns for the Primary School Model
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>99
</p>
<p>Run the simulation and browse the standard reports. Specific areas of interest are 
</p>
<p>the Space Type Breakdown and Summary sections shown in Fig.&nbsp;3.61, which allow 
</p>
<p>us to spot check the simulation&rsquo;s end use definitions.
</p>
<p>The HVAC Load Profile and Zone Condition sections tell us that the Thermostat 
</p>
<p>Schedules and Ideal Air Loads provided Space conditioning via a fictitious district 
</p>
<p>system (Fig.&nbsp;3.62). Figures&nbsp;3.63 and 3.64 show the annual and monthly end use 
</p>
<p>breakdowns for the school.
</p>
<p>Lastly, take a look at the time series data for your simulation using DView. 
</p>
<p>Figure&nbsp; 3.65 compares outdoor and Zone temperatures for the Lobby (Red) and 
</p>
<p>Mechanical Room (Orange) over the same time period as in the unconditioned 
</p>
<p>response plots we presented in Fig. 2.56. The lower plot shows the heating and cool-
</p>
<p>ing loads from the district system required to achieve the Thermostat target tem-
</p>
<p>peratures. Unlike our final results in Checkpoint Three, there is far less evidence of 
</p>
<p>simultaneous heating and cooling, suggesting that our Thermostat Schedules are 
</p>
<p>fairly reasonable.
</p>
<p>Fig. 3.64 Monthly end use breakdowns for the Primary School Model
</p>
<p>3.5 Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>100
</p>
<p>We now have a working knowledge of building Constructions, Loads, Schedules, 
</p>
<p>and the Spaces they support using OpenStudio. We have also learned how to crudely 
</p>
<p>condition those Spaces using Ideal Air Loads to evaluate the reasonableness of our 
</p>
<p>Envelope and Space assumptions. It is now time to turn our attention to modeling 
</p>
<p>how buildings are actually conditioned&nbsp;&ndash; using HVAC systems.
</p>
<p>3.6  Additional Exercises
</p>
<p>Use the &ldquo;Additional Exercises&rdquo; Model you created in Chap. 2 to continue learning 
</p>
<p>about Space Types:
</p>
<p>&bull; Open the Model you created in the Additional Exercises section of Chap. 2,
</p>
<p>&bull; Import Space Type definitions into your Library from a similar Model (e.g. 
</p>
<p>School, Office, etc.),
</p>
<p>&bull; Assign Space Types to the Spaces in your Model,
</p>
<p>&bull; Assign Ideal Air Loads to your Thermal Zones, and
</p>
<p>&bull; Run a simulation of your Model.
</p>
<p>Review outputs from your model and compare them with results from your 
</p>
<p>previous Checkpoints. Do the end uses in your model make sense? Are the time 
</p>
<p>series plots from your simulations consistent with the Schedules used by your 
</p>
<p>Space Types?
</p>
<p>Fig. 3.65 Time series plots for the Primary School Model
</p>
<p>3 Defining Energy Uses and&nbsp;Spaces</p>
<p/>
</div>
<div class="page"><p/>
<p>101
</p>
<p>References
</p>
<p>ASHRAE (2013) Handbook fundamentals, ASHRAE, pp&nbsp;18.3&ndash;18.12.
</p>
<p>DiLaura D, Houser K, Mistrick R, Stetty G (2011) The lighting handbook, 10th edn. Illuminating 
</p>
<p>Engineering Society (IES). https://www.ies.org/store/lighting-handbooks/lighting-handbook- 
</p>
<p>10th-edition/
</p>
<p>http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.
</p>
<p>html#group-schedules
</p>
<p>http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-
</p>
<p>lights-other.html#field-activity-level-schedule-name
</p>
<p>http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow
</p>
<p>References</p>
<p/>
<div class="annotation"><a href="https://www.ies.org/store/lighting-handbooks/lighting-handbook-10th-edition/">https://www.ies.org/store/lighting-handbooks/lighting-handbook-10th-edition/</a></div>
<div class="annotation"><a href="https://www.ies.org/store/lighting-handbooks/lighting-handbook-10th-edition/">https://www.ies.org/store/lighting-handbooks/lighting-handbook-10th-edition/</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-schedules.html#group-schedules</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name">http://bigladdersoftware.com/epx/docs/8-7/input-output-reference/group-internal-gains-people-lights-other.html#field-activity-level-schedule-name</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow">http://bigladdersoftware.com/epx/docs/8-0/input-output-reference/page-018.html#group-airflow</a></div>
</div>
<div class="page"><p/>
<p>103&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_4
</p>
<p>Chapter 4
</p>
<p>Introduction to&nbsp;HVAC Systems
</p>
<p>4.1  Introduction
</p>
<p>As we observed in previous Chapter exercises, buildings generally benefit from 
</p>
<p>HVAC systems that are designed to regulate their internal environmental conditions. 
</p>
<p>As the name implies, in addition to heating and cooling, these systems also provide 
</p>
<p>fresh outdoor (ventilation) air to dilute CO2 and other contaminants produced by 
</p>
<p>building occupants, processes, and materials. Modeling HVAC systems correctly is 
</p>
<p>one of the most challenging aspects of energy modeling because of the variety of 
</p>
<p>systems and controls available and the design considerations that drive their selec-
</p>
<p>tion. The goal of this Chapter is to discuss some of the general concepts needed to 
</p>
<p>understand HVAC system modeling in the context of OpenStudio.
</p>
<p>4.2  Model Zoning
</p>
<p>As described in Chap. 2, OpenStudio Models are divided into Spaces. A Space is a 
</p>
<p>collection of Surfaces and Sub-Surfaces that enclose a volume of air. A Space con-
</p>
<p>tains internal loads as described in Chap. 3. In both Chapters, we also briefly touched 
</p>
<p>on the concept of a Thermal Zone. Thermal Zones are served by HVAC systems, 
</p>
<p>and are comprised of one or more Spaces. By extension, a Thermal Zone is a collec-
</p>
<p>tion of all the Surfaces and Sub-Surfaces that enclose all Zone&rsquo;s Spaces, plus all the 
</p>
<p>Internal Loads contained in those Spaces.
</p>
<p>Figure 4.1 shows a building that contains Four Spaces and Two Thermal Zones. 
</p>
<p>One Thermal Zone contains only a single Space, while the other Thermal Zone 
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_4) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_4&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_4&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>104
</p>
<p>contains the remaining Three Spaces. Although the Spaces in a Thermal Zone are 
</p>
<p>not required to be adjacent, as described later, this is a best practice.
</p>
<p>At every simulation time step, EnergyPlus performs a heat balance calculation 
</p>
<p>for each Thermal Zone. Depending on the thermal boundary conditions discussed 
</p>
<p>in Chap. 2 heat is transferred into or out of a Thermal Zone through its Surfaces. As 
</p>
<p>we learned in Chap. 3, the Thermal Loads within Spaces also transfer heat to the 
</p>
<p>associated Thermal Zone. EnergyPlus generally assumes that all of the air inside of 
</p>
<p>a Thermal Zone is well mixed. This means that all of the heat transferred into the air 
</p>
<p>within a Thermal Zone is instantaneously spread around evenly. There are no hot or 
</p>
<p>cold spots within a Thermal Zone.
</p>
<p>Another Model Object closely associated with the Thermal Zone is a Thermostat. 
</p>
<p>As we saw in the previous Chapter Thermostats are associated with temperature 
</p>
<p>setpoints, or targets, and related schedules. HVAC systems attached to Thermal 
</p>
<p>Zones attempt to provide sufficient heat transfer into a Thermal Zone to achieve the 
</p>
<p>target setpoint temperature. Achieving the setpoint takes time based on the size of 
</p>
<p>the HVAC system and attached Thermal Zones, and it is quite possible that target 
</p>
<p>temperatures will not be achieved if the system is undersized for the Thermal Zone 
</p>
<p>Load and boundary conditions. These factors must be considered when &ldquo;zoning&rdquo; a 
</p>
<p>building or dividing it into Thermal Zones. Other zoning considerations include the 
</p>
<p>location of Spaces relative to the building fa&ccedil;ade, variation in heating and cooling 
</p>
<p>setpoints within Spaces, and more. Zoning is in some sense more art than science, 
</p>
<p>but there are a few heuristics that can guide us.
</p>
<p>4.2.1  Rules of&nbsp;Thumb for&nbsp;Combining Spaces into&nbsp;Thermal Zones
</p>
<p>When a Model contains a large number of Spaces, there are many possible ways to 
</p>
<p>combine them into Thermal Zones. While there are no exact rules, the following 
</p>
<p>&ldquo;rules of thumb&rdquo; can provide reasonable results:
</p>
<p>Fig. 4.1 Two Thermal Zones containing one or more spaces
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>105
</p>
<p>Similarity of External Boundary Conditions (Surface Area) Think about how 
</p>
<p>much external area (walls, roofs, windows, etc.) each Space has. If the Spaces have 
</p>
<p>similar surface areas, then the well-mixed assumption is probably valid. However, 
</p>
<p>if one Space has many exterior windows and walls, and another Space has none, our 
</p>
<p>engineering judgment and life experience suggests that the Space with no exterior 
</p>
<p>surfaces will be a different temperature than the one with exterior surfaces, espe-
</p>
<p>cially on very hot or very cold days. Such Spaces should not be grouped together 
</p>
<p>into a common Thermal Zone.
</p>
<p>Similarity of External Boundary Conditions (Timing) Consider when external 
</p>
<p>loads are likely to ramp up and down for each Space. For example, if two Spaces are 
</p>
<p>on the top floor of the East side of the building, solar heat transfer will be most 
</p>
<p>intense in the morning, and less so in the late afternoon. Such Spaces are good can-
</p>
<p>didates to combine. Grouping Spaces on East and West fa&ccedil;ades into a single Thermal 
</p>
<p>Zone may produce less desirable results because they may experience very different 
</p>
<p>exterior boundary conditions at the same time of day.
</p>
<p>Proximity and Connectedness of Spaces Think about where in the building the 
</p>
<p>Spaces are located. Although physical adjacency is not a prerequisite for simulation, 
</p>
<p>in reality, it is unlikely that air in two Spaces would be well mixed if the Spaces 
</p>
<p>were not adjacent or not connected by a doorway or corridor that allows air to pass 
</p>
<p>through unimpeded. Proximity may mean adjacency on the same floor or adjacency 
</p>
<p>from one floor to the next. Ask yourself how reasonable is EnergyPlus&rsquo; &ldquo;well- 
</p>
<p>mixed&rdquo; assumption for the collection of Spaces you propose to group together into 
</p>
<p>a single Thermal Zone.
</p>
<p>Size Sometimes large Spaces may need to be broken into smaller Spaces if the 
</p>
<p>well-mixed assumption is not reasonable for the entire Space. For example, a large 
</p>
<p>warehouse might seem like a single Space, but is it valid to assume that air heated 
</p>
<p>by exposure to a hot South facing wall will mix with cool air on the North fa&ccedil;ade? 
</p>
<p>In this case, it may be better to break the warehouse into several smaller Spaces and 
</p>
<p>assign each to a separate Thermal Zone.
</p>
<p>Variation in Internal Loads Consider the case of an IT closet with a large number 
</p>
<p>of internal Loads per area and a nearby corridor with little to no Load. Unless there 
</p>
<p>is a direct connection or fan circulating air between these Spaces, it is unlikely that 
</p>
<p>much of the heat from the IT closet will mix into the air in the corridor. These 
</p>
<p>Spaces are candidates for assignment into distinct Thermal Zones.
</p>
<p>Controllability Some Spaces may require unique setpoints and schedules. For 
</p>
<p>example, individual rooms in a hotel must offer each guest the ability to set a 
</p>
<p>temperature they find comfortable. In this case, each guest room must be  
</p>
<p>individually zoned.
</p>
<p>4.2 Model Zoning</p>
<p/>
</div>
<div class="page"><p/>
<p>106
</p>
<p>4.2.2  Zoning During Early Design
</p>
<p>It is sometimes desirable to perform simulations after the initial building envelope 
</p>
<p>has been defined but before detailed Spaces have been assigned. In this situation, 
</p>
<p>best practice is to use &ldquo;Core and Perimeter Zoning.&rdquo; This method divides the 
</p>
<p>building up into a Space for each fa&ccedil;ade, and then assigns each Space to its own 
</p>
<p>Thermal Zone. Typically, the exterior Spaces are between 15 and 20&nbsp;feet deep as 
</p>
<p>shown in Fig.&nbsp;4.2.
</p>
<p>4.3  HVAC System Types
</p>
<p>The HVAC industry offers a large variety of system designs and products. 
</p>
<p>OpenStudio and EnergyPlus are able to model commonly used systems, as well as 
</p>
<p>designs that are far more esoteric. OpenStudio organizes HVAC systems into three 
</p>
<p>basic categories: Zone HVAC, Air Systems, and Plant Systems.
</p>
<p>4.3.1  Zone HVAC Equipment
</p>
<p>Zone HVAC Equipment in OpenStudio refers to a family of components designed 
</p>
<p>to represent a specific, preconfigured, HVAC system that is meant to serve exactly 
</p>
<p>one Thermal Zone. One example of a Zone HVAC component is &ldquo;Zone HVAC 
</p>
<p>Packaged Terminal Air Conditioner (PTAC).&rdquo; A common application for a PTAC is 
</p>
<p>in a hotel room, which requires independent air conditioning.
</p>
<p>Fig. 4.2 Core and Perimeter Zoning
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>107
</p>
<p>All Zone HVAC types in OpenStudio include a prescribed arrangement of 
</p>
<p>sub- components. In the case of Zone PTAC, these include a fan, a cooling coil, 
</p>
<p>and a heating coil. It is generally not possible to add another sub component, 
</p>
<p>such as a backup heating coil or a humidification device, unless the specific Zone 
</p>
<p>HVAC component was pre-configured to include those sub-components. Just as 
</p>
<p>the component layout is preconfigured for Zone Equipment, so is the associated 
</p>
<p>control logic. Zone Equipment usually includes a limited set of user input fields 
</p>
<p>that can somewhat modify the Equipment&rsquo;s control algorithms. Zone HVAC con-
</p>
<p>trol logic attempts to follow the Thermal Zone&rsquo;s Thermostat setpoint to the best 
</p>
<p>of the Equipment&rsquo;s ability.
</p>
<p>4.3.2  Add a&nbsp;Zone HVAC Component
</p>
<p>Zone HVAC Equipment such as the PTAC is added to a Thermal Zone using the 
</p>
<p>Application&rsquo;s Thermal Zones ( ) Tab. As with other objects we have used in previ-
</p>
<p>ous Chapters, simply select the Zone Equipment then drag and drop it onto the 
</p>
<p>desired Thermal Zone as shown in Fig.&nbsp; 4.3. Thermostat Schedules must also be 
</p>
<p>dragged onto the Thermal Zone for the Equipment to function properly.
</p>
<p>As with other objects in OpenStudio, we can inspect the properties of the Zone 
</p>
<p>Equipment by clicking on it and looking in the right side of the window (Fig.&nbsp;4.4). 
</p>
<p>This panel shows all of the detailed properties of the Zone Equipment, as well as the 
</p>
<p>properties of any child components nested inside of it. The PTAC for example has 
</p>
<p>two coils and a fan as children, and the properties of those components are viewable 
</p>
<p>when you inspect the PTAC instance.
</p>
<p>Zone Equipment can be useful, but by definition, it is limited to serving single 
</p>
<p>Thermal Zones. The lack of customizability is also a drawback. For greater control 
</p>
<p>of HVAC system configuration, we need to learn about OpenStudio Air Systems.
</p>
<p>Fig. 4.3 Adding a piece of Zone Equipment
</p>
<p>4.3 HVAC System Types</p>
<p/>
</div>
<div class="page"><p/>
<p>108
</p>
<p>4.3.3  Air Loop Systems
</p>
<p>OpenStudio is capable of modeling complex single and multi-Zone air handlers 
</p>
<p>using the &ldquo;AirLoop HVAC&rdquo; Model. AirLoop HVAC is a modeling container in 
</p>
<p>which you can explicitly drag and drop sub-components such as fans, heating coils, 
</p>
<p>cooling coils, and a wide variety of other equipment. As the name implies AirLoop 
</p>
<p>HVAC is built around the concept of a closed loop with distinct supply and demand 
</p>
<p>Fig. 4.4 Setting properties for a piece of Zone Equipment
</p>
<p>Fig. 4.5 Supply and demand sides of an Air Loop
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>109
</p>
<p>sides (Fig.&nbsp; 4.5). The supply side may contain a large variety of fans, coils, heat 
</p>
<p>recovery devices, and outside air systems. The demand side is used to connect 
</p>
<p>Thermal Zones and associated Air Terminal devices.
</p>
<p>Compared to Zone Equipment, Air Loops allow for far greater configurability. 
</p>
<p>The user has nearly complete1 flexibility in the selection and placement of subcom-
</p>
<p>ponents, as well as more customizable control options. Additionally, Air Loop 
</p>
<p>HVAC can be attached to one or many Thermal Zones using a variety of Zone 
</p>
<p>Terminal units.
</p>
<p>When modeling single Thermal Zone systems, OpenStudio modelers often have 
</p>
<p>a choice between using the Air Loop Model or alternately using one of the Zone 
</p>
<p>HVAC Objects pre-built for a specific purpose. In fact, there is overlap in the capa-
</p>
<p>bilities of the two approaches. Because of the configurability that Air Loop offers, it 
</p>
<p>is capable of modeling many practical single Thermal Zone air-based systems. That 
</p>
<p>said there are single Thermal Zone systems that are only possible to model properly 
</p>
<p>in OpenStudio as Zone Equipment. In general, it is recommended to use Zone 
</p>
<p>Equipment when there is a suitable model available and the Equipment serves a 
</p>
<p>single Thermal Zone.
</p>
<p>Lastly note that OpenStudio allows for multiple pieces of Zone Equipment to be 
</p>
<p>attached to a single Thermal Zone, however Thermal Zones may only have one Air 
</p>
<p>Loop Connection. A common scenario is to use Zone Equipment to condition a 
</p>
<p>single Thermal Zone, for instance the &ldquo;Zone HVAC Four Pipe Fan Coil&rdquo; Object and 
</p>
<p>reserve the more configurable Air Loop to model a dedicated outside air system 
</p>
<p>(DOAS). These options will become clearer in subsequent sections and exercises.
</p>
<p>4.3.4  Plant Loop Systems
</p>
<p>Liquids are frequently used as a heat transfer medium in HVAC systems. All liquid 
</p>
<p>based systems, including chilled and hot water plants, condenser systems, and pota-
</p>
<p>ble hot water, are modeled using the Plant Loop component Model. Like Air Loops, 
</p>
<p>Plant Loops are closed loops incorporating the concept of a supply side and demand 
</p>
<p>side. The supply side of a Plant Loop typically contains heat producing or extracting 
</p>
<p>components such as chillers, boilers, and cooling towers. The demand side is typi-
</p>
<p>cally composed of consumers, such as chilled and hot water coils. Thus, the demand 
</p>
<p>side of Plant Loops are frequently connected to the supply side of Air Loops as 
</p>
<p>shown in Fig.&nbsp;4.6.
</p>
<p>Plant Loops allow some limited flow path branching. Specifically, splitters and 
</p>
<p>mixers paired on the supply side enables configurations like gangs of chillers. Plant 
</p>
<p>Loops also allow a single splitter and mixer to be paired up on the demand side, 
</p>
<p>1 OpenStudio does impose some limits on placement of components relative to the supply and 
</p>
<p>demand side of Air Loops to prevent the user from accidentally creating Models that won&rsquo;t simu-
</p>
<p>late in EnergyPlus.
</p>
<p>4.3 HVAC System Types</p>
<p/>
</div>
<div class="page"><p/>
<p>110
</p>
<p>Fig. 4.6 A typical Plant and Air Loop relationship
</p>
<p>Fig. 4.7 Plant Loop branch examples
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>111
</p>
<p>typically with parallel branches serving various plant loads such as water coils. 
</p>
<p>Figure&nbsp;4.7 illustrates common Plant branching scenarios.
</p>
<p>One constraint on Plant Loop topologies is that it is not possible to have a splitter 
</p>
<p>follow another splitter to form a sub-branch (Fig.&nbsp;4.8). This is a limitation of the 
</p>
<p>underlying EnergyPlus simulation engine. In practice, Plant Loop branching options 
</p>
<p>in OpenStudio are adequate to model the majority of real world systems. 
</p>
<p>Nevertheless, it is helpful to keep the concepts of supply and demand side and con-
</p>
<p>strained branching, in mind when designing plant systems in OpenStudio.
</p>
<p>4.4  HVAC System Templates
</p>
<p>Compared to Zone Equipment, Air and Plant Loop systems are more complex to 
</p>
<p>create from scratch. We will discuss custom built Loop-based systems in Chap. 5, 
</p>
<p>but for now let&rsquo;s take a look at using &ldquo;templates&rdquo; that OpenStudio provides to 
</p>
<p>quickly construct commonly used HVAC systems. These templates roughly corre-
</p>
<p>spond to a subset of the ASHRAE 90.1 Appendix G system types.2 Template sys-
</p>
<p>tems may also be used as a starting point and modified as needed.
</p>
<p>Consider ASHRAE 90.1 Appendix G system type seven. System seven is a built-
</p>
<p> up system that has a multi-Zone, variable air volume (VAV), central air handler 
</p>
<p>(Fig.&nbsp;4.9). There are chilled and hot water coils in the air handler, which are fed by 
</p>
<p>chilled and hot water plants respectively. The chilled water plant is cooled by a 
</p>
<p>2 ASHRAE (2016).
</p>
<p>Fig. 4.8 An unsupported Plant Loop topology
</p>
<p>4.4 HVAC System Templates</p>
<p/>
</div>
<div class="page"><p/>
<p>112
</p>
<p>Fig. 4.9 ASHRAE 90.1 Appendix G system type seven
</p>
<p>Fig. 4.10 Adding a template HVAC system to a Model
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>113
</p>
<p>water-cooled chiller, which is rejecting heat to another Plant Loop serving as the 
</p>
<p>condenser system, which rejects heat via a cooling tower. In total, there are three 
</p>
<p>Plant Loop instances and one Air Loop HVAC instance used to model system type 
</p>
<p>seven in OpenStudio. It is possible to build up these systems from scratch using Air 
</p>
<p>and Plant Loops and HVAC components, but it is far easier to start from an 
</p>
<p>OpenStudio template.
</p>
<p>4.4.1  Add a&nbsp;Template Air Loop HVAC System
</p>
<p>Template HVAC systems are added using the HVAC ( ) Tab in the Application. In 
</p>
<p>the upper left corner of the user interface, there is a  Button to select and add tem-
</p>
<p>plate systems. Clicking this Button opens an &ldquo;Add HVAC System&rdquo; dialog as shown 
</p>
<p>in Fig.&nbsp; 4.10. Scrolling through the options reveals a number of common system 
</p>
<p>configurations. ASHRAE system type seven most closely resembles the &ldquo;Packaged 
</p>
<p>Rooftop VAV with Reheat&rdquo; template. Clicking the  Button adds all of the nec-
</p>
<p>essary Plant and Air Loops along with the requisite sub-components to the Model.
</p>
<p>This particular template adds four new Loops to the Model including one Air 
</p>
<p>Loop representing the central air handler, a hot water Plant Loop, a chilled water 
</p>
<p>Plant Loop, and a condenser Plant Loop. The template is preconfigured with com-
</p>
<p>ponents linking the Loops together. After the template has been added, the system 
</p>
<p>selector field near the top of the HVAC ( ) Tab changes from &ldquo;Service Hot Water&rdquo; 
</p>
<p>to &ldquo;VAV with Reheat,&rdquo; displaying the Air Loop representing the central air handler 
</p>
<p>(Fig.&nbsp;4.11). This field may be used to navigate between Loops and other systems 
</p>
<p>that may be present in the Model.
</p>
<p>Fig. 4.11 Air handler included in Packaged Rooftop VAV with reheat templatesystem
</p>
<p>4.4 HVAC System Templates</p>
<p/>
</div>
<div class="page"><p/>
<p>114
</p>
<p>Note that the upper and lower halves of the Air Loop are separated by a dotted 
</p>
<p>line. The region above the dotted line represents the supply side of the Loop, while 
</p>
<p>the lower region is the demand side. The template has conveniently added several 
</p>
<p>Objects to the supply side including an outside air handler, cooling coil, heating 
</p>
<p>coil, supply fan, and a setpoint controller. The demand side contains a Zone Splitter 
</p>
<p>and Mixer, with one branch containing a single Air Terminal that is not yet con-
</p>
<p>nected to any Thermal Zone. The new air handler must be connected to one or more 
</p>
<p>Thermal Zones in order to produce a functional simulation. The quickest way to 
</p>
<p>attach a Thermal Zone is by clicking on either the Zone Splitter or Mixer on the 
</p>
<p>demand side, then selecting the Thermal Zones to attach using the inspector inter-
</p>
<p>face on the right as shown in Fig.&nbsp;4.12.
</p>
<p>Fig. 4.12 Connecting Thermal Zones to an Air handler
</p>
<p>Fig. 4.13 Two Thermal Zones Connected to a Single Air Handler
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>115
</p>
<p>After checking Thermal Zones 1 and 2, the Air Loop updates to reflect two 
</p>
<p>demand side branches, each containing a VAV Air Terminal serving a Thermal Zone 
</p>
<p>as shown in Fig.&nbsp;4.13.
</p>
<p>It is also possible to add a Thermal Zone by selecting a Thermal Zone from the 
</p>
<p> Sub-Tab and dragging it either to the region labeled &ldquo;Drag From Library,&rdquo; or 
</p>
<p>on a Node immediately after an Air Terminal.
</p>
<p>Chapter 5 will go into greater detail regarding the OpenStudio HVAC interface, 
</p>
<p>but let&rsquo;s take a moment to describe a few rudimentary features at this point. Most 
</p>
<p>importantly, all of the components shown in the HVAC interface may be inspected. 
</p>
<p>Clicking an icon will usually present an Object&rsquo;s properties in the right-hand side 
</p>
<p>of the window. As with Zone Equipment, these include all Object parameters as 
</p>
<p>well as the properties of any children the component may include. For example, 
</p>
<p>clicking on the VAV Air Terminal brings up the Air Terminal properties, as well as 
</p>
<p>the properties for the hot water heating coil contained inside the terminal as shown 
</p>
<p>in Fig.&nbsp;4.14. Some Objects offer more options next to the  Sub-Tab, which con-
</p>
<p>tains most general Properties. These may include a  Sub-Tab, which summarizes 
</p>
<p>component &ldquo;linkages&rdquo; with other Loops, and a  Sub-Tab, which contains 
</p>
<p>controls- related options. Additional Sub-Tabs will appear when the selected 
</p>
<p>Object supports them.
</p>
<p>Nodes are the little  symbols scattered around a Loop and are used to separate 
</p>
<p>all of the Objects contained within Loops. This is an important concept in 
</p>
<p>OpenStudio, because Nodes represent points where physical fluid properties, such 
</p>
<p>as temperature, humidity ratio, and flow rate are known and can be reported. Nodes 
</p>
<p>may also be associated with control points. In Chap. 5 we will discuss how control 
</p>
<p>setpoints may be applied to Nodes in order to drive supply components to follow 
</p>
<p>constant or scheduled performance targets.
</p>
<p>Fig. 4.14 Examining the Properties of an Air Terminal
</p>
<p>4.4 HVAC System Templates</p>
<p/>
</div>
<div class="page"><p/>
<p>116
</p>
<p>Managing Nodes and Connections between Objects can be a very tedious and 
</p>
<p>error prone task when using EnergyPlus directly, however OpenStudio&rsquo;s Object 
</p>
<p>model helps take care of this tedious work automatically. Objects may be 
</p>
<p>removed by clicking on their corresponding  Button. New Objects may be 
</p>
<p>added by dragging them from the  on the right side of the interface and drop-
</p>
<p>ping them on to existing Nodes. In either case, OpenStudio adds and remove 
</p>
<p>Nodes as needed so that the user does not need to worry about maintaining Node 
</p>
<p>Connections manually.
</p>
<p>Air and Plant Loops are shown individually in OpenStudio and may be browsed 
</p>
<p>using the system selector field at the top of the window. OpenStudio also makes it 
</p>
<p>easy to navigate between interconnected Loops. In this example, the air handler is 
</p>
<p>connected to chilled- and hot-water plants through chilled- and hot-water coils 
</p>
<p>respectively. To navigate to these associated Plant Loops, simply click on either of 
</p>
<p>the smaller Node icons directly above or below a coil as shown in Fig.&nbsp;4.15.
</p>
<p>The interface immediately switches to the correct Plant Loop shown in Fig.&nbsp;4.16. 
</p>
<p>The chilled water Plant Loop contains the same coil shown on the supply side of the 
</p>
<p>Air Loop. However, from the Plant Loop&rsquo;s perspective the coil appears on the 
</p>
<p>demand side of the chilled water Plant. The chilled water coil&rsquo;s Node links may be 
</p>
<p>used to navigate back to the Air Loop from the Plant Loop.
</p>
<p>The Plant Loop contains a pump feeding a single chiller on the supply side of the 
</p>
<p>chilled water plant. Note that the chiller contains its own Nodes above and below 
</p>
<p>the chiller icon that may be used to navigate to the chiller&rsquo;s associated condenser 
</p>
<p>Fig. 4.15 Clicking a Chilled Water Coil Node to Navigate to the Associated Plant Loop
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>117
</p>
<p>Fig. 4.16 Plant Loop Serving the Air Handler Chilled Water Coil
</p>
<p>Fig. 4.17 Condenser Loop Serving the Chilled Water Plant
</p>
<p>4.4 HVAC System Templates</p>
<p/>
</div>
<div class="page"><p/>
<p>118
</p>
<p>Plant Loop (Fig.&nbsp;4.17). In this case, the chiller is water-cooled and is modeled as a 
</p>
<p>demand component on the condenser system. Since one Loop&rsquo;s supply objects may 
</p>
<p>often be part of another Plant Loop&rsquo;s demand, Node links are a helpful navigation 
</p>
<p>aid in traversing complex HVAC system topologies.
</p>
<p>4.5  Auto-Sizing HVAC Systems
</p>
<p>HVAC systems and components in OpenStudio are &ldquo;Autosized&rdquo; by default. This 
</p>
<p>means that equipment flow rates, heating and cooling capacities, and other capacity 
</p>
<p>related characteristics are automatically determined by the EnergyPlus simulation 
</p>
<p>engine using sizing algorithms that are driven by the load originating from the 
</p>
<p>Thermal Zones.
</p>
<p>The sizing algorithm is a cascading process. First, a load calculation is performed 
</p>
<p>for each Thermal Zone based on extreme weather conditions. This process is similar 
</p>
<p>to the &ldquo;Ideal Air Load&rdquo; method we explored in the previous Chapter, and identifies 
</p>
<p>the energy required to maintain a cooling or heating setpoint under peak loading 
</p>
<p>conditions. All of the Thermal Zone Loads associated with HVAC systems are added 
</p>
<p>together to arrive at a total system Load. Individual component sizes are computed 
</p>
<p>using that total Load as a starting point. For forced air-driven system involving fans, 
</p>
<p>system sizing begins by calculating a supply airflow rate based on the Thermal Zone 
</p>
<p>Load calculation and an assumed supply air temperature. In the case of multi-Zone 
</p>
<p>systems, the design supply airflow rates for each Thermal Zone are added together 
</p>
<p>to determine the total system supply airflow rate and supply fan capacity. Finally, the 
</p>
<p>computed airflow rates are used along with design heating and cooling temperatures 
</p>
<p>in order to size the individual heating and cooling coil capacities.
</p>
<p>This is an extreme generalization of the sizing process. The actual process used 
</p>
<p>by EnergyPlus is sufficiently sophisticated3 to handle the breadth of system configu-
</p>
<p>rations that may be modeled. Nevertheless, it is useful to have a general understand-
</p>
<p>ing about how the process works. The most important takeaway is that HVAC 
</p>
<p>components ultimately have specific capacities in the OpenStudio simulation that 
</p>
<p>are determined by EnergyPlus&rsquo; auto-sizing algorithms subject to extreme weather 
</p>
<p>conditions and internal loads.
</p>
<p>Auto-sized values do not necessarily correspond to realistic systems that are 
</p>
<p>available for purchase. Sizing calculations may result in system components that are 
</p>
<p>unrealistically small or large compared to what are available on the market. In many 
</p>
<p>cases, these artificial sizes can be the result of simplifications in the Model, particu-
</p>
<p>larly around Zoning assumptions. Lastly, in most cases HVAC components may be 
</p>
<p>explicitly &ldquo;hard-sized&rdquo; to fixed values using available Object parameters.
</p>
<p>3 Refer to the EnergyPlus Engineering Reference for discussion of the sizing process. http://biglad-
</p>
<p>dersoftware.com/epx/docs/8-7/engineering-reference/.
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/</a></div>
</div>
<div class="page"><p/>
<p>119
</p>
<p>4.5.1  Design Day Files
</p>
<p>As mentioned in Chap. 2, DDY weather files describe the extreme weather condi-
</p>
<p>tions used for auto-sizing. Any OpenStudio Model that contains auto-sized HVAC 
</p>
<p>systems must have at least one Design Day input in order to simulate without error. 
</p>
<p>In practice, almost all OpenStudio Models that contain HVAC have at least one auto-
</p>
<p>sized property and therefore must have Design Day inputs defined. Recall from 
</p>
<p>Chap. 2 that design day DDY files are imported using the Site ( ) Tab (Fig.&nbsp;4.18).
</p>
<p>A DDY file typically contains several different design points for heating and 
</p>
<p>cooling. OpenStudio imports only the subset corresponding to the 0.4% Summer 
</p>
<p>design day point, and the 99.6% Winter design day. This means that in the Summer 
</p>
<p>the design temperature will only be exceeded 0.4% of the time, and in the Winter the 
</p>
<p>temperature will remain above the design temperature for 99.6% of the hours in the 
</p>
<p>year. After importing a DDY file, the Site ( ) Tab updates to show the imported 
</p>
<p>design days (Fig.&nbsp; 4.19). It is possible to add and remove design days manually, 
</p>
<p>using the  and  Buttons.
</p>
<p>4.6  Checkpoint Five: Adding a&nbsp;Template HVAC System 
</p>
<p>to&nbsp;a&nbsp;School Model
</p>
<p>In this exercise, we will remove the Ideal Air Loads we added to our primary school 
</p>
<p>Model and replace them with a proper HVAC system. To begin the exercise:
</p>
<p> 1. Open your Primary School Model (or a copy of it) from Checkpoint Four.
</p>
<p>Fig. 4.18 Adding Design Days from a DDY File
</p>
<p>4.6 Checkpoint Five: Adding a&nbsp;Template HVAC System to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>120
</p>
<p> 2. Use Save As to make a copy of the Model called MyPrimarySchoolHVAC.osm.
</p>
<p> 3. Navigate to the ( ) Tab and import design days from USA_CO_Golden- 
</p>
<p>NREL.724666_TMY3.ddy.
</p>
<p> 4. Navigate to the Thermal Zones ( ) Tab, check all of the Zones, and delete them 
</p>
<p>with the  Button since we are going to rezone the Model.
</p>
<p> 5. Save your Model.
</p>
<p>Begin by Zoning the school Model as shown in Fig.&nbsp;4.20. The Model should 
</p>
<p>include four Thermal Zones named Thermal Zone 1, Thermal Zone 2, Thermal 
</p>
<p>Zone 3, and Thermal Zone 4. Feel free to perform this task with the floor plan editor 
</p>
<p>or in the Thermal Zones ( ) Tab, whichever you are most comfortable using.
</p>
<p>Save your work. We also recommend you make a spare copy of the Model at this 
</p>
<p>point, perhaps called MyPrimarySchoolZoned.osm for use in the next Chapter.
</p>
<p>Once saved, proceed to the HVAC ( ) Tab. Use the  Button to add four 
</p>
<p>&ldquo;Packaged Rooftop VAV with Reheat&rdquo; systems using the available templates. Then 
</p>
<p>add one Thermal Zone to each of the four Air Loops as shown in Fig.&nbsp;4.21. You can 
</p>
<p>switch between the four Air Loops using the system selector at the top of the win-
</p>
<p>dow. By default, the Air Loops are named VAV with Reheat, VAV with Reheat 1, 
</p>
<p>VAV with Reheat 2, and VAV with Reheat 3.
</p>
<p>Take a few moments to explore some of the Objects that have been automatically 
</p>
<p>added to the Air Loops for you. You may also wish to use the available Node links 
</p>
<p>to examine the Plant Loops connected to the hot and cold coils as well. For example, 
</p>
<p>the hot water Plant loop for Thermal Zone One&rsquo;s air handler is shown in Fig.&nbsp;4.22. 
</p>
<p>Note that this Plant Loop has two hot water coils on the demand side. Does this 
</p>
<p>make sense? Can you locate the second coil located in the Air Loop?
</p>
<p>Fig. 4.19 Design Days Added to an OpenStudio Model
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>121
</p>
<p>Run the simulation and examine the OpenStudio Results report. We&rsquo;ve looked at 
</p>
<p>the monthly overview and Thermal Zone overview sections of this report in Chap. 
</p>
<p>3. The district system heating and cooling energy used by the Ideal Air Loads in 
</p>
<p>Checkpoint Four have now been replaced with increased electricity and gas use 
</p>
<p>(Fig.&nbsp;4.23). The Thermal Zone condition portion of the report shown in Fig.&nbsp;4.24 
</p>
<p>indicates that the system is doing a reasonably good job of maintaining the setpoint 
</p>
<p>temperatures throughout the year.
</p>
<p>Along with the Thermal Zone overview shown in Fig.&nbsp;4.25, additional sections 
</p>
<p>of the report are now populated with details related to our HVAC systems (Fig.&nbsp;4.26).
</p>
<p>Fig. 4.20 Primary School 
</p>
<p>Model with Four Thermal 
</p>
<p>Zones
</p>
<p>Fig. 4.21 Adding Thermal Zone One to an Air Handler
</p>
<p>4.6 Checkpoint Five: Adding a&nbsp;Template HVAC System to&nbsp;a&nbsp;School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>122
</p>
<p>Fig. 4.22 Hot Water Loop Serving Air Handler for Thermal Zone One
</p>
<p>Fig. 4.23 Monthly Electricity and Gas Consumption for School with Four Packaged VAV Units
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>123
</p>
<p>The EnergyPlus standard report is also full of insightful information. For exam-
</p>
<p>ple, the Comfort and Setpoint Not Met Summary shown in Fig.&nbsp;4.27 corroborates 
</p>
<p>what we noted in Fig.&nbsp;4.25 above.
</p>
<p>Also, note a link in the report&rsquo;s table of contents summarizing &ldquo;component siz-
</p>
<p>ing.&rdquo; These are results from EnergyPlus&rsquo; auto-sizing algorithm and appear in 
</p>
<p>Fig.&nbsp;4.28 below. The values in these tables correspond to the calculated Thermal 
</p>
<p>Zone Loads, as well as information pertaining to the capacities of each HVAC com-
</p>
<p>ponent found in the Model. If components were hard-sized then the component 
</p>
<p>sizing summary will echo out the Equipment capacities provided by the user.
</p>
<p>As we will see in Chap. 5, we have just scratched the surface of OpenStudio and 
</p>
<p>EnergyPlus capability to model HVAC systems.
</p>
<p>Fig. 4.24 Zone Conditions for School with Four Packaged VAV Units
</p>
<p>Fig. 4.25 Zone Overview for School Divided into Four Thermal Zones
</p>
<p>4.6 Checkpoint Five: Adding a Template HVAC System to a School Model</p>
<p/>
</div>
<div class="page"><p/>
<p>124
</p>
<p>4.7  Additional Exercises
</p>
<p> 1. Recommended additional exercises involving the Checkpoint Five Model 
</p>
<p>include further study of template HVAC systems and the impact of zoning on 
</p>
<p>system performance.
</p>
<p>&bull; Be sure to keep a &ldquo;clean&rdquo; copy of the Checkpoint Five model before pro-
</p>
<p>ceeding with these activities.
</p>
<p>&bull; Replacement of the &ldquo;Packaged Rooftop VAV with Reheat&rdquo; template system
</p>
<p>&bull; Remove the existing air and plant loops and replace them with new template 
</p>
<p>systems
</p>
<p>&bull; Reattach the original zones to the new air loop(s)
</p>
<p>&bull; Visually inspect the resulting air and plant loops noting the differences
</p>
<p>&bull; Run the new models and compare their performance with Checkpoint Five.
</p>
<p>Fig. 4.26 Air and Plant Loop Detail for the Revised School Model
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>125
</p>
<p>Fig. 4.27 EnergyPlus Unmet Hours Report
</p>
<p>Fig. 4.28 EnergyPlus Auto-Sizing Report
</p>
<p>4.7 Additional Exercises</p>
<p/>
</div>
<div class="page"><p/>
<p>126
</p>
<p>&bull; Rezoning of the Model
</p>
<p>&bull; Modify the Thermal Zones from the original Model and compare the perfor-
</p>
<p>mance difference with:
</p>
<p>&bull; Fewer Thermal Zones,
</p>
<p>&bull; More Thermal Zones, and
</p>
<p>&bull; Different Space groupings in the Thermal Zones
</p>
<p>&bull; What are the impacts on energy usage?
</p>
<p>&bull; What happens to system sizing?
</p>
<p>&bull; Do the number of unmet hours change?
</p>
<p> 2. Use the &ldquo;Additional Exercises&rdquo; Model you created in Chap. 3.
</p>
<p>&bull; Attempt to zone your Model as accurately as possible by:
</p>
<p>&bull; Interviewing your building&rsquo;s facility manager to understand how the building 
</p>
<p>is zoned
</p>
<p>&bull; Identifying individual thermostats located within your building&rsquo;s spaces and 
</p>
<p>grouping Spaces within the Model based on their locations.
</p>
<p>&bull; Apply one or more template HVAC systems to your Model
</p>
<p>&bull; Compare the performance of the systems you&rsquo;ve selected
</p>
<p>&bull; Modify your Thermal Zoning assumptions and see how performance changes
</p>
<p>References
</p>
<p>ANSI/ASHRAE/IES Standard 90.1-2016 energy standard for buildings except low-rise residential 
</p>
<p>buildings, ASHRAE, 2016
</p>
<p>http://bigladdersoftware.com/epx/docs/8-7/engineering-reference
</p>
<p>4 Introduction to&nbsp;HVAC Systems</p>
<p/>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference</a></div>
</div>
<div class="page"><p/>
<p>127&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_5
</p>
<p>Chapter 5
</p>
<p>Advanced HVAC Topics
</p>
<p>5.1  Introduction
</p>
<p>As described in Chap. 4, there are three main categories of HVAC Equipment in 
</p>
<p>EnergyPlus: Plant Loops, Air Loops, and Zone Equipment. This chapter goes into 
</p>
<p>more detail for each of these categories, describing their configuration, sizing, con-
</p>
<p>trol, and operation. HVAC is a complex topic, and for that reason this chapter only 
</p>
<p>covers the most critical concepts and topics. The authors suggest reading the 
</p>
<p>EnergyPlus Engineering Reference as a supplement to this chapter to learn more.
</p>
<p>5.2  Air Loops
</p>
<p>Recall that Air Loop are a series of Objects representing HVAC systems that condi-
</p>
<p>tions air, which is provided to Thermal Zones for heating, cooling, and ventilation.
</p>
<p>5.2.1  Air Loop Configuration
</p>
<p>In OpenStudio, an Air Loop is represented by the diagram shown in Fig.&nbsp;5.1. Air 
</p>
<p>always flows in the directions shown by the red arrows. An Air Loop, assuming it 
</p>
<p>has an outdoor air system with an outdoor air intake and exhaust, is an open system, 
</p>
<p>where some amount of the return air is exhausted and replaced with fresh outdoor 
</p>
<p>air for ventilation.
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_5) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_5&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_5&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>128
</p>
<p>As shown in Fig.&nbsp;5.2, an Air Loop can first be broken into two pieces, supply and 
</p>
<p>demand sides.
</p>
<p>5.2.1.1  Air Loop Supply Side
</p>
<p>The supply side of an Air Loop is responsible for:
</p>
<p>&bull; Consuming air returning from Thermal Zones via the supply inlet Node,
</p>
<p>&bull; Exhausting some of that air to an outdoor air system,
</p>
<p>&bull; Consuming replacement air via an outdoor air system,
</p>
<p>&bull; Heating, cooling, and humidifying it to the correct supply air conditions, and
</p>
<p>&bull; Supplying it to the Thermal Zones via a supply outlet Node.
</p>
<p>Fig. 5.1 Flow direction in 
</p>
<p>an empty Air Loop
</p>
<p>Fig. 5.2 Supply and demand sides of an empty Air Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>129
</p>
<p>An empty supply side portion of an Air Loop is shown in Fig.&nbsp;5.3. Supply side 
</p>
<p>components may be added to Loop between the supply inlet and outlet Nodes. 
</p>
<p>Outdoor air system components may be added just below the outdoor air exhaust 
</p>
<p>and intake Nodes.
</p>
<p>In EnergyPlus, an Air Loop must contain at least one fan on the supply side but 
</p>
<p>may include more than one. Figure&nbsp;5.4 illustrates three typical locations for a fan. A 
</p>
<p>fan positioned before the outdoor air system is commonly called a return fan. A fan 
</p>
<p>positioned adjacent to the outdoor air system exhaust Node is frequently referred to 
</p>
<p>as an exhaust or relief fan. A fan positioned downstream of the outdoor air system 
</p>
<p>is often called a supply fan.
</p>
<p>In EnergyPlus, unlike in real HVAC systems, fans do not drive airflow around the 
</p>
<p>loop. Instead fan Objects utilize the amount of air flowing through them along with 
</p>
<p>prescribed pressure drop and efficiency curves to calculate the energy that would be 
</p>
<p>consumed to move that much air. Supply and return fans must accommodate the full 
</p>
<p>flow rate of the Air Loop, while exhaust fans only experience the exhaust air flow 
</p>
<p>rate. This may seem an odd role for EnergyPlus fan Objects but will become more 
</p>
<p>clear when we discuss how air flow rates are calculated in Sects. 5.2.2 and 5.2.4.
</p>
<p>Besides fans, common supply side Equipment includes:
</p>
<p>&bull; Outdoor air systems required for systems with ventilation,
</p>
<p>&bull; Direct Expansion (DX) or chilled water cooling coils, and
</p>
<p>&bull; Electric resistance, gas, or hot water heating coils.
</p>
<p>Fig. 5.3 Empty supply side Air Loop detail
</p>
<p>Fig. 5.4 Typical fan 
</p>
<p>locations within an Air 
</p>
<p>Loop
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>130
</p>
<p>To add a piece of Equipment to the supply side, first, select the  Sub-Tab in the 
</p>
<p>right-hand pane, then drag and drop Equipment onto a Node (Fig.&nbsp;5.5). Not every-
</p>
<p>thing in the Library may be added to an Air Loop. OpenStudio attempts to help the 
</p>
<p>user avoid nonsensical component placement by displaying a warning dialog and 
</p>
<p>refusing to add the Object. This prevents the creation of invalid Air Loops that 
</p>
<p>EnergyPlus cannot simulate.
</p>
<p>Recall from Chap. 4 that Objects such as chilled water cooling coils and hot 
</p>
<p>water heating coils must be connected to Plant Loops. For these components, Plant 
</p>
<p>Loops supply the hot or cold water that the coils require for heat transfer. To connect 
</p>
<p>a coil to a Plant Loop, first click on the coil Object on the diagram to select it. Next, 
</p>
<p>click the  Sub-Tab under the  Sub-Tab and check the box to select a Plant Loop. 
</p>
<p>Once a coil is connected, a circle will appear above and below the coil. In Fig.&nbsp;5.6, 
</p>
<p>the Chilled Water Coil (blue) is connected to the Plant Loop named &ldquo;Chilled Water 
</p>
<p>Fig. 5.5 Adding supply side Equipment in OpenStudio
</p>
<p>Fig. 5.6 Connecting a coil to a Plant Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>131
</p>
<p>Loop,&rdquo; while the Hot Water Coil (red) is not yet connected, as indicated by the 
</p>
<p>absence of circles above and below the coil icon.
</p>
<p>Creating Plant Loop linkages is just one of many required steps that the template 
</p>
<p>systems from Chap. 4 performed for us automatically. However, understanding how 
</p>
<p>such connections are made from Air Loop supply side components is important to 
</p>
<p>understand when creating systems that may not be represented by an HVAC 
</p>
<p>template.
</p>
<p>5.2.1.2  Air Loop Demand Side
</p>
<p>The demand side of an Air Loop is responsible for:
</p>
<p>&bull; Consuming conditioned air from the supply side via the demand inlet Node,
</p>
<p>&bull; Distributing it through one or more Thermal Zones, and
</p>
<p>&bull; Returning it to the supply side via the demand outlet Node.
</p>
<p>As shown in Fig.&nbsp;5.7, the demand side of an Air Loop includes a splitter and a 
</p>
<p>mixer. The splitter distributes the incoming supply airflow through multiple 
</p>
<p>branches. The mixer recombines the flow from the branches prior to returning it to 
</p>
<p>the supply side for reconditioning.
</p>
<p>Air from the Air Loop is supplied to Thermal Zones via Air Terminal Objects. An 
</p>
<p>Air Terminal may be as simple as an air diffuser or more complex like a VAV termi-
</p>
<p>nal with integrated reheat. Air terminals are added to Air Loops like other compo-
</p>
<p>nents by dragging them from the  Sub-Tab into the &ldquo;Drag from Library&rdquo; drop 
</p>
<p>zone. Each Thermal Zone must be attached via an Air Terminal or the simulation 
</p>
<p>will not run.
</p>
<p>Recall from Chap. 4 that Thermal Zones may be added by dragging and dropping 
</p>
<p>from Thermal Zone Objects from the  Sub-Tab or by clicking on the demand 
</p>
<p>splitter or mixer. The latter method allows the user to check boxes next to the 
</p>
<p>Thermal Zones, quickly adding several at the same time (Fig.&nbsp;5.8). As an added 
</p>
<p>convenience, OpenStudio automatically pairs additional Thermal Zones with the 
</p>
<p>same Air Terminal used with the first Thermal Zone. When adding multiple Thermal 
</p>
<p>Zones, best practice is to attach the first Thermal Zone and Air Terminal pair, then 
</p>
<p>check the boxes to attach the rest of the Zones.
</p>
<p>Fig. 5.7 Empty demand side Air Loop detail
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>132
</p>
<p>5.2.2  Sizing Air Loops
</p>
<p>Recall our high-level discussion of HVAC autosizing in Chap. 4. The sizing of Air 
</p>
<p>Loops begins with the determination of heating and cooling loads for associated 
</p>
<p>Thermal Zones and temperature setpoints for extreme days. One detail we glossed 
</p>
<p>over in Sect. 4.5 was the specification of Thermal Zone sizing parameters. These are 
</p>
<p>defined on the Thermal Zones ( ) Tab, as shown in Fig.&nbsp;5.9 below and specify key 
</p>
<p>supply air conditions for the Air Terminals serving each Thermal Zone. Knowing 
</p>
<p>the Thermal Zone supply air conditions, EnergyPlus can determine the airflow rates 
</p>
<p>required to achieve each Thermal Zone&rsquo;s setpoint for the prevailing thermal loads.
</p>
<p>The supply side airflow that must be accommodated by an Air Loop is the sum 
</p>
<p>of all individual Thermal Zone flow rates. This requisite airflow is considered along 
</p>
<p>with the outdoor air (OA) ventilation requirements and the supply air sizing design 
</p>
<p>targets. The sizing parameters associated with a particular Air Loop may be 
</p>
<p>accessed by clicking on the dashed supply/demand line for the Loop shown in 
</p>
<p>Fig.&nbsp;5.10. These sizing parameters govern the Air Loop design supply air condi-
</p>
<p>tions, meaning the conditions delivered by the system before the Air Terminals, 
</p>
<p>sometimes referred to as the deck temperature. For many types of systems, the deck 
</p>
<p>temperature will be different than the Thermal Zone supply air temperature, 
</p>
<p>because the Zone terminal units provide further heating or cooling in order to trim 
</p>
<p>to each Thermal Zone&rsquo;s specific load.
</p>
<p>Fig. 5.8 Connecting demand side Air Loop with two Thermal Zones and Simple Air Diffusers
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>133
</p>
<p>Fig. 5.9 Thermal Zone design supply air sizing parameters
</p>
<p>Fig. 5.10 Specifying sizing parameters for a particular Air Loop
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>134
</p>
<p>It is important to note that these parameters only govern how the system is sized, 
</p>
<p>and not how it will actually operate during the course of the simulation. The sizing 
</p>
<p>parameters specify the design heating and cooling supply air temperature, however 
</p>
<p>there are separate input parameters that govern the actual supply temperature during 
</p>
<p>operation. The input Objects and parameters governing the supply air temperature 
</p>
<p>during operation will be described in the forthcoming Air Loop control discussion. 
</p>
<p>For now, note that the parameters governing sizing are distinct from those control-
</p>
<p>ling operation and if there are large discrepancies between the two sets of inputs, 
</p>
<p>then the system will be incorrectly sized for the requested operating range.
</p>
<p>Another important aspect of sizing Air Loops is setting available parameters for 
</p>
<p>Air Terminals attached to Thermal Zones. Parameters such as minimum damper 
</p>
<p>position of VAV terminals can impact the sizing of airflow rates. When in doubt 
</p>
<p>about the potential impact of a component parameter on the autosizing process, 
</p>
<p>refer to the EnergyPlus Input Output Reference for more information.
</p>
<p>5.2.2.1  Outdoor Air (OA) Sizing
</p>
<p>In addition to the determination of heating and cooling airflow requirements, the 
</p>
<p>sizing of an Air Loop involves the determination of minimum OA requirements to 
</p>
<p>provide sufficient ventilation for occupant health. OA sizing starts with the Spaces 
</p>
<p>inside the Thermal Zones attached to the Air Loop. Recall from Chap. 3 that each 
</p>
<p>Space may have a design specification OA Object assigned to it. This Object con-
</p>
<p>tains minimum OA requirements for the Space, which may be specified on a per 
</p>
<p>person or per area basis, in terms of air changes per hour, or as a specific flow rate. 
</p>
<p>At the beginning of a simulation, these requirements are multiplied by the appropri-
</p>
<p>ate occupancy level, area, volume, etc. and summed to determine the minimum OA 
</p>
<p>flow rate for each Space. The values for all Spaces in a Thermal Zone are summed 
</p>
<p>to determine the minimum OA flow rate that supply-side Equipment must condition 
</p>
<p>to the sizing supply air design targets.
</p>
<p>Once the minimum OA flow rates for all Thermal Zones are known, the sizing of 
</p>
<p>the minimum OA flow rate for the Air Loop can happen. Scrolling down further in 
</p>
<p>Fig.&nbsp;5.10 reveals that the algorithm used to compute OA sizing parameters may be 
</p>
<p>specified by the user as shown in Fig.&nbsp;5.11. If this field is set to &ldquo;ZoneSum,&rdquo; then the 
</p>
<p>minimum OA flow rates for all Thermal Zones attached to the Air Loop are summed 
</p>
<p>to create the minimum OA flow rate for the Air Loop. If this field is set to 
</p>
<p>&ldquo;VentilationRateProcedure,&rdquo; then an algorithm defined in ASHRAE 62.11 is used. 
</p>
<p>Broadly speaking, this algorithm takes into account system diversity and other Zone 
</p>
<p>and system characteristics to determine the minimum value. This option is generally 
</p>
<p>used for multi-zone VAV Air Loops to ensure that all Zones on the Air Loop receive 
</p>
<p>at least the minimum OA required, even during the worst-case conditions.
</p>
<p>1 ANSI/ASHRAE (2016).
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>135
</p>
<p>5.2.3  Air Loop Control
</p>
<p>5.2.3.1  Air Loop Temperature Control
</p>
<p>Air Loops are primarily controlled by setting the temperature (and sometimes 
</p>
<p>humidity) of the supply air. This is accomplished using Setpoint Managers. These 
</p>
<p>objects allow a user to define a temperature or humidity setpoint on a particular 
</p>
<p>Node in the system. Some types of common Setpoint Managers are:
</p>
<p>Scheduled: The setpoint follows a schedule, which may be set to a constant tem-
</p>
<p>perature. This method is most commonly used on VAV systems where the system 
</p>
<p>is always supplying cool air to the terminals. In these systems, heating is per-
</p>
<p>formed by reheat coils integrated directly in the Air Terminals on a Zone-by- 
</p>
<p>Zone basis.
</p>
<p>Warmest: This approach increases the temperature of cool supply air until it just 
</p>
<p>meets the cooling load of the Zone with the greatest cooling demand. This is also 
</p>
<p>commonly used with VAV systems to model the &ldquo;supply air temperature reset&rdquo; 
</p>
<p>control strategy. For these systems, the control method saves cooling energy 
</p>
<p>while decreasing the use of reheat.
</p>
<p>Fig. 5.11 Specifying Outdoor Air Sizing Algorithm for a particular Air Loop
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>136
</p>
<p>SingleZone Reheat: This method adjusts the setpoint to whatever temperature is 
</p>
<p>required to meet the Zone heating or cooling load. It is typically used on Air 
</p>
<p>Loops that serve a single Thermal Zone and the Air Loop is designed to supply 
</p>
<p>hot or cold air as necessary.
</p>
<p>The most common configuration, shown in Fig.&nbsp;5.12, places a single Setpoint 
</p>
<p>Manager on the supply outlet Node. In this case, all of the Equipment upstream of 
</p>
<p>the manager works to meet the setpoint.
</p>
<p>Behind the scenes, EnergyPlus actually requires each component to have a set-
</p>
<p>point established for its outlet Node. OpenStudio does this automatically by assign-
</p>
<p>ing the appropriate Setpoint Managers to all upstream Nodes, while keeping the 
</p>
<p>diagram free of this additional, but necessary clutter. Figure&nbsp;5.13 illustrates what 
</p>
<p>OpenStudio is doing behind the scenes, and is shown here for completeness. The 
</p>
<p>user is not required to add these additional Setpoint Managers in the user interface.
</p>
<p>If a user does not want this default behavior, they may explicitly attach Setpoint 
</p>
<p>Managers to the outlet Node of any supply side components. As an example, in 
</p>
<p>Fig.&nbsp; 5.14 the user elected to set a cooling coil outlet temperature to 50&nbsp; &deg;F for 
</p>
<p>Fig. 5.12 Setpoint Manager on supply outlet Node
</p>
<p>Fig. 5.13 Default OpenStudio Setpoint Manager propagation
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>137
</p>
<p> dehumidification purposes. A manager downstream of the fan could then set the 
</p>
<p>heating coil and fan outlet to 60&nbsp;&deg;F to avoid condensation problems on uninsulated 
</p>
<p>ductwork leading to the Air Terminals.
</p>
<p>5.2.3.2  Air Loop Availability Control
</p>
<p>So far, we have considered Setpoint Managers, which are primarily used to control 
</p>
<p>conditions at Nodes throughout an Air Loop. OpenStudio also allows us to specify 
</p>
<p>when control systems may operate. As shown in Fig.&nbsp;5.15, a  Button allows us 
</p>
<p>to specify control characteristics for our HVAC systems.
</p>
<p>The &ldquo;HVAC Operation Schedule&rdquo; field identifies a discrete (0/1) Schedule that 
</p>
<p>determines when the selected Air Loop is allowed to operate. During times when 
</p>
<p>this Schedule contains a one, the Air Loop operates normally. When the Schedule 
</p>
<p>outputs a zero, Air Loop operation is determined by the &ldquo;Use Night Cycle&rdquo; field. 
</p>
<p>This field may be used to specify one of three operating modes whenever the 
</p>
<p>Schedule evaluates to zero:
</p>
<p>Follow the HVAC Operation Schedule: The Loop will not operate.
</p>
<p>Cycle on Full System if Heating or Cooling Required: The Loop only activates 
</p>
<p>for 30&nbsp;min when the Thermal Zone temperatures get too hot or too cold.
</p>
<p>Cycle on Zone Terminal Units if Heating or Cooling Required: Any fan- powered 
</p>
<p>Air Terminals attached to the Air Loop will run when the Thermal Zone tempera-
</p>
<p>tures get too hot or too cold, but the rest of the Air Loop will not.
</p>
<p>5.2.3.3  Outdoor Air Control
</p>
<p>Air Loops with an OA system contain three additional control considerations. The 
</p>
<p>first is the Schedule when OA is supplied, and is made available when the OA 
</p>
<p>Object in an Air Loop is selected as shown in Fig.&nbsp;5.16. This is determined via the 
</p>
<p>Fig. 5.14 Adding Explicit Setpoint Managers for each supply side component
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>138
</p>
<p>discrete Schedule listed in the &ldquo;Minimum Outdoor Air Schedule Name&rdquo; field shown 
</p>
<p>in the Figure. When this Schedule outputs a zero and the Air Loop is running, OA is 
</p>
<p>not supplied. When this Schedule is set to one and the Air Loop is running, OA is 
</p>
<p>supplied.
</p>
<p>HVAC systems with gravity dampers generally have OA supplied whenever the 
</p>
<p>system is operating. These systems should use an &ldquo;Always On Discrete&rdquo; schedule in 
</p>
<p>this field. HVAC systems that have motorized dampers generally close the OA 
</p>
<p>intake at night when the building is unoccupied. These systems may also use the 
</p>
<p>&ldquo;HVAC Operation Schedule&rdquo; described above to turn off OA at night, even if the 
</p>
<p>night cycle mode is set to manage heating or cooling loads.
</p>
<p>The second OA control option relates to economizer operation. Economizers are 
</p>
<p>devices that allow cool OA to be drawn into the system to provide free cooling when 
</p>
<p>OA conditions are favorable. The type of economizer and associated settings may 
</p>
<p>be found in the Controller OA Object, as shown in Fig.&nbsp;5.16.
</p>
<p>A third control option specifies whether the OA system uses demand-controlled 
</p>
<p>ventilation (DCV). This is controlled via a switch on the controls page (Fig.&nbsp;5.15). 
</p>
<p>DCV is a control strategy that involves monitoring occupancy levels, typically via a 
</p>
<p>proxy like CO2, and reduces OA below the design flow rate when the occupancy 
</p>
<p>levels are lower.
</p>
<p>Fig. 5.15 Specifying Air Loop availability control
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>139
</p>
<p>5.2.4  Air Loop Simulation Process
</p>
<p>The overall simulation process for each time step may be summarized as follows.
</p>
<p> 1. EnergyPlus calculates the heating or cooling load in the Thermal Zone.
</p>
<p> 2. The Air Terminals connected to the Thermal Zone convert this load to an airflow 
</p>
<p>rate given the temperature of air set by the Zone sizing parameters.
</p>
<p>&bull; This is critically important and deserves reiteration in bold text: the airflow 
</p>
<p>rate in an Air Loop is driven by the Air Terminals. The parameters of these 
</p>
<p>terminals are the first place to check when understanding flow rate behavior.
</p>
<p> 3. Once the flow rates for each terminal are determined, they are summed and the 
</p>
<p>total request is passed to the Air Loop itself.
</p>
<p>&bull; If Air Loop parameters limit the total flow rate below this amount, the Air 
</p>
<p>Terminals will be supplied less than they request.
</p>
<p> 4. Two types of fans may be used in an Air Loop: constant volume or variable vol-
</p>
<p>ume. The names are a bit misleading however, because both fans will modulate 
</p>
<p>the airflow rate according to the volume of air requested by the Air Terminals. 
</p>
<p>Remember the Air Terminals are in charge. The primary difference between the 
</p>
<p>constant and variable volume fans is that the variable volume fan contains a fan 
</p>
<p>Fig. 5.16 Specifying OA control for an Air Loop
</p>
<p>5.2 Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>140
</p>
<p>power curve that modifies the fan efficiency as the requested airflow moves away 
</p>
<p>from the design point, while the constant volume fan simulates a constant effi-
</p>
<p>ciency regardless of the airflow rate moving through it.
</p>
<p> 5. After determining the total supply airflow rate, the Air Loop then uses parame-
</p>
<p>ters associated with the OA controller to determine how much of the total Air 
</p>
<p>Loop flow rate will be OA and how much will be return air.
</p>
<p>&bull; If the minimum OA schedule is zero for this time step, no OA is supplied.
</p>
<p>&bull; If the Air Loop needs cooling and the OA conditions are favorable according 
</p>
<p>to the economizer settings, the OA flow rate is calculated to get as close to the 
</p>
<p>setpoint as possible.
</p>
<p>&bull; In the event that no economizing is happening and DCV is enabled, the OA 
</p>
<p>flow rate is calculated by multiplying the per person ventilation requirements 
</p>
<p>for each Zone by the current occupancy level and adding this to the per area 
</p>
<p>and air change per hour requirements.
</p>
<p>&bull; Note that in a multi-Zone system, there is no guarantee that the appropriate 
</p>
<p>amount of OA will reach each Air Terminal, only that the total OA being sup-
</p>
<p>plied to the system meets the total minimum OA requirements of all Thermal 
</p>
<p>Zones at this time step. For this reason, it is prudent to review the time series 
</p>
<p>OA outputs to ensure that Zones are being ventilated adequately at all times. 
</p>
<p>Furthermore, mechanical design engineers and OpenStudio users often try to 
</p>
<p>group similar Zones on the same system, to minimize the potential for over or 
</p>
<p>under ventilation of a particular Zone on a multi-Zone system.
</p>
<p>&bull; If DCV is not enabled, the OA flow rate is the design size OA flow rate for the 
</p>
<p>Air Loop.
</p>
<p> 6. After the return air and OA flow rates are determined, the combined air tempera-
</p>
<p>ture and humidity are determined by mixing these airstreams at their respective 
</p>
<p>temperatures and humidity levels.
</p>
<p> 7. The mixed air is then passed to downstream components, which attempt to con-
</p>
<p>dition the air based on their outlet Node setpoints.
</p>
<p> 8. Hopefully, depending on the capacities of these components and their control 
</p>
<p>settings, the supply outlet Node air achieves the desired design temperature and 
</p>
<p>humidity values before it is passed to the Air Terminals.
</p>
<p>Sometimes the components cannot hit the setpoints they have been assigned. 
</p>
<p>Perhaps the components have been scheduled to be unavailable, or they simply 
</p>
<p>don&rsquo;t have sufficient capacity. In these cases, the supply air may not be hot or cold 
</p>
<p>enough to meet Zone thermal loads. In these cases, air in the Thermal Zones goes 
</p>
<p>above or below the cooling or heating setpoint. Each hour that a Thermal Zone 
</p>
<p>misses its heating or cooling setpoint beyond an allowable tolerance is defined as an 
</p>
<p>unmet hour. Unmet hours are used as a quality metric to determine whether a Model 
</p>
<p>is generally meeting its setpoints. As a rule of thumb, 350 or fewer total unmet 
</p>
<p> heating or cooling hours during occupied times is considered the threshold for 
</p>
<p>acceptable Model behavior.
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>141
</p>
<p>5.3  Plant Loops
</p>
<p>A Plant Loop is a series of objects that represent a hydronic piping system inside of 
</p>
<p>a building. A loop may supply hot water, chilled water, or condenser water to vari-
</p>
<p>ous HVAC components within the building. These components turn this water into 
</p>
<p>a service like heating or cooling for some particular part of the building.
</p>
<p>5.3.1  Plant Loop Configuration
</p>
<p>In OpenStudio, a Plant Loop is represented conceptually by the diagram shown in 
</p>
<p>Fig.&nbsp;5.17. Water always flows in the directions shown by the red arrows. A Plant 
</p>
<p>Loop is a closed system, so water circulates continuously without leaving.
</p>
<p>As shown in Fig.&nbsp;5.18, Plant Loops like Air Loops break down into supply and 
</p>
<p>the demand sides.
</p>
<p>5.3.1.1  Plant Loop Supply Side
</p>
<p>The supply side of a Plant Loop is responsible for:
</p>
<p>Fig. 5.17 Flow direction 
</p>
<p>in an empty Plant Loop
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>142
</p>
<p>&bull; Consuming water returning from building&rsquo;s HVAC Equipment via the supply 
</p>
<p>inlet Node,
</p>
<p>&bull; Heating or cooling it to the correct temperature, and
</p>
<p>&bull; Supplying it to the building&rsquo;s HVAC Equipment via a supply outlet Node.
</p>
<p>An empty supply side portion of a Plant Loop is shown in Fig.&nbsp;5.19. Supply side 
</p>
<p>components may be added to Loop between the supply inlet and outlet Nodes.
</p>
<p>The supply side of a Plant Loop contains a splitter and mixer. The splitter diverts 
</p>
<p>the incoming flow through multiple branches. The mixer recombines the flow from 
</p>
<p>the branches. For example, Fig.&nbsp;5.20 illustrates a Plant Loop with two supply side 
</p>
<p>chillers. A walkthrough of the process is as follows:
</p>
<p> 1. Water enters the supply side at the supply inlet Node and travels to the supply 
</p>
<p>splitter,
</p>
<p> 2. The flow is divided between the two chillers based on the control sequence,
</p>
<p> 3. The chillers cool the water,
</p>
<p> 4. The supply mixer recombines the flows from the chillers, and
</p>
<p> 5. Water exits the supply side at the supply outlet Node.
</p>
<p>Fig. 5.18 Supply and 
</p>
<p>demand sides of an empty 
</p>
<p>Plant Loop
</p>
<p>Fig. 5.19 Empty Plant Loop supply side detail
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>143
</p>
<p>In EnergyPlus, a Plant Loop must contain at least one pump on the supply side. 
</p>
<p>A pump may be located either on the loop itself or on a branch as shown in Fig.&nbsp;5.21. 
</p>
<p>Just as we saw with Air Loop fans, pumps in EnergyPlus do not drive water flow 
</p>
<p>around the loop. Instead, the water flow rate through the pumps is established by the 
</p>
<p>flow requests made by the Equipment on the demand side of the Plant Loop. The 
</p>
<p>pumps merely respond to the requested water flow rate and apply lookups for pres-
</p>
<p>sure drop and efficiency to account for the energy that would be consumed to move 
</p>
<p>that much water. Loop pumps experience the full flow rate of the Plant Loop, but 
</p>
<p>branch pumps only accommodate the flow rate through their particular branch. The 
</p>
<p>Plant Loop simulation process is discussed further in Sect. 5.3.4, and is similar to 
</p>
<p>the process used for Air Loop calculations.
</p>
<p>In addition to pumps, common supply side Equipment may include:
</p>
<p>&bull; Chillers,
</p>
<p>&bull; Boilers,
</p>
<p>&bull; Cooling Towers,
</p>
<p>Fig. 5.20 Plant Loop supply side containing two chillers
</p>
<p>Fig. 5.21 Plant Loop with one Loop and two branch pumps
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>144
</p>
<p>&bull; Fluid Coolers, and
</p>
<p>&bull; Heat Exchangers.
</p>
<p>To add a piece of Equipment to the supply side, select the  Sub-Tab in the 
</p>
<p>right-hand pane, then drag and drop Equipment onto a Node (Fig.&nbsp;5.22) or onto the 
</p>
<p>&ldquo;Drag from Library&rdquo; drop zone. Not everything in the Library may be added to a 
</p>
<p>Plant Loop. OpenStudio attempts to help the user avoid nonsensical component 
</p>
<p>placement by displaying a warning dialog and refusing to add the Object. This pre-
</p>
<p>vents the creation of invalid Plant Loops that EnergyPlus cannot simulate.
</p>
<p>5.3.1.2  Plant Loop Demand Side
</p>
<p>The demand side of a Plant Loop is responsible for:
</p>
<p>&bull; Consuming conditioned water from the supply side via the demand inlet Node,
</p>
<p>&bull; Distributing it through the building&rsquo;s HVAC Equipment, and
</p>
<p>&bull; Returning it to the supply side via the demand outlet Node.
</p>
<p>As shown in Fig.&nbsp;5.23, the demand side of a Plant Loop includes a splitter and a 
</p>
<p>mixer. The splitter distributes the incoming supply water flow through multiple 
</p>
<p>branches. The mixer recombines the flow from the branches prior to returning it to 
</p>
<p>the supply side for reconditioning.
</p>
<p>Like the supply side of the Plant Loop, the demand side also includes a splitter 
</p>
<p>and a mixer. The splitter distributes the incoming flow through multiple branches. 
</p>
<p>The mixer recombines the flow from the branches before returning it to the demand 
</p>
<p>outlet Node. Figure&nbsp;5.24 below shows a Plant Loop with two Cooling Coils on the 
</p>
<p>demand side.
</p>
<p>Fig. 5.22 Adding Equipment to the supply side of a Plant Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>145
</p>
<p>A walkthrough of this demand side is as follows:
</p>
<p> 1. Water enters the demand side at the demand inlet Node and travels to the demand 
</p>
<p>splitter,
</p>
<p> 2. The flow is divided between the two cooling coils depending on their requested 
</p>
<p>flow,
</p>
<p> 3. The cooling coils absorb heat from the building, warming the water,
</p>
<p> 4. The demand mixer recombines the flows from the cooling coils, and
</p>
<p> 5. Water exits the demand side at the demand outlet Node.
</p>
<p>5.3.2  Plant Loop Sizing
</p>
<p>The sizing of Plant Loops takes place after the sizing of Air Loops. This is because 
</p>
<p>the heat transfer requirements of the Plant Loop working fluid are dictated by the 
</p>
<p>heat exchange needs of the Air Loop. Figure&nbsp;5.25 illustrates how air passes through 
</p>
<p>the coil, exchanging heat with the working fluid provided by the Plant Loop.
</p>
<p>Recall from previous sections that the Air Loop sizing process determines heat-
</p>
<p>ing or cooling capacity requirements corresponding to the airflow rate and design 
</p>
<p>supply temperature for each coil. Using the coil sizing parameters shown in Fig.&nbsp;5.26 
</p>
<p>Fig. 5.23 Demand side details of an empty Plant Loop
</p>
<p>Fig. 5.24 Demand side of a Plant Loop serving two Cooling Coils
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>146
</p>
<p>Fig. 5.25 Air and Water Flow through a Coil
</p>
<p>Fig. 5.26 Plant Loop Coil Sizing parameters for hard or autosizing
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>147
</p>
<p>and prescribed Plant Loop design temperatures, the water mass flow rate required to 
</p>
<p>achieve a particular heating or cooling capacity may be calculated.2
</p>
<p>Clicking the supply and demand dashed line on the diagram displays the Plant 
</p>
<p>Loop parameters, including autosizing values. Figure&nbsp;5.27 shows the Plant Loop 
</p>
<p>sizing parameters, which include the design Loop supply temperature and desired 
</p>
<p>temperature delta across the demand side. It is important to inspect these parameters 
</p>
<p>for a given application, as they vary depending on the type of Loop&nbsp;- e.g. hot, cold, 
</p>
<p>or condenser water. In addition, the previous discussion about Air Loop sizing 
</p>
<p>applies here, in that the plant sizing parameters are distinct from the properties gov-
</p>
<p>erning operation. It is important to coordinate sizing parameters with control param-
</p>
<p>eters governing operation. Once the design flow rates and capacities are known for 
</p>
<p>each Plant Loop coil, the flow rates are summed to determine the design flow rate 
</p>
<p>and capacity for the Loop.
</p>
<p>2 Note in this particular example, all coil sizing parameters are set to autosize and will be computed 
</p>
<p>using the process outlined previously. However, hard sized values could also have been selected for 
</p>
<p>a specific piece of equipment.
</p>
<p>Fig. 5.27 Specifying Plant Loop sizing parameters
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>148
</p>
<p>At this point, the Equipment on the supply side of the Plant Loop may be auto-
</p>
<p>sized. By default, each piece of Equipment on the supply side is sized to accept 
</p>
<p>100% of the design flow rate and capacity. In instances where multiple pieces of 
</p>
<p>Equipment are intended to operate in parallel, this may not be desirable. A sizing 
</p>
<p>factor for each piece of Equipment determines how much of the total capacity paral-
</p>
<p>lel components will be designed to handle (Fig.&nbsp;5.28).
</p>
<p>5.3.3  Plant Loop Control
</p>
<p>5.3.3.1  Plant Loop Temperature Control
</p>
<p>Plant Loops are primarily controlled by setting the temperature of the water at vari-
</p>
<p>ous points on the loop. As with Air Loops, this is accomplished using Setpoint 
</p>
<p>Managers. These objects allow a user to define a temperature setpoint on a particu-
</p>
<p>lar Node in the system. Some types of common Setpoint Managers used on Plant 
</p>
<p>Loops include:
</p>
<p>Scheduled: Setpoint follows a schedule, generally set at a constant temperature. 
</p>
<p>This method is most commonly used on VAV systems, where the system is 
</p>
<p>always providing cool air (e.g. 55&deg;F) to the terminals, and heating, if needed, is 
</p>
<p>provided by reheat coils in the Air Terminals on a Zone-by-Zone basis.
</p>
<p>Outdoor Air Reset: Modifies the setpoint of the water by linearly interpolating 
</p>
<p>between two points based on two corresponding OA conditions. This is used to 
</p>
<p>apply the &ldquo;OA temperature reset&rdquo; control strategy, where for example chilled 
</p>
<p>water temperature is increased when it is cold outside, because less cooling is 
</p>
<p>likely to be needed, or hot water temperature is decreased when it is warm out-
</p>
<p>side, because less heating is likely to be needed.
</p>
<p>Follow OA Temperature: Sets the setpoint to the OA temperature (dry bulb or wet 
</p>
<p>bulb) plus or minus a specified offset. Most commonly used to control the tem-
</p>
<p>perature leaving cooling towers.
</p>
<p>Fig. 5.28 Sizing factor used for components installed on branches
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>149
</p>
<p>The placement of Setpoint Managers around the loop determines which type of 
</p>
<p>control scheme is used. There are two main options: Loop level control and 
</p>
<p> component setpoint control. The most common configuration, shown in Fig.&nbsp;5.29, is 
</p>
<p>to place a single Setpoint Manager on the supply outlet Node. In this case, if the 
</p>
<p>loop needs to provide cooling to meet this setpoint, cooling Equipment on the loop 
</p>
<p>will be dispatched. If the loop needs to provide heating to meet this setpoint, heating 
</p>
<p>Equipment on the Loop will be dispatched. The order of dispatch will be described 
</p>
<p>in the next Section.
</p>
<p>The other type of control is component setpoint control. For this type of con-
</p>
<p>trol, Setpoint Managers are attached to the outlet Nodes of each piece of heating 
</p>
<p>or cooling Equipment (Fig.&nbsp;5.30). Components will be dispatched to meet these 
</p>
<p>outlet setpoints.
</p>
<p>Fig. 5.29 Plant Loop supply control
</p>
<p>Fig. 5.30 Multiple Setpoint Managers for component control
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>150
</p>
<p>5.3.3.2  Plant Loop Equipment Dispatch Control
</p>
<p>The order in which Equipment is dispatched to meet a setpoint is based on the 
</p>
<p>setting of the &ldquo;Load Distribution Scheme&rdquo; field in the Plant Loop, as shown in 
</p>
<p>Fig.&nbsp;5.31. Descriptions for each setting are:
</p>
<p>Optimal: This setting operates each piece of Equipment at its optimal part load 
</p>
<p>ratio (PLR). This is typically the operating point at which the equipment is most 
</p>
<p>efficient. The last component operates between its minimum and maximum PLR 
</p>
<p>in order to meet Loop demand. For example, if there were three chillers with an 
</p>
<p>optimal PLR of 75%, the first two chillers would operate at 75% capacity and 
</p>
<p>then the third chiller would operate at whatever capacity was required to meet the 
</p>
<p>remaining demand.
</p>
<p>SequentialLoad: With this approach, each piece of Equipment operates sequen-
</p>
<p>tially from top to bottom on the Plant Loop diagram. Each component is loaded 
</p>
<p>to its maximum PLR. The last required component operates at a PLR between its 
</p>
<p>minimum and maximum required to meet remaining Loop demand.
</p>
<p>UniformLoad: This dispatch algorithm evenly distributes Loop demand across all 
</p>
<p>available components.
</p>
<p>SequentialUniformPLR: Using this method, components are loaded sequentially 
</p>
<p>from top to bottom on the Plant Loop diagram. If the first unit cannot meet the 
</p>
<p>required load, then a second unit is brought online and both unit PLRs are set 
</p>
<p>equally. Additional units are added in this manner until the load is met.
</p>
<p>UniformPLR: The final setting loads all Equipment to a uniform PLR.&nbsp; No 
</p>
<p>Equipment is loaded below its minimum PLR, and one or more units may be shut 
</p>
<p>off to keep the remaining units above minimum PLR.
</p>
<p>Fig. 5.31 Plant Loop Load Distribution Scheme
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>151
</p>
<p>5.3.3.3  Prescribing Plant Loop Load Ranges
</p>
<p>Some dispatch methods limit certain pieces of Equipment between specified bands. 
</p>
<p>For example, only operate chillers one and two when the load is less than 200 tons 
</p>
<p>but operate chillers two and three when the load is between 200 and 500 tons. It is 
</p>
<p>possible to define these load ranges and corresponding sequences of operation in 
</p>
<p>EnergyPlus, but this feature is currently not implemented in the OpenStudio user 
</p>
<p>interface.
</p>
<p>5.3.4  Plant Loop Simulation Process
</p>
<p>The simulation process for each Plant Loop is similar to how Air Loops are 
</p>
<p>evaluated.
</p>
<p> 1. EnergyPlus calculates the flow rate demanded by each coil served by the Plant 
</p>
<p>Loop.
</p>
<p> 2. These are summed to determine the total design flow rate that must be supplied 
</p>
<p>by the Plant Loop for the next time step.
</p>
<p> 3. Two types of pumps that can be used on a Plant Loop: constant and variable 
</p>
<p>speed. Constant speed pumps process 100% of the design flow rate.
</p>
<p> 4. If the coils are requesting the full design flow rate, then the entire flow passes 
</p>
<p>through the coils.
</p>
<p>&bull; When less coil flow is required, the difference is bypassed directly to the sup-
</p>
<p>ply inlet Node. This bypass takes place via an implicit branch not shown in 
</p>
<p>the diagram and behaves just as if a bypass pipe Object was dropped into a 
</p>
<p>branch.
</p>
<p> 5. Based upon the selected dispatch scheme, the Plant Loop flow is split between 
</p>
<p>each heating or cooling component accordingly.
</p>
<p> 6. Conditioned water flows are combined by the mixer before being returned to the 
</p>
<p>supply outlet Node.
</p>
<p>Sometimes components may not achieve their designated setpoints. This may 
</p>
<p>occur due to component schedules, availability, or lack of capacity. In these cases, 
</p>
<p>the water may not be hot or cold enough to provide sufficient coil heat transfer. 
</p>
<p>These coils, in turn, may not provide sufficient conditioning for Zone loads, result-
</p>
<p>ing in unmet hours. When troubleshooting unmet hours issues, it is often valuable 
</p>
<p>to examine the temperatures and flow rates on Nodes throughout the Plant Loop to 
</p>
<p>understand whether the various setpoints are being met.
</p>
<p>5.3 Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>152
</p>
<p>5.4  Zone Equipment
</p>
<p>Zone Equipment is the third category of HVAC Equipment in EnergyPlus. As 
</p>
<p>discussed in Chap. 4, each piece of Zone Equipment is dedicated to a single 
</p>
<p>Thermal Zone, and operates based on its heating, cooling, and ventilation needs.
</p>
<p>5.4.1  Zone Equipment Configuration
</p>
<p>Recall that Zone Equipment is added to a Thermal Zone on the Thermal Zones ( ) 
</p>
<p>Tab. It is dragged from the  in the right-hand pane into a specific Thermal Zone&rsquo;s 
</p>
<p>Equipment column (Fig.&nbsp;5.32). Multiple pieces of Zone Equipment may be assigned 
</p>
<p>to a single Thermal Zone.
</p>
<p>A piece of Zone Equipment may be a single Object or contain child components 
</p>
<p>such as fans, heating coils, and cooling coils. The objects that comprise a piece of 
</p>
<p>Zone Equipment may be reviewed by clicking on the Object and scrolling through 
</p>
<p>its properties as shown in Fig.&nbsp;5.33.
</p>
<p>5.4.2  Zone Equipment Sizing
</p>
<p>As with Air Loops, the sizing of Zone Equipment begins with determination of 
</p>
<p>heating and cooling loads and required airflow rates for the Thermal Zone it 
</p>
<p>serves. The design flow rate is used to calculate the capacities and flow rates 
</p>
<p>required for any heating, cooling, or ventilation components included within the 
</p>
<p>Zone Equipment. Some types of Zone Equipment contain their own sizing param-
</p>
<p>eters, so it is prudent to review these settings and ensure that they align with the 
</p>
<p>Thermal Zone sizing parameters. Mismatched sizing design parameters may result 
</p>
<p>in over- or under- sized Equipment.
</p>
<p>Fig. 5.32 Adding Zone Equipment to a Thermal Zone
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>153
</p>
<p>5.4.3  Zone Equipment Control
</p>
<p>Controls are specific to each type of Zone Equipment and are defined in the component 
</p>
<p> Sub-Tab. Generally, Zone Equipment responds to the heating and/or cooling set-
</p>
<p>points in the Thermal Zone being served. Some types of Zone Equipment cycle on and 
</p>
<p>off only to meet loads, while other types meet load and provide OA. Zone Equipment 
</p>
<p>that includes a fan may use a fan operation schedule to denote whether the fan cycles 
</p>
<p>with heating and cooling or runs continuously.
</p>
<p>5.4.4  Zone Equipment Simulation Process
</p>
<p>The simulation process for Zone Equipment is similar to that used for Air or Plant 
</p>
<p>Loops with the exception that the Equipment is sized to meet the heating or cooling 
</p>
<p>load of its associated Zone. In the event that multiple pieces of Zone Equipment are 
</p>
<p>attached to a single Thermal Zone, they are sized and simulated in order from top to 
</p>
<p>bottom. This means that if additional load remains after the first piece of Zone 
</p>
<p>Equipment is simulated, that load is passed along to the next piece of Equipment 
</p>
<p>listed in the Equipment column.
</p>
<p>Fig. 5.33 Examining child objects within a piece of Zone Equipment
</p>
<p>5.4 Zone Equipment</p>
<p/>
</div>
<div class="page"><p/>
<p>154
</p>
<p>5.5  Service Water Systems
</p>
<p>Service Water Systems, sometimes known as domestic water systems, are the 
</p>
<p>systems in buildings that supply water for purposes of drinking, cooking, wash-
</p>
<p>ing, flushing toilets, irrigation, etc. Sometimes this water is cold, and sometimes 
</p>
<p>this water is heated. EnergyPlus, and, by extension, OpenStudio, can model the 
</p>
<p>usage of cold and hot water, and the energy required to heat the water.
</p>
<p>5.5.1  Defining Water Use Equipment
</p>
<p>Water Use Equipment is modeled in a similar manner to electric Equipment or 
</p>
<p>lights. First, a definition is created to represent a piece of Equipment such as a toilet 
</p>
<p>or sink. Like other loads, Water Use Equipment definitions are created on the Loads 
</p>
<p>( ) Tab. As shown in Fig.&nbsp;5.34, a user may specify the peak flow rate, a target tem-
</p>
<p>perature, and the sensible and latent fractions, which will be introduced to the Space.
</p>
<p>The target temperature schedule determines how hot or cold the water being sup-
</p>
<p>plied will be. In many cases, especially in commercial buildings, the hot water being 
</p>
<p>provided by the water heater may be set to a temperature like 140&nbsp;&deg;F that is too hot 
</p>
<p>for some uses like hand washing. In this case, OpenStudio mixes cold water in with 
</p>
<p>Fig. 5.34 Creating a Water 
</p>
<p>Use Equipment definition
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>155
</p>
<p>the hot water to match the target temperature. For Equipment that uses cold water 
</p>
<p>like toilets and irrigation, the target temperature schedule may be set to a value 
</p>
<p>below that of the temperature supplied by the water mains.
</p>
<p>5.5.2  Adding Water Use Equipment to&nbsp;a&nbsp;Model
</p>
<p>Adding Water Use Equipment to the Model requires multiple steps on the HVAC (
</p>
<p>) Tab. Begin by selecting &ldquo;Service Hot Water&rdquo; from the system selector at the top of 
</p>
<p>the window. Water use Connection Objects are added to the Model by dragging 
</p>
<p>them from the  as shown in Fig.&nbsp;5.35.
</p>
<p>This Object connects the Water Use Equipment inside it with the cold-water 
</p>
<p>main entering the building and, optionally, a hot water Loop. By clicking on the 
</p>
<p>Water Use Connections Object, a new view appears (Fig.&nbsp;5.36) into which Water 
</p>
<p>Fig. 5.35 Adding a water use connection to the service Hot Water Loop
</p>
<p>Fig. 5.36 Adding a sink to an empty water use connection
</p>
<p>5.5 Service Water Systems</p>
<p/>
</div>
<div class="page"><p/>
<p>156
</p>
<p>Use Equipment may be dragged and dropped. Water use Equipment may be added 
</p>
<p>from either  or .
</p>
<p>Figure 5.37 illustrates a Water Use definition for a sink that has been added to a 
</p>
<p>Water Use Connection diagram. Cold water is always supplied to every Water Use 
</p>
<p>Connection. This is unheated water straight from the water mains. A fractional 
</p>
<p>scheduled is required for each piece of Equipment that is added. Like other loads, 
</p>
<p>the value of this schedule is multiplied by the peak flow rate at each time step to 
</p>
<p>determine how much water is used. Water Use Equipment may be optionally added 
</p>
<p>to a Space to reflect additional sensible and latent loads. If only cold water is being 
</p>
<p>used, this step may be omitted.
</p>
<p>For Water Use Equipment that requires hot water, an additional step is needed. 
</p>
<p>The Water Use Connection containing the Water Use Equipment must be attached 
</p>
<p>to the demand side of a Plant Loop with a water heater or boiler. Figure&nbsp;5.38 shows 
</p>
<p>a service water Loop with a hot water heater on the supply side and a Water Use 
</p>
<p>Connection on the demand side. EnergyPlus requires a pump on any Plant Loop.
</p>
<p>Because water heaters in OpenStudio cannot be auto-sized, capacities must be 
</p>
<p>entered manually. This means that a water heater may not be able to keep up with 
</p>
<p>the demand from the Water Use Connections. For unmet heating and cooling hours, 
</p>
<p>there is a convenient internal variable in EnergyPlus that tracks whether setpoints 
</p>
<p>Tip: Some buildings do not contain a recirculation pump, instead relying 
</p>
<p>on mains pressure to drive flow. To model these cases, a variable speed pump 
</p>
<p>can be added to the Plant Loop with a pressure rise of zero so that the pump 
</p>
<p>does not consume power.
</p>
<p>Fig. 5.37 Adding Equipment to a water use connection
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>157
</p>
<p>are met. There is no equivalent for whether or not the setpoint of Water Use 
</p>
<p>Equipment is met. For this reason, it is advisable to review the detailed time series 
</p>
<p>output of the leaving temperature of Water Use Equipment to ensure that it is meet-
</p>
<p>ing the target temperature schedule. If it is not, the size of the water heater may need 
</p>
<p>to be increased.
</p>
<p>5.6  Checkpoint Six: Air Loops
</p>
<p>In this and subsequent Chap. 5 exercises we are going to build up from scratch the 
</p>
<p>VAV systems that were created using templates in Chap. 4. This will allow us to 
</p>
<p>gain familiarity with OpenStudio&rsquo;s capability for modeling complex HVAC sys-
</p>
<p>tems, while comparing our results from the known results we achieved in the previ-
</p>
<p>ous exercise. If you followed our instructions from Chap. 4, you made a copy of 
</p>
<p>your rezoned school Model called MyPrimarySchoolZoned.osm. Open this Model 
</p>
<p>and proceed to the HVAC ( ) Tab to begin. Alternately, you can open 
</p>
<p>MyPrimarySchoolHVAC.osm and delete all Air and Plant Loops from that Model 
</p>
<p>with the  Button.
</p>
<p>We need to begin by creating an empty Air Loop. Empty loops are found amidst 
</p>
<p>the other template systems. Use the  Button on the HVAC ( ) Tab to add one as 
</p>
<p>shown in Fig.&nbsp;5.39.
</p>
<p>Fig. 5.38 Adding a hot water connection to a Hot Water Loop
</p>
<p>5.6 Checkpoint Six: Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>158
</p>
<p>Once the empty Loop has been added follow these steps:
</p>
<p> 1. Add Objects to the Loop by dragging them from the  onto Nodes as shown in 
</p>
<p>Fig.&nbsp;5.40:
</p>
<p> (a) OA
</p>
<p> (b) Coil Cooling Water
</p>
<p> (c) Coil Heating Water
</p>
<p> (d) Fan Variable Volume
</p>
<p> 2. Click on the dashed supply/demand line in the Loop to open the Loop Object.
</p>
<p> 3. Name it &ldquo;My VAV Air Loop.&rdquo;
</p>
<p>Fig. 5.39 Adding an empty Air Loop
</p>
<p>Fig. 5.40 Air Loop with initial supply Equipment components
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>159
</p>
<p>Fig. 5.41 VAV outlet setpoint temperature
</p>
<p>Fig. 5.42 Air Loop with VAV reheat terminal
</p>
<p>5.6 Checkpoint Six: Air Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>160
</p>
<p> 1. Add a &ldquo;Setpoint Manager Scheduled&rdquo; Object to the supply outlet Node. We need 
</p>
<p>to assign a constant 55&nbsp;&deg;F supply air temperature to this Object.
</p>
<p> 2. Use the Schedules ( ) Tab to create a constant &ldquo;Deck Temperature&rdquo; Schedule as 
</p>
<p>shown in Fig.&nbsp;5.41.
</p>
<p> 3. Return to the HVAC ( ) Tab and assign it to the Setpoint Manager&rsquo;s Schedule.
</p>
<p>Next navigate in the  to locate the &ldquo;AirTerminal Single Duct VAV Reheat&rdquo; 
</p>
<p>terminal Objects. Select the &ldquo;Hot Water (HW) Reheat&rdquo; Object and drag it to the 
</p>
<p>demand side. The result should now look like Fig.&nbsp;5.42.
</p>
<p>Save your work, and then compare this diagram with the VAV air handler from Chap. 
</p>
<p>4. Can you spot anything missing? Full marks if you identified that the Thermal Zone 
</p>
<p>and Plant Loop Connection Nodes are missing from both coils. We will correct all three 
</p>
<p>omissions in the next exercise, but we have successfully built our first Air Loop by hand.
</p>
<p>5.7  Checkpoint Seven: Plant Loops
</p>
<p>In this exercise we will add chilled, condenser, and hot water Loops to our 
</p>
<p>Model by building them up from individual Objects. Begin by adding a chilled 
</p>
<p>water Loop. Use the  Button on the HVAC ( ) Tab to create an empty Plant 
</p>
<p>Fig. 5.43 Add an empty Plant Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>161
</p>
<p>Loop, as shown in Fig.&nbsp;5.43. Click on the dashed supply and demand line to 
</p>
<p>open the Plant Loop Object in the editor and change its name to &ldquo;My Chilled 
</p>
<p>Water Loop.&rdquo;
</p>
<p> 1. Add Objects to your Loop by dragging them from the  onto Nodes as shown 
</p>
<p>in Fig.&nbsp;5.44:
</p>
<p> (a) Pump Variable Speed
</p>
<p> (b) Water Cooled Chiller Electric EIR
</p>
<p> (c) Bypass Pipe Adiabatic
</p>
<p> (d) Setpoint Manager Scheduled
</p>
<p> 2. Name the chiller &ldquo;My Water Cooled Chiller.&rdquo;
</p>
<p> 3. Add a Setpoint Manager that will maintain a constant supply water temperature 
</p>
<p>of 44&nbsp;&deg;F.
</p>
<p> 4. Click on the supply/demand line to set the Loop sizing parameters, ensuring that:
</p>
<p> (a) The Loop type is Cooling
</p>
<p>Fig. 5.44 Chilled Water Loop with initial components
</p>
<p>5.7 Checkpoint Seven: Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>162
</p>
<p> (b) The Loop design exit temperature matches the setpoint, and
</p>
<p> (c) The Loop design temperature difference is 12&nbsp;&deg;R.
</p>
<p>Now that the chilled water Loop is complete, the chiller water-cooling coils from 
</p>
<p>&ldquo;My VAV Air Loop&rdquo; may be connected. Use the system selector at the top of the 
</p>
<p>window to navigate back to &ldquo;My VAV Air Loop.&rdquo; Click on the cooling coil and  
</p>
<p>Sub-Tab to establish a connection between the coil and correct Plant Loop. In this 
</p>
<p>case, we want to check the &ldquo;My Chilled Water Loop&rdquo; box to connect this coil to the 
</p>
<p>chilled water loop, as shown in Fig.&nbsp;5.45.
</p>
<p>Once this has been accomplished successfully, click the Node above or below the 
</p>
<p>cooling coil icon to navigate back to the associated chilled water Loop. It should 
</p>
<p>look like Fig.&nbsp;5.46, with the cooling coil on the demand side of the Loop.
</p>
<p>Now we need to create a second Plant Loop to serve as the condenser water loop 
</p>
<p>for the water-cooled chiller in the chilled water Loop.
</p>
<p> 1. Add the second Plant Loop
</p>
<p> 2. Name it &ldquo;My Condenser Water Loop.&rdquo;
</p>
<p> 3. Add Objects to your Loop by dragging them from the  onto Nodes as shown 
</p>
<p>in Fig.&nbsp;5.47:
</p>
<p> (a) Pump Constant Speed
</p>
<p>Fig. 5.45 Connecting a Cooling Coil to the Chilled Water Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>163
</p>
<p> (b) Cooling Tower Single Speed
</p>
<p> (c) Bypass Pipe Adiabatic
</p>
<p> (d) Setpoint Manager Follow Outdoor Air Temperature
</p>
<p> 4. Ensure that the setpoint:
</p>
<p> (a) Follows the Outdoor Air Wet Bulb with an offset of 4&nbsp;&deg;R,
</p>
<p> (b) Has a minimum of 70&nbsp;&deg;F, and
</p>
<p> (c) Has a maximum of 95&nbsp;&deg;F.
</p>
<p> 5. Click on the supply/demand line to set the Loop sizing parameters, ensuring that:
</p>
<p> (a) The Loop type is Condenser
</p>
<p> (b) The Loop design exit temperature to 85&nbsp;&deg;F, and
</p>
<p> (c) The Loop design temperature difference is 10&nbsp;&deg;R.
</p>
<p>Once the condenser Loop has been completed, attach it to the chiller called 
</p>
<p>&ldquo;My Water-Cooled Chiller&rdquo; from &ldquo;My Chilled Water Loop&rdquo; to the demand 
</p>
<p>side of the Loop. Click on  and drag &ldquo;My Water-Cooled Chiller&rdquo; to the 
</p>
<p>Fig. 5.46 Chilled Water Loop with Cooling Coil connected
</p>
<p>5.7 Checkpoint Seven: Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>164
</p>
<p>demand side. After successfully attaching the chiller, the Loop should look 
</p>
<p>like Fig.&nbsp;5.48.
</p>
<p>We still need to add a Loop to serve hot water to our hot water coil.
</p>
<p> 1. Add the third Plant Loop
</p>
<p> 2. Name it &ldquo;My Hot Water Loop.&rdquo;
</p>
<p> 3. Add Objects to your Loop by dragging them from the  onto Nodes as shown 
</p>
<p>in Fig.&nbsp;5.49:
</p>
<p> (a) Pump Variable Speed
</p>
<p> (b) Boiler Hot Water
</p>
<p> (c) Bypass Pipe Adiabatic
</p>
<p>Tip: If you do not see the Node links above and below the chiller, you 
</p>
<p>likely selected a second chiller from the  and have accidentally added it to 
</p>
<p>the model.
</p>
<p>Fig. 5.47 Condenser Water Loop with initial components
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>165
</p>
<p> (d) Setpoint Manager Scheduled
</p>
<p> 4. Ensure that the Setpoint Manager Schedule is 140&nbsp;&deg;F at all times.
</p>
<p> 5. Click on the supply/demand line to set the Loop sizing parameters, ensuring that:
</p>
<p> (a) The Loop type is Heating
</p>
<p> (b) The Loop design exit temperature matches the setpoint, and
</p>
<p> (c) The Loop design temperature difference is 20&nbsp;&deg;R.
</p>
<p>Now that the hot water loop is ready, navigate back to &ldquo;My VAV Air Loop&rdquo; and 
</p>
<p>follow the same process used to connect the cooling coil to connect the heating coil 
</p>
<p>and air terminal to the hot water Loop. Verify that both the main heating coil and the 
</p>
<p>coil inside the reheat terminal are connected. Afterward, the hot water Loop should 
</p>
<p>look like Fig.&nbsp;5.50.
</p>
<p>Now that the reheat coil in the reheat terminal has been connected to the hot 
</p>
<p>water loop, Thermal Zones can be assigned to the Air Loop. Navigate to &ldquo;My VAV 
</p>
<p>Fig. 5.48 Condenser Loop with chiller attached
</p>
<p>5.7 Checkpoint Seven: Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>166
</p>
<p>Fig. 5.49 Hot Water Loop 
</p>
<p>with initial components
</p>
<p>Fig. 5.50 Hot Water Loop 
</p>
<p>with Heating Coils 
</p>
<p>connected
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>167
</p>
<p>Air Loop.&rdquo; In the Air Loop, click on the demand splitter and use the check boxes to 
</p>
<p>assign all of the Thermal Zones to the Air Loop, as shown in Fig.&nbsp;5.51.
</p>
<p>Assuming this process was performed correctly, the hot water Loop should now 
</p>
<p>have five heating coils attached to the demand side&nbsp;&ndash; one main coil for the VAV and 
</p>
<p>four terminal reheat coils.
</p>
<p>Tip: The reason we did not add Thermal Zones immediately after initial 
</p>
<p>creation of the Air Loop is that the heating coils in the VAV terminals had not 
</p>
<p>yet been connected to the hot water Loop. Adding additional Zones at that 
</p>
<p>point would have automatically brought in the same, unconnected, terminal 
</p>
<p>units. This would require us to manually assign each terminal coil to the hot 
</p>
<p>water Loop.
</p>
<p>Fig. 5.51 Assign Thermal Zones to Air Loop
</p>
<p>5.7 Checkpoint Seven: Plant Loops</p>
<p/>
</div>
<div class="page"><p/>
<p>168
</p>
<p>5.8  Checkpoint Eight: Zone Equipment
</p>
<p>In this final HVAC exercise, we are going to remove one of the Thermal Zones in 
</p>
<p>the Model from the VAV system and assign it to a dedicated piece of Zone Equipment. 
</p>
<p>Begin by navigating to the Thermal Zones ( ) Tab. For &ldquo;Thermal Zone 1,&rdquo; select the 
</p>
<p>&ldquo;VAV HW Rht&rdquo; Air Terminal and remove this from the Zone using the  Button in 
</p>
<p>the edit pane, as shown in Fig.&nbsp;5.52. This disconnects the Zone from our Air Loop.
</p>
<p>Locate a &ldquo;Four Pipe Fan Coil&rdquo; in the  and add it to &ldquo;Thermal Zone 1,&rdquo; as 
</p>
<p>shown in Fig.&nbsp;5.53.
</p>
<p>Use the  Sub-Tab in the Edit pane to connect the coils inside of the Zone 
</p>
<p>Equipment to &ldquo;My Hot Water Loop&rdquo; and &ldquo;My Chilled Water Loop&rdquo; as shown in 
</p>
<p>Fig.&nbsp;5.54. Be sure that each coil is connected to the correct loop by reading the type 
</p>
<p>of coil in the dark grey area of the Edit pane.
</p>
<p>Run the simulation and examine the now familiar OpenStudio Results report. 
</p>
<p>Look at the HVAC Load Profiles and Zone Conditions reports shown in Figs.&nbsp;5.55 
</p>
<p>and 5.56. Verify that the heating and cooling load correlates to the outside air 
</p>
<p> temperature and that the Thermal Zones are properly conditioned by reviewing the 
</p>
<p>number of hours for unmet heating and cooling loads.
</p>
<p>Finally, armed with knowledge about how detailed mechanical systems are cre-
</p>
<p>ated in OpenStudio, the Air Loops (Fig.&nbsp;5.57) and Plant Loops (Fig.&nbsp;5.58) detail 
</p>
<p>reports should be comprehensible. Review both to verify that the systems were con-
</p>
<p>figured as intended.
</p>
<p>Fig. 5.52 Disconnecingt the Thermal Zone from the Air Loop
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>169
</p>
<p>Fig. 5.53 Adding Four Pipe Fan Coil Zone Equipment
</p>
<p>Fig. 5.54 Connecting Zone Equipment Coil to a Plant Loop
</p>
<p>5.8 Checkpoint Eight: Zone Equipment</p>
<p/>
</div>
<div class="page"><p/>
<p>170
</p>
<p>Hopefully these exercises have helped you appreciate the effort OpenStudio can 
</p>
<p>save us when using template HVAC systems. The next Chapter introduces one of the 
</p>
<p>most powerful time saving features of the platform&nbsp;- OpenStudio Measures.
</p>
<p>5.9  Additional Exercises
</p>
<p>Recommended additional exercises involving the Checkpoint Seven Model include 
</p>
<p>further study of HVAC system control and sizing.
</p>
<p>&bull; Be sure to keep a &ldquo;clean&rdquo; copy of the Checkpoint Seven model before pro-
</p>
<p>ceeding with these activities.
</p>
<p>&bull; Change the supply air temperature setpoint for the VAV system.
</p>
<p>Fig. 5.55 HVAC Monthly Load Profile for school with advanced HVAC systems
</p>
<p>Fig. 5.56 Zone conditions for school with advanced HVAC systems
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>171
</p>
<p>Fig. 5.57 Air Loops detail for school with advanced HVAC systems
</p>
<p>Fig. 5.58 Plant Loops detail for school with advanced HVAC systems
</p>
<p>5.9 Additional Exercises</p>
<p/>
</div>
<div class="page"><p/>
<p>172
</p>
<p>&bull; Change the deck temperature schedule from 55&nbsp;&deg;F to 60&nbsp;&deg;F.
</p>
<p>&bull; Compare the heating and cooling energy with Checkpoint Seven. Can you 
</p>
<p>explain the reason for the changes?
</p>
<p>&bull; Explore different equipment staging methods.
</p>
<p>&bull; Add a second Chiller to the Chilled Water Loop.
</p>
<p>&bull; Change the sizing factor for each Chiller to 0.5.
</p>
<p>&bull; Change the Load Distribution Scheme to UniformPLR for the Chilled Water 
</p>
<p>Loop.
</p>
<p>&bull; Run the simulation and look at the time series results for each Chiller.
</p>
<p>&bull; Can you tell that the load is split between both Chillers?
</p>
<p>&bull; Change the Load Distribution Scheme to SequentialLoad for the Chilled 
</p>
<p>Water Loop.
</p>
<p>&bull; Run the simulation and look at the time series results for each Chiller.
</p>
<p>&bull; Is one of the Chillers loaded first?
</p>
<p>&bull; Can you tell which Chiller runs for more hours in the year?
</p>
<p>&bull; Study different Fan control approaches.
</p>
<p>&bull; Replace the Variable Volume Fan from the VAV system with a Constant 
</p>
<p>Volume Fan.
</p>
<p>&bull; Compare the fan energy with Checkpoint Seven. Can you explain the reason 
</p>
<p>for the change?
</p>
<p>&bull; Experiment with the impact of design targets on system sizing.
</p>
<p>&bull; Change the Central Heating Supply Air Temperature and Central Cooling 
</p>
<p>Supply Air Temperature in the VAV system to 65&nbsp;&deg;F.
</p>
<p>&bull; Leave the Deck Temperature set to 55&nbsp;&deg;F.
</p>
<p>&bull; Run a simulation and note the number of unmet hours and system sizes.
</p>
<p>&bull; Now change the Load Distribution Scheme to UniformPLR for the chilled 
</p>
<p>water loop.
</p>
<p>&bull; Run the simulation again.
</p>
<p>&bull; Was there an increase or decrease in unmet hours? If so, why?
</p>
<p>&bull; How did the size of the chiller change? If so, how did changing the sizing 
</p>
<p>of the air loop affect the size of components on a chilled water loop?
</p>
<p>Reference
</p>
<p>ANSI/ASHRAE Standard 62.2-2016 ventilation for acceptable indoor air quality, ASHRAE, 2016
</p>
<p>5 Advanced HVAC Topics</p>
<p/>
</div>
<div class="page"><p/>
<p>173&copy; Springer International Publishing AG, part of Springer Nature 2018 
L. Brackney et al., Building Energy Modeling with OpenStudio, 
https://doi.org/10.1007/978-3-319-77809-9_6
</p>
<p>Chapter 6
</p>
<p>OpenStudio Measures
</p>
<p>6.1  Introduction to&nbsp;OpenStudio Measures
</p>
<p>Chapter 1 briefly mentioned the concept of OpenStudio Measures. These small 
</p>
<p>scripts written in the Ruby1 programming language are a unique feature of 
</p>
<p>OpenStudio and are key to the platform&rsquo;s extensibility. Measures are most often 
</p>
<p>used to implement model transformations that correspond to Energy Efficiency 
</p>
<p>(EE) measures&nbsp;&ndash; hence their name. However, as we shall see, they can be used to 
</p>
<p>query and transform OpenStudio models and associated data in a variety of ways. 
</p>
<p>Throughout this text, whenever you see the word Measure capitalized, know that 
</p>
<p>we&rsquo;re referring to an OpenStudio script as opposed to an EE measure.
</p>
<p>Like their namesake, Measures are frequently used to apply an EE technology to 
</p>
<p>a building Model in a simple, self-contained operation. For example, if a designer 
</p>
<p>wishes to assess the potential for Energy Recovery Ventilation (ERV) to save energy 
</p>
<p>in a building, they can select the ERV Measure and apply it to their Model. Figure&nbsp;6.1 
</p>
<p>illustrates and HVAC system before and after the Measure is applied. Other exam-
</p>
<p>ples include modification of an HVAC system&rsquo;s coefficient of performance (COP), 
</p>
<p>alterations to window-to-wall ratio (WWR), and alteration of insulation thermal 
</p>
<p>resistance (R-Values).
</p>
<p>Simple parametric substitutions are generally within the capability of other mod-
</p>
<p>eling tools and scripting languages. Since OpenStudio Measures are written in the 
</p>
<p>full-featured Ruby scripting language, and have access to components in 
</p>
<p>OpenStudio&rsquo;s Object Model, Measures can do much more. One of the most signifi-
</p>
<p>cant examples is shown in Fig.&nbsp;6.2.
</p>
<p>1 https://www.ruby-lang.org/en/
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
978-3-319-77809-9_6) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_6&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_6&amp;domain=pdf</a></div>
<div class="annotation"><a href="https://www.ruby-lang.org/en/">https://www.ruby-lang.org/en/</a></div>
</div>
<div class="page"><p/>
<p>174
</p>
<p>In this example, a complete daylighting solution is applied to an arbitrary  
</p>
<p>primary school Model with a single operation. This particular Measure is based on 
</p>
<p>design guidance in the ASHRAE Advanced Energy Design Guide (AEDG) for K-12 
</p>
<p>schools2 that includes:
</p>
<p>&bull; Removal of all existing fenestration,
</p>
<p>&bull; Addition of daylight and view glass to South-facing facades,
</p>
<p>&bull; Addition of daylight redirection devices (light shelves),
</p>
<p>&bull; Placement of daylight sensors and controls,
</p>
<p>&bull; Addition of skylights to spaces that benefit from top-lighting, and
</p>
<p>&bull; Addition of shading devices for glare control.
</p>
<p>Note that the daylighting Measure &ldquo;intelligently&rdquo; traverses spaces within the 
</p>
<p>Model, applying design elements surgically&nbsp;&ndash; e.g. skylights are added to a cafeteria 
</p>
<p>2 ASHRAE (2011).
</p>
<p>Fig. 6.1 Measure used to add heat recovery to an HVAC system (https://bcl.nrel.gov/node/39440)
</p>
<p>Fig. 6.2 Measure used to apply a complete daylighting solution to a school (https://bcl.nrel.gov/
node/39783)
</p>
<p>6 OpenStudio Measures</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39440">https://bcl.nrel.gov/node/39440</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39783">https://bcl.nrel.gov/node/39783</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39783">https://bcl.nrel.gov/node/39783</a></div>
</div>
<div class="page"><p/>
<p>175
</p>
<p>and gymnasium, but not in classrooms where top-lighting would interfere with pro-
</p>
<p>jection Equipment. The Measure script embodies an expert modeler&rsquo;s knowledge of 
</p>
<p>how to approach a good daylighting design; enabling a less experienced modeler to 
</p>
<p>evaluate the Measure with far greater confidence than if they attempted to modify a 
</p>
<p>Model by hand. Encapsulation of &ldquo;best practice&rdquo; for EE modeling is a powerful 
</p>
<p>capability for increasing both speed and consistency of energy modeling.
</p>
<p>Because Ruby is such a capable scripting language, OpenStudio Measures are not 
</p>
<p>limited to modeling the application of EE technologies to buildings. They can also 
</p>
<p>operate on an empty Model, using Ruby code along with the OpenStudio Standards 
</p>
<p>Gem3 to generate models from scratch. One example is the &ldquo;Create DOE Prototype&rdquo; 
</p>
<p>Measure, which creates a Model procedurally from three Measure inputs: building 
</p>
<p>type, vintage, and climate zone (Fig.&nbsp;6.3). Behind scenes, this Measure (along with 
</p>
<p>the Standards Gem) encapsulates a large amount of model input data and modeling 
</p>
<p>heuristics corresponding to various building energy codes and standards. The net 
</p>
<p>result from a user&rsquo;s perspective is that an incredibly sophisticated series of modeling 
</p>
<p>operations are packaged within a deceptively simple interface.
</p>
<p>Another type of OpenStudio Measure focuses on querying the data associated 
</p>
<p>with the energy Model to produce customized reports or data exports. Although 
</p>
<p>we didn&rsquo;t mention it, the standard OpenStudio reports we have reviewed in previ-
</p>
<p>ous chapters are actually generated by a Measure, which enables easy customiza-
</p>
<p>tion and expansion. Other popular &ldquo;reporting Measure&rdquo; applications include 
</p>
<p>interactive 3D visualizations for building geometry, automated Model quality 
</p>
<p>checking, and HVAC psychrometric charts. Figure&nbsp;6.4 presents html renderings 
</p>
<p>for three reporting Measures.
</p>
<p>Chapter 9 will cover the anatomy and creation of Measures in greater detail. The 
</p>
<p>remainder of this chapter focuses on utilizing Measures to automate common mod-
</p>
<p>eling tasks.
</p>
<p>3 https://github.com/NREL/openstudio-standards. A Ruby Gem is a packaged library of Ruby 
code. The OpenStudio Standards Gem contains a collection of Ruby scripts that are useful for 
applying energy standards and input assumptions to models.
</p>
<p>Fig. 6.3 DOE prototype building Measure (https://bcl.nrel.gov/node/83591) dialog and result
</p>
<p>6.1 Introduction to&nbsp;OpenStudio Measures</p>
<p/>
<div class="annotation"><a href="https://github.com/NREL/openstudio-standards">https://github.com/NREL/openstudio-standards</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83591">https://bcl.nrel.gov/node/83591</a></div>
</div>
<div class="page"><p/>
<p>176
</p>
<p>Fig. 6.4 OpenStudio reporting Measure examples (https://bcl.nrel.gov/node/82771, https://bcl.
nrel.gov/node/83647, https://bcl.nrel.gov/node/83307)
</p>
<p>6 OpenStudio Measures</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/node/82771">https://bcl.nrel.gov/node/82771</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83647">https://bcl.nrel.gov/node/83647</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83647">https://bcl.nrel.gov/node/83647</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83307">https://bcl.nrel.gov/node/83307</a></div>
</div>
<div class="page"><p/>
<p>177
</p>
<p>6.2  Accessing and&nbsp;Using Measures
</p>
<p>Since Measures are such an important part of the OpenStudio ecosystem, it stands 
</p>
<p>to reason that ensuring they are easily accessible is an important feature of the plat-
</p>
<p>form. Measures are stored in an online repository called the Building Component 
</p>
<p>Library (BCL).4,5 The BCL can be accessed through a web browser, and includes 
</p>
<p>integral search functionality to quickly locate content of interest. Figure&nbsp;6.5 shows 
</p>
<p>the landing page of http://bcl.nrel.gov.
</p>
<p>An integrated search engine allows users to quickly identify content of interest&nbsp;&ndash; 
</p>
<p>e.g. HVAC Measures (Fig.&nbsp;6.6). The left side of the BCL window enables narrowing 
</p>
<p>of search results using a combination of attributes.
</p>
<p>Clicking on a specific entry brings up more information that can help the mod-
</p>
<p>eler determine if a particular Measure is right for the task. Figure&nbsp;6.7 is the BCL 
</p>
<p>entry for the ERV Measure we highlighted above. Eagle-eyed readers will note 
</p>
<p>that this Measure has a specific URL (Uniform Resource Locator) that is unique 
</p>
<p>to the Measure. Footnotes associated with Figs.&nbsp;6.1, 6.2, 6.3, and 6.4 call out the 
</p>
<p>respective URLs for the illustrated Measures, facilitating citation and sharing of 
</p>
<p>specific content used in any given analysis. We&rsquo;ll revisit these Unique Identifiers 
</p>
<p>(UIDs) along with the rest of a Measure&rsquo;s descriptive information in Chap. 9, but 
</p>
<p>for the time being note the descriptive text and a  Button that allows the Measure 
</p>
<p>to be downloaded.
</p>
<p>4 http://bcl.nrel.gov
5 Fleming et&nbsp;al. (2012).
</p>
<p>Fig. 6.5 Landing page of http://bcl.nrel.gov
</p>
<p>6.2 Accessing and&nbsp;Using Measures</p>
<p/>
<div class="annotation"><a href="http://bcl.nrel.gov">http://bcl.nrel.gov</a></div>
<div class="annotation"><a href="http://bcl.nrel.gov">http://bcl.nrel.gov</a></div>
<div class="annotation"><a href="http://bcl.nrel.gov">http://bcl.nrel.gov</a></div>
</div>
<div class="page"><p/>
<p>178
</p>
<p>Fig. 6.6 HVAC Measures on the BCL
</p>
<p>Fig. 6.7 BCL web page for ERV Measure
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>179
</p>
<p>6.3  Using Measures Within the&nbsp;OpenStudio Application
</p>
<p>While the BCL web page provides a convenient means of identifying and  
</p>
<p>downloading Measures, OpenStudio utilizes the BCL&rsquo;s API to integrate that 
</p>
<p>search and download functionality directly in its applications. Not only does this 
</p>
<p>improve convenience for the modeler, but it also allows OpenStudio applications 
</p>
<p>to identify when a more recent version of the Measure is available for use. In the 
</p>
<p>OpenStudio Application, the BCL is accessed from the &ldquo;Components &amp; Measures&rdquo; 
</p>
<p>menu (Fig.&nbsp;6.8).
</p>
<p>Once selected, a new BCL dialog pops up to allow search and selection of 
</p>
<p>Measures. Measures already downloaded appear with a gray checkbox next to them. 
</p>
<p>Clicking the checkbox next to one or more Measures and scrolling to the bottom of 
</p>
<p>the list reveals a download Button that may be used to add additional content to a 
</p>
<p>user&rsquo;s computer. In Fig.&nbsp;6.9 we can see that the ERV Measure has already been 
</p>
<p>downloaded and installed for use in an energy Model.
</p>
<p>6.3.1  Applying a&nbsp;Measure Immediately to&nbsp;a&nbsp;Model
</p>
<p>The OpenStudio Application offers two ways to use Measures: the &ldquo;Apply Measure 
</p>
<p>Now&rdquo; menu option and via the Measure ( ) Tab. &ldquo;Apply Measure Now&rdquo; is located 
</p>
<p>in the same menu used to open the BCL dialog (Fig.&nbsp;6.8) and is used to select and 
</p>
<p>apply a Measure to the active Model. As an example, consider the energy Model 
</p>
<p>with a single Zone served by a packaged rooftop unit shown in Fig.&nbsp;6.10.
</p>
<p>Selecting the Apply Measure Now option, the user is first prompted to save 
</p>
<p>their Model before proceeding to the Measure selection dialog (Fig.&nbsp; 6.11). 
</p>
<p>Navigating the same categories used on the BCL, we can quickly locate the 
</p>
<p>&ldquo;AddEnergyRecoveryVentilator&rdquo; Measure discussed previously. The OpenStudio 
</p>
<p>icon and blue BCL text indicate this Measure has been downloaded from the 
</p>
<p>BCL. Selecting that Measure updates the window with a description of the 
</p>
<p>Measure and several Measure-specific inputs that can be customized. In this 
</p>
<p>example, we have selected only the Packaged Rooftop Air Conditioner air loop 
</p>
<p>for the Measure to act on and accept the default values for the remaining inputs 
</p>
<p>related to heat exchanger efficiency.
</p>
<p>Fig. 6.8 Accessing the BCL from within the OpenStudio Application
</p>
<p>6.3 Using Measures Within the&nbsp;OpenStudio Application</p>
<p/>
</div>
<div class="page"><p/>
<p>180
</p>
<p>Clicking the &ldquo;Apply Measure&rdquo; Button transitions to a progress indicator while 
</p>
<p>the Measure is applied to the Model. After a brief wait, a new dialog appears con-
</p>
<p>taining the Measure&rsquo;s &ldquo;output.&rdquo; Just as Measure inputs vary, so do outputs. In this 
</p>
<p>case, the ERV Measure reports what it did to the Model: reporting how many air 
</p>
<p>loops it may have structurally modified along with Model parameters that have been 
</p>
<p>set or altered (Fig.&nbsp;6.12). This dialog would also report any errors that may have 
</p>
<p>occurred when applying the Measure. This feedback allows the user to determine if 
</p>
<p>the Measure behaved as expected, accepting those changes to the Model, or reject-
</p>
<p>ing the modification with the Cancel Button.
</p>
<p>Fig. 6.9 The BCL interface within the OpenStudio Application
</p>
<p>Fig. 6.10 Model HVAC air loop prior to applying Measure
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>181
</p>
<p>Figure 6.13 shows the OpenStudio HVAC ( ) Tab after the Measure was applied, 
</p>
<p>allowing us to visually confirm that the Measure added an ERV to the Packaged 
</p>
<p>Rooftop Air Conditioner loop and that the parameters for the ERV were set as 
</p>
<p>expected. Saving the Model once more will make this alteration permanent.
</p>
<p>6.3.2  Adding Measures to&nbsp;an&nbsp;OpenStudio Application 
</p>
<p>Workflow
</p>
<p>The second method of applying Measures to a Model utilizes the Application&rsquo;s 
</p>
<p>Measures ( ) Tab (Fig.&nbsp;6.14). The fundamental difference between this method and 
</p>
<p>using &ldquo;Apply Measure Now&rdquo; is that the Measures ( ) Tab does not permanently mod-
</p>
<p>ify the building Model. Measures are applied to the Model and affect simulation 
</p>
<p>results, but the Model itself is left untouched. This can be useful in seeing the effect of 
</p>
<p>a Measure without fully committing to that as a design feature in the building Model.
</p>
<p>Note that the Measures ( ) Tab has sections for three &ldquo;types&rdquo; of Measures. They 
</p>
<p>are OpenStudio Measures, EnergyPlus Measures, and Reporting Measures. Each 
</p>
<p>has a unique icon, and on the right side of the Tab, we note that several of the avail-
</p>
<p>able Measures have matching icons. To understand the meaning of these three cat-
</p>
<p>egories, it is important to understand what OpenStudio does when we push the  
</p>
<p>Button on the Run Simulations ( ) Tab. This run process or &ldquo;workflow&rdquo; is illus-
</p>
<p>trated in Fig.&nbsp;6.15.
</p>
<p>Fig. 6.11 Apply Measure Now window with ERV Measure selected
</p>
<p>6.3 Using Measures Within the&nbsp;OpenStudio Application</p>
<p/>
</div>
<div class="page"><p/>
<p>182
</p>
<p>As one would expect, the process begins with the OSM. The first Measures to 
</p>
<p>be applied to the Model are OpenStudio Measures, Measures that make full use of 
</p>
<p>OpenStudio&rsquo;s Object Model and data inheritance. An OpenStudio Measure that 
</p>
<p>removes an HVAC air loop removes not only the loop, but all of the objects within 
</p>
<p>it and any associated Zone or Plant Loop Connections. Similarly, an OpenStudio 
</p>
<p>Measure could alter a space type definition, simultaneously changing all of the 
</p>
<p>space&rsquo;s underlying definitions for loads, occupancy, schedules, etc. OpenStudio 
</p>
<p>Measures are the preferred means of modifying an OpenStudio Model.
</p>
<p>Fig. 6.12 Report from ERV Measure after application
</p>
<p>Fig. 6.13 Model HVAC air loop after applying Measure
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>183
</p>
<p>After all, OpenStudio Measures are applied to the Model, OpenStudio trans-
</p>
<p>lates the Model from an OSM to an EnergyPlus IDF in preparation for actually 
</p>
<p>running the simulation. At this point, EnergyPlus Measures can be applied to the 
</p>
<p>IDF.&nbsp;EnergyPlus Measures are most often used to make specific alterations to the 
</p>
<p>EnergyPlus IDF that may not yet be supported within the OpenStudio Object 
</p>
<p>Model. These might include new, experimental, or esoteric EnergyPlus features 
</p>
<p>that OpenStudio has yet to support. Examples at the time of writing include 
</p>
<p>Measures that add utility tariffs to the Model or modify EnergyPlus Energy 
</p>
<p>Management System (EMS) control logic. EnergyPlus Measures do not enjoy 
</p>
<p>the benefits of the OpenStudio Object Model, and are best suited for simple, 
</p>
<p>well-defined text additions or substitutions in the IDF file. Because of their  
</p>
<p>limitations, EnergyPlus Measures should be used sparingly.
</p>
<p>Following the application of any EnergyPlus Measures, OpenStudio invokes 
</p>
<p>the EnergyPlus simulation engine itself. This produces both high level summaries 
</p>
<p>Fig. 6.14 OpenStudio Application Measures Tab
</p>
<p>Fig. 6.15 High level OpenStudio workflow with Measures
</p>
<p>6.3 Using Measures Within the&nbsp;OpenStudio Application</p>
<p/>
</div>
<div class="page"><p/>
<p>184
</p>
<p>of the simulation results in an EnergyPlus eplustbl.htm file, along with a SQLite 
</p>
<p>database containing detailed time series results from the simulation. These (and 
</p>
<p>other) EnergyPlus output files are the subjects of the final class of Measures, 
</p>
<p>Reporting Measures. Reporting Measures can parse and format simulation results 
</p>
<p>for a number of purposes ranging from creating simple Model summaries to 
</p>
<p>applying automated quality check heuristics against the simulation results. 
</p>
<p>Reporting Measures allow the user to customize the simulation output to produce 
</p>
<p>static or interactive content suited to specific analysis needs or the target 
</p>
<p>audience.
</p>
<p>Figure 6.16 shows the Measures ( ) Tab after several different Measures have 
</p>
<p>been &ldquo;dragged and dropped&rdquo; into the three categories. In this example, we apply 
</p>
<p>two OpenStudio Measures that modify the HVAC systems in the building, one 
</p>
<p>EnergyPlus Measure that adds a utility rate tariff, and a Reporting Measure that 
</p>
<p>produces the standard OpenStudio HTML report. As with the Apply Measure 
</p>
<p>Now method, the user can select a Measure and modify all of its inputs on the 
</p>
<p>right side of the window. It is also important to note the  Buttons just to the 
</p>
<p>right of the  Button that allows a Measure to be removed from the workflow. 
</p>
<p>These arrows allow Measures to be reordered. This is important because Measures 
</p>
<p>are generally non- commutative or order dependent. Consider this example where 
</p>
<p>the &ldquo;AEDGOfficeHvacVavDx&rdquo; Measure operates on the Model before 
</p>
<p>&ldquo;AddEnergyRecoveryVentilator.&rdquo; In this case, the first Measure removes all exist-
</p>
<p>ing HVAC systems from the Model, replacing them with VAV systems before 
</p>
<p>ERVs are added. If the order is reversed, an ERV is first added to the Model&rsquo;s 
</p>
<p>existing HVAC systems. This modification is then eradicated when those systems 
</p>
<p>are replaced by VAV systems&nbsp;&ndash; quite likely not the intended result.
</p>
<p>Fig. 6.16 Measures added to a simulation workflow
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>185
</p>
<p>6.4  Introduction to&nbsp;Parametric Analysis
</p>
<p>In practice, we wish to compare the performance of various building designs 
</p>
<p>including individual EE measures or combinations thereof. The previous section 
</p>
<p>showed how Measures might be applied to an OpenStudio Model to create Design 
</p>
<p>Alternatives. While Measures make the process of altering the Model fast and 
</p>
<p>repeatable compared to manually altering it, comparison of results would still be 
</p>
<p>cumbersome; perhaps involving setup and management of multiple simulations 
</p>
<p>and transcription of relevant outputs into a spreadsheet. Comparative analysis of 
</p>
<p>Measure-based Design Alternatives is the role of another OpenStudio example 
</p>
<p>application, the Parametric Analysis Tool (PAT).
</p>
<p>PAT allows the user to quickly try out and compare specified combinations of 
</p>
<p>measures, optimize designs, calibrate models, perform parametric sensitivity analy-
</p>
<p>sis, and much more. This section focuses on utilizing Measures to manually con-
</p>
<p>struct Design Alternatives that can be simulated using local computing resources. 
</p>
<p>Chapter 7 delves more deeply into PAT&rsquo;s ability to explore design spaces utilizing a 
</p>
<p>variety of sampling and search algorithms that can be run on dedicated computing 
</p>
<p>hardware or in the cloud.
</p>
<p>6.4.1  Starting PAT
</p>
<p>When first launching PAT from the OpenStudio installer package the user has the 
</p>
<p>option to create a new project or open an existing project (Fig.&nbsp;6.17). An OpenStudio 
</p>
<p>project represents a particular analysis comparing results from multiple models and 
</p>
<p>resulting simulations.
</p>
<p>To create a new project:
</p>
<p>&bull; Click the &ldquo;Make New Project&rdquo; Button.
</p>
<p>&bull; Type the name6 for the project and click &ldquo;Continue&rdquo; as shown in Fig.&nbsp;6.18.
</p>
<p>&bull; Browse to the directory where the project should be saved and click the &ldquo;Open&rdquo; 
</p>
<p>Button (Fig.&nbsp; 6.19). PAT will create a new directory for the project at this 
</p>
<p>location.
</p>
<p>The user may also open an existing PAT project when first launching PAT,  
</p>
<p>or from PAT&rsquo;s file menu. In either case a dialog will open to locate the Project 
</p>
<p>directory. There is no file to select, just browse to the top-level of the project direc-
</p>
<p>tory. Figure&nbsp;6.20 illustrates selecting a previous project called &ldquo;Office_HVAC.&rdquo;
</p>
<p>As with most modern software applications, PAT&rsquo;s File menu also allows the 
</p>
<p>user to create a new project, open an existing project, save a project, or save a copy 
</p>
<p>of a project under a new name. Saving a copy of a project creates a new directory 
</p>
<p>structure containing all of the project&rsquo;s resources.
</p>
<p>6 Important note&nbsp;&ndash; project names should not include spaces.
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>186
</p>
<p>Fig. 6.17 Starting OpenStudio&rsquo;s Parametric Analysis Tool (PAT)
</p>
<p>Fig. 6.18 PAT new project dialog
</p>
<p>Fig. 6.19 Specifying a new PAT project&rsquo;s location
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>187
</p>
<p>6.4.2  Managing Measures in&nbsp;PAT
</p>
<p>Like the OpenStudio Application, PAT&rsquo;s functionality is broken down into Tabs 
</p>
<p>located along the left side of the window. The Tabs include:
</p>
<p> Analysis&nbsp; &ndash; Used to specify the analysis mode, seed models, weather files, 
</p>
<p>Measures, and Measure options;
</p>
<p> Design alternatives&nbsp;&ndash; Used to establish Design Alternatives;
</p>
<p> Outputs&nbsp;&ndash; Specifies outputs for algorithm-based analysis;
</p>
<p> Run simulations&nbsp;&ndash; Runs an analysis and manages the analysis server;
</p>
<p> Compare results&nbsp;&ndash; Used to view comparison reports; and
</p>
<p> Analysis server&nbsp;&ndash; Allows the user to view and interact with the underlying anal-
</p>
<p>ysis server.
</p>
<p>In general, a PAT workflow moves through the six vertical Tabs from top to bot-
</p>
<p>tom. PAT allows the user to specify Design Alternatives manually or automate the 
</p>
<p>process using a selection of algorithms. The analysis mode is selected at the top of 
</p>
<p>the Analysis ( ) Tab (Fig.&nbsp;6.21). The choice of mode dictates whether the Design 
</p>
<p>Alternatives ( ) or Outputs ( ) Tabs are used along with the types of computing 
</p>
<p>resources (local or cloud) that may be selected on the Run Simulations ( ) Tab. This 
</p>
<p>section focuses on PAT&rsquo;s &ldquo;manual&rdquo; mode. Algorithm-driven analyses are the subject 
</p>
<p>of Chap. 7.
</p>
<p>Just below the analysis mode selector are fields to identify a default &ldquo;seed&rdquo; 
</p>
<p>Model and weather file. At this point, the weather file is self-explanatory. The seed 
</p>
<p>Model is the initial Model that Measures in the project will be applied to. Clicking 
</p>
<p>on the  symbol allows the user to select the seed Model and weather file. Note that 
</p>
<p>PAT supports specifying multiple seed and weather files that may all be used within 
</p>
<p>a project for certain types of analyses.
</p>
<p>Fig. 6.20 Opening the &ldquo;Office_HVAC&rdquo; project in PAT
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>188
</p>
<p>As with the OpenStudio Application, PAT allows the selection of all three 
</p>
<p>Measure types. Click the  Buttons by the OpenStudio, EnergyPlus, or 
</p>
<p>Reporting Measure text to add Measures of that type to your project. The resulting 
</p>
<p>Measure Library dialog is structurally similar to the BCL dialog we used in the 
</p>
<p>OpenStudio Application. It provides the same search, download, and add function-
</p>
<p>ality discussed in the previous section with a few additions. Figure&nbsp;6.22 shows the 
</p>
<p>dialog for an existing project that serves as a useful example in expanding our 
</p>
<p>understanding of Measures.
</p>
<p>The Measure Library dialog allows the user to filter by Measure location, type, 
</p>
<p>category, and sub-category. When it first opens the dialog will have all locations 
</p>
<p>checked except for BCL (Online). It will also have only one Measure type checked, 
</p>
<p>based on which  Button was clicked. The category and sub-category options 
</p>
<p>are identical to the categories discussed in the previous section and are helpful 
</p>
<p>in&nbsp;locating a Measure more rapidly.
</p>
<p>Fig. 6.21 Specifying an analysis in PAT
</p>
<p>Fig. 6.22 PAT&rsquo;s Measure Library dialog for the &ldquo;Office_HVAC&rdquo; project
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>189
</p>
<p>OpenStudio Measures are located in one of four distinct locations:
</p>
<p> 1. My Project&nbsp;&ndash; Measures that have already been added to the current PAT project. 
</p>
<p>Such Measures will be denoted with a  under the &ldquo;Add&rdquo; column to indicate 
</p>
<p>they&rsquo;ve been added to the project.
</p>
<p> 2. Measure Directory&nbsp; &ndash; Measures stored in a user configurable &ldquo;MyMeasures&rdquo; 
</p>
<p>directory on your computer. This topic will be discussed further in Chap. 9, but 
</p>
<p>this directory generally will contain Measures that the user has customized or 
</p>
<p>intends to customize. These Measures will have a &ldquo;My&rdquo; label next to the Measure 
</p>
<p>name and may be added to the project by clicking the  Button.
</p>
<p> 3. Local&nbsp;&ndash; Includes any BCL Measures that may have already been downloaded. 
</p>
<p>These Measures will have a &ldquo;BCL&rdquo; label next to the Measure name and may be 
</p>
<p>added to the project by clicking the  Button.
</p>
<p> 4. BCL (Online)&nbsp;&ndash; Contains all publicly available Measures located in the online 
</p>
<p>BCL that have yet to be downloaded.
</p>
<p>Only Measures stored in Local or MyMeasures may be added to a PAT proj-
</p>
<p>ect, and only Measures added to the project may be used to create Design 
</p>
<p>Alternatives for comparison. BCL Measures cannot be added until they are first 
</p>
<p>downloaded&nbsp;&ndash; hence the reason the BCL selector is initially unchecked in the 
</p>
<p>Measures Library dialog. Figure&nbsp;6.23 shows the same project Measure Library 
</p>
<p>dialog with the BCL selector turned on and the Envelope/Fenestration subcate-
</p>
<p>gory selected. Downloading a Measure from the BCL to Local is as easy as 
</p>
<p>clicking the relevant  Button.
</p>
<p>Once downloaded, PAT will check to see if an updated version of a Measure is 
</p>
<p>available in the BCL each time the project is opened. Available updates will be 
</p>
<p> indicated with a  symbol in the &ldquo;updates&rdquo; column. Simply click the  to download 
</p>
<p>the latest version to your local library.
</p>
<p>Fig. 6.23 PAT&rsquo;s Measure Library with BCL fenestration content shown
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>190
</p>
<p>After making the desired selections with  and closing the BCL dialog, our 
</p>
<p>Measures are now loaded into the project. In the example shown in Fig.&nbsp;6.24, three 
</p>
<p>measures have been added.
</p>
<p>Recall from the previous section that the ordering of Measures matters. As in the 
</p>
<p>OpenStudio Application, Measures in PAT run from top to bottom in the user inter-
</p>
<p>face, and they may be reordered using the  or  arrows at the right. The , may 
</p>
<p>be used to delete a Measure from the project. Note that each Measure also has an  
</p>
<p>just to its left. This is used to expand and collapse the Measure, allowing the user to 
</p>
<p>specify Measure input arguments and more (Fig.&nbsp;6.25).
</p>
<p>Every Measure in a manual analysis project needs at least one Measure &ldquo;option.&rdquo; 
</p>
<p>An option describes a Measure and particular set of Measure arguments that will be 
</p>
<p>applied to create a specific Design Alternative. For example, a generic fan efficiency 
</p>
<p>Fig. 6.24 Three Measures added to a PAT project
</p>
<p>Fig. 6.25 Set window to wall ratio by Fa&ccedil;ade Measure expanded
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>191
</p>
<p>Measure would likely have an efficiency argument. Applying that generic Measure 
</p>
<p>with a specific value for efficiency would constitute an option representing a spe-
</p>
<p>cific fan product.
</p>
<p>Clicking the  Button adds a column to the right side of the grid for the 
</p>
<p>Measure. Newly created options have a generic option name, description, and 
</p>
<p>inherit any default values specified by the Measure. Figure&nbsp;6.26 depicts a newly 
</p>
<p>created &ldquo;Set Window to Wall Ratio by Fa&ccedil;ade&rdquo; Measure option with the Measure&rsquo;s 
</p>
<p>default values.
</p>
<p>The variable column and associated checkboxes are used to specify which argu-
</p>
<p>ments will vary across design options. Each option must be given a unique (and 
</p>
<p>meaningful) name that will be referenced when constructing Design Alternatives. 
</p>
<p>The option description field is free form and can be used to capture notes regarding 
</p>
<p>the option that may be used by reporting Measures. In Fig.&nbsp;6.27, three design options 
</p>
<p>have been created with variable window to wall ratios.
</p>
<p>The standard OpenStudio Results Measure must be added to every project as an 
</p>
<p>option for each Design Alternative (Fig.&nbsp; 6.28). Manual project reports and most 
</p>
<p>algorithmic workflows rely on outputs defined by this Measure to work properly. 
</p>
<p>PAT will run without this Measure and an associated Measure option, but compari-
</p>
<p>son results will not appear correctly.
</p>
<p>6.4.3  Creating Design Alternatives in&nbsp;PAT
</p>
<p>The Design Alternatives ( ) Tab is used to create Design Alternatives consisting of 
</p>
<p>a seed Model, weather file, and some combination of Measure options. Design alter-
</p>
<p>natives may be based on multiple seed models, allowing for the inclusion of mod-
</p>
<p>eled alternatives for which no Measure exists. Buttons near the top of the window 
</p>
<p>are used to create and copy individual alternatives. A Button to automatically create 
</p>
<p>Fig. 6.26 A newly created Measure option
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>192
</p>
<p>a design with each Measure option applied independently is also available. 
</p>
<p>Repeatedly pressing  creates sequentially named alternatives based on the 
</p>
<p>default seed Model and weather file with no options defined.
</p>
<p>Figure 6.29 illustrates this Tab with eight Design Alternatives specified. The 
</p>
<p>Tab&rsquo;s grid layout allows for rapid inspection, alteration, and naming of alternatives. 
</p>
<p>Clicking most of the fields brings up a menu that is automatically populated with 
</p>
<p>available choices. Design alternative name and description fields are free from text. 
</p>
<p>It is considered a best practice to enter meaningful descriptions in these fields to 
</p>
<p>document the project.
</p>
<p>Fig. 6.27 Window to wall ratio Measure with three design options
</p>
<p>Fig. 6.28 Ensuring the OpenStudio Results Measure is included with an option
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>193
</p>
<p>Design alternatives may be deleted using the  Button on the left side of the 
</p>
<p>screen. Rows may be rearranged manually using the  Buttons or sorted alphabeti-
</p>
<p>cally by clicking the grid headings. The order of Design Alternatives on this Tab has 
</p>
<p>no bearing on simulation order or results reporting and is simply used as an aid to 
</p>
<p>the modeler in defining the analysis.
</p>
<p>6.4.4  Running an&nbsp;Analysis in&nbsp;PAT
</p>
<p>PAT configures a &ldquo;mini server&rdquo; on your computer to perform local analysis. This is 
</p>
<p>essentially the same server that is used to run large-scale cloud analyses that will 
</p>
<p>be discussed in Chap. 7. PAT&rsquo;s server architecture enables it to easily migrate proj-
</p>
<p>ects between scalable computing systems. The local server begins to start up as 
</p>
<p>soon as you launch PAT and is usually ready to perform analysis within a minute. 
</p>
<p>This is indicated by a  message at the top of PAT&rsquo;s Run Simulations ( ) 
</p>
<p>Tab shown in Fig.&nbsp;6.30.
</p>
<p>For a manual analysis, leave &ldquo;Run Locally&rdquo; selected. Pressing the  
</p>
<p>Button starts running simulations using all available CPU cores less one for PAT 
</p>
<p>itself. In Fig.&nbsp;6.31 we see that my meager laptop has four cores and is able to run 
</p>
<p>three simulations at a time. As Design Alternative simulations (data points) are 
</p>
<p>completed; associated rows are updated with run times, status, an active report 
</p>
<p>selector , and  indicators showing that the final Model and results are avail-
</p>
<p>able for review.
</p>
<p>PAT&rsquo;s status will continue updating to apprise the user of progress. Changing 
</p>
<p>Tabs during active simulation is prevented to avoid accidentally altering an analysis 
</p>
<p>mid-run. As data points complete, the user can inspect results from the Run 
</p>
<p>Fig. 6.29 PAT&rsquo;s design alternatives Tab
</p>
<p>Useful Tip: Quickly set multiple options for a Measure by highlighting the 
</p>
<p>first option, typing the first letter of the desired option, tapping the down 
</p>
<p>arrow, and repeating. This is useful for quickly selecting things like the 
</p>
<p>OpenStudio Results Measure in this example by repeatedly pressing the &ldquo;R&rdquo; 
</p>
<p>and down keys.
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>194
</p>
<p>Simulations ( ) Tab by clicking on the report selector icon (Fig.&nbsp;6.32). In this case, 
</p>
<p>the user may select from the default EnergyPlus tabular report or the OpenStudio 
</p>
<p>Results Measure that was added as an option for all the Design Alternatives.
</p>
<p>Each data point may also be expanded by clicking on the  Button on the left 
</p>
<p>side of the Tab. Figure&nbsp;6.33 shows the WWR 0.2 data point expanded revealing the 
</p>
<p>Measure output messages for that alternative. Here we see that the window to wall 
</p>
<p>ratio Measure changed the South-facing fa&ccedil;ades from 0.4 to 0.2 at no cost since we 
</p>
<p>didn&rsquo;t enter a cost input. The lighting loads were unchanged since that option was 
</p>
<p>set to &ldquo;None&rdquo; for this alternative. The OpenStudio Results Measure also states that 
</p>
<p>it generated a report for the data point. This output should be the first recourse for 
</p>
<p>any user faced with a data point that has failed for one reason or another.
</p>
<p>Fig. 6.30 PAT&rsquo;s Run Tab indicates it is ready to simulate
</p>
<p>Fig. 6.31 PAT analysis in progress
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>195
</p>
<p>In the event that a problem with a data point is corrected or the alternative is 
</p>
<p>modified in some way, PAT allows individual data points to be re-run without 
</p>
<p>repeating the entire set of simulations. A checkbox next to each Design 
</p>
<p>Alternative&rsquo;s name allows the user to specify which data points are to be re-run. 
</p>
<p>In Fig.&nbsp;6.34 the &ldquo;WWR 0.4&rdquo; alternative has been selected for repeat simulation. 
</p>
<p>Note that an additional  option appears at the top of the window when any 
</p>
<p>checkboxes are ticked.
</p>
<p>Fig. 6.32 PAT completed analysis
</p>
<p>Fig. 6.33 An individual PAT data point expanded
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>196
</p>
<p>6.4.5  Comparing Results in&nbsp;PAT
</p>
<p>PAT includes three built-in reports in its Compare Results ( ) Tab that help the 
</p>
<p>user compare Design Alternatives. The default summary table compares  
</p>
<p>consumption, demand, and economic metrics for all of the Design Alternatives.  
</p>
<p>A selection field near the top of the table allows the user to specify which of the 
</p>
<p>alternatives is to be used as the datum for performance comparison. Analysis 
</p>
<p>results shown in subsequent rows are relative to the datum&rsquo;s modeled values. 
</p>
<p>Figure&nbsp;6.35 contains results for our example problem with the Baseline data point 
</p>
<p>(seed Model + no Measures) used as a datum. Note that the cost columns are all 
</p>
<p>Fig. 6.34 Re-running a single data point
</p>
<p>Fig. 6.35 PAT summary table on the reports Tab
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>197
</p>
<p>empty in this example because we did not specify a utility tariff Measure or any 
</p>
<p>capital costs for the window to wall ratio or lighting power reduction changes to 
</p>
<p>the building.
</p>
<p>The reports selection field at the top of the window may also be used to  
</p>
<p>produce end use stacked bar charts broken down by fuel type like the one shown 
</p>
<p>in Fig.&nbsp;6.36.
</p>
<p>PAT includes a third reporting option that is used by professionals working in 
</p>
<p>some utility programs that offer incentives for high performance buildings. That 
</p>
<p>topic is beyond the scope of this textbook, but those interested can learn more about 
</p>
<p>how PAT works with these programs at http://eda-pt.org.
</p>
<p>6.4.6  The OpenStudio Analysis Server Tab
</p>
<p>The Analysis Server ( ) Tab (Fig.&nbsp; 6.37) provides a view into PAT&rsquo;s underlying 
</p>
<p>OpenStudio Server. While this Tab is generally not necessary for manual analyses, 
</p>
<p>it provides our first glimpse at OpenStudio&rsquo;s deep capacity for large-scale analysis 
</p>
<p>including sampling and optimization&nbsp;&ndash; the topics of Chap. 7.
</p>
<p>Fig. 6.36 End user comparison chart
</p>
<p>6.4 Introduction to&nbsp;Parametric Analysis</p>
<p/>
<div class="annotation"><a href="http://eda-pt.org">http://eda-pt.org</a></div>
</div>
<div class="page"><p/>
<p>198
</p>
<p>6.5  Checkpoint Nine: Introduction to&nbsp;Parametrics
</p>
<p>For our next checkpoint exercise, let&rsquo;s revisit our Primary School Model from Chap. 
</p>
<p>4 as the subject of an introductory study using OpenStudio Measures. Use the initial 
</p>
<p>PAT dialog window to create a new project called &ldquo;MyPATSchoolProject.&rdquo; 
</p>
<p>Remember that the directory you select indicates where the PAT project&rsquo;s directory 
</p>
<p>will be created. In the Analysis ( ) Tab select Chap. 4  MyPrimarySchoolHVAC.
</p>
<p>osm as the default seed Model and the weather file you have used in previous exer-
</p>
<p>cises as shown in Fig.&nbsp;6.38.
</p>
<p>Unlike the OpenStudio Application, the OpenStudio Results Measure is not 
</p>
<p>automatically included in a PAT workflow. Click the  Button in the Reporting 
</p>
<p>Measures section to bring up the Measure Library dialog window (Fig.&nbsp;6.39). Locate 
</p>
<p>the Results Measure and click the  Button to add it to your project.
</p>
<p>Once the standard reporting Measure has been added to the project, create a 
</p>
<p>Measure Option for it with the  Button. Name the new Option &ldquo;Report.&rdquo; 
</p>
<p>Also, make sure that at least one of the Result Measure&rsquo;s arguments is checked as a 
</p>
<p>variable as shown in Fig.&nbsp;6.40. This is not normally needed, but we are going to test 
</p>
<p>run our seed Model by itself in PAT, which needs at least one variable to run an 
</p>
<p>analysis. You can come back later and uncheck this as a variable (or not) once we 
</p>
<p>have added proper EE Measures and variables to the project.
</p>
<p>Proceed to the Design Alternatives ( ) Tab to create a baseline for our analysis. 
</p>
<p>This data point will consist of our seed Model and the Results Measure. Click the 
</p>
<p> to add the alternative shown in Fig.&nbsp;6.41.
</p>
<p>Save your project before moving on to PAT&rsquo;s Run Simulations ( ) Tab. Once you 
</p>
<p>see  at the top of the window, you can press the  Button to run the 
</p>
<p>baseline data point. Figure&nbsp;6.42 illustrates the baseline simulation in process.
</p>
<p>Fig. 6.37 PAT&rsquo;s OpenStudio Cloud Management Console Tab
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>199
</p>
<p>Fig. 6.38 Creating a new primary school PAT project
</p>
<p>Fig. 6.39 Adding the OpenStudio Results Measure to the project
</p>
<p>Fig. 6.40 Creating a Report Option for the project
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>200
</p>
<p>When the simulation is complete, the Run Simulations ( ) Tab should look like 
</p>
<p>the window shown in Fig.&nbsp;6.43. Note that the data point can be expanded to show 
</p>
<p>steps in the associated workflow. The reports pull down menu offers the EnergyPlus 
</p>
<p>standard report along with the OpenStudio Results Measure output (Fig.&nbsp;6.44) we 
</p>
<p>added as an option for the data point.
</p>
<p>The Compare Results ( ) Tab is shown as Fig.&nbsp;6.45. This particular comparison 
</p>
<p>table isn&rsquo;t particularly interesting since it only contains the single baseline data 
</p>
<p>point. Nevertheless, we can see from the OpenStudio Report and the comparison 
</p>
<p>table that the baseline Model did run properly, and we can proceed to adding EE 
</p>
<p>Measures to perform a proper comparison of Design Alternatives.
</p>
<p>Fig. 6.41 Creating the baseline Design Alternative in the project
</p>
<p>Fig. 6.42 Running the project containing only the baseline
</p>
<p>Fig. 6.43 Examining the baseline data point
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>201
</p>
<p>To add additional Measures and Design Alternatives, first return to the Analysis 
</p>
<p>( ) Tab and click the  Button next to the OpenStudio Measures section of the 
</p>
<p>window. Let&rsquo;s first begin by downloading some HVAC system Measures from the 
</p>
<p>BCL. Check the search boxes as shown in Fig.&nbsp;6.46 to limit our search to whole 
</p>
<p>system HVAC OpenStudio Measures available on the BCL.
</p>
<p>Click the  Button next to the &ldquo;AedgK12HvacDualDuctDoas&rdquo; Measure to down-
</p>
<p>load it to our Local Measures Library. Using the current filter settings, that Measure 
</p>
<p>appears to vanish. Never fear! Adding the Local Library to our filter reveals that it 
</p>
<p>was downloaded and is available to add to the project using the  Button (Fig.&nbsp;6.47).
</p>
<p>Download the &ldquo;AedgK12HvacFanCoilDoas&rdquo; and &ldquo;AedgK12HvacGshpDoas&rdquo; 
</p>
<p>Measures and add all three to your project (Fig.&nbsp;6.48).
</p>
<p>Dismiss the Measure Library browser and expand the AedgK12HvaDualDuctDoas 
</p>
<p>Measure (Fig.&nbsp;6.49). Add a Measure Option as shown in Fig.&nbsp;6.50. Be sure to give 
</p>
<p>it a meaningful name. Also note that this particular Measure has three arguments. 
</p>
<p>We will set the total cost argument to be $150,000 for the purpose of this exercise. 
</p>
<p>The other arguments should be left to their default values.
</p>
<p>Fig. 6.44 Reviewing the monthly end use breakdown for the baseline
</p>
<p>Fig. 6.45 PAT comparison summary containing only the baseline
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>202
</p>
<p>Create Measure Options for the other two HVAC Measures as shown in Figs.&nbsp;6.51 
</p>
<p>and 6.52. Be sure to provide appropriate Option names and costs for each system.
</p>
<p>The last Measure we will add to our HVAC system comparison is a utility tariff 
</p>
<p>or rate. Along with each system&rsquo;s capital cost, which we entered above, the utility 
</p>
<p>rate will be used to calculate the relative cost of each Design Alternative in addition 
</p>
<p>to energy savings. Utility rates are implemented as EnergyPlus Measures, so be sure 
</p>
<p>to click the  Button next to the correct Measure category. Download and add 
</p>
<p>the &ldquo;XcelEDATariffSelectionandModelSetup&rdquo; Measure to the Project (Fig.&nbsp;6.53). 
</p>
<p>This Measure adds energy rates charged by Xcel Energy, the utility that will serve 
</p>
<p>our school in the Denver Colorado area.
</p>
<p>Fig. 6.46 Finding EE Measures for the project
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>203
</p>
<p>Finally, create a Measure Option for the utility rate as shown in Fig.&nbsp;6.54. Note 
</p>
<p>that this Measure contains two input arguments. Each is a list of choices for the 
</p>
<p>electricity and gas tariffs appropriate for our building. Select &ldquo;Commercial&rdquo; and 
</p>
<p>&ldquo;Small CG&rdquo; for the electricity and gas rates respectively.
</p>
<p>Defining the additional Design Alternatives is performed on the Design 
</p>
<p>Alternatives ( ) Tab. Add three additional alternatives as shown in Fig.&nbsp;6.55. It&rsquo;s 
</p>
<p>worth taking the time to type in proper names for each alternative so that the com-
</p>
<p>parison report will be more meaningful. Relying on PAT&rsquo;s automatic naming scheme 
</p>
<p>Fig. 6.47 Downloading the AEDGK12HVACDualDuctDoas Measure
</p>
<p>Fig. 6.48 Adding three AEDG K-12 HVAC Measures to the project
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>204
</p>
<p>of Alternative 1, Alternative 2, etc. may be fast, but it&rsquo;s not always so easy to remem-
</p>
<p>ber what was included in Alternative 13 after you&rsquo;ve run a bunch of simulations!
</p>
<p>Also, don&rsquo;t forget to assign the Utility Tariff and Report Options to each Design 
</p>
<p>Alternative. One way to quickly do this is to check the Baseline Alternative and 
</p>
<p>then use the  Button to make copies. This preserves all of the Options 
</p>
<p>from the copied data point, allowing you to simply change different Options in 
</p>
<p>subsequent points.
</p>
<p>Once the Alternatives have been defined, save your Project. It&rsquo;s time to kick off 
</p>
<p>our simulations in the Run Simulations ( ) Tab. You can save a bit of time by 
</p>
<p>checking just the new data points and clicking , or you can click  to 
</p>
<p>run everything. Figure&nbsp;6.56 shows the Run Simulations ( ) Tab with simulations 
</p>
<p>in progress.
</p>
<p>Fig. 6.49 Defaults for a new dual duct DOAS option
</p>
<p>Fig. 6.50 Defining the dual duct DOAS option and entering system cost
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>205
</p>
<p>While simulations are running, it&rsquo;s worth taking a moment to look at the struc-
</p>
<p>ture of a typical PAT Project directory (Fig.&nbsp;6.57). As data points run and complete, 
</p>
<p>subdirectories with rather cryptic names appear. Each of these directories corre-
</p>
<p>sponds to one of our data points, and includes the data point&rsquo;s OSM, results, etc. The 
</p>
<p>data_point.zip also includes the detailed EnergyPlus files related to the data point.
</p>
<p>Compare Fig.&nbsp;6.57 with Fig.&nbsp;6.58 and note that one of the data point IDs shown 
</p>
<p>in PAT matches one of these directories. If you should ever need access to specific 
</p>
<p>files associated with a given Design Alternative&nbsp; &ndash; be it a Model, results, or 
</p>
<p>EnergyPlus files for troubleshooting; start by finding the data point ID, then going 
</p>
<p>to the appropriate subdirectory in the PAT Project&rsquo;s localResults directory.
</p>
<p>While we have that data point &ldquo;open,&rdquo; take a moment to look at the diagnostic 
</p>
<p>messages from each Measure in the data point&rsquo;s workflow. Note that both the dual 
</p>
<p>duct DOAS and fan coil DOAS Measures were &ldquo;skipped,&rdquo; but that the GSHP 
</p>
<p>DOAS Measure removed the old HVAC system from the Model and replaced it 
</p>
<p>with the new system. The utility tariff was also applied to the Model. As stated 
</p>
<p>earlier in the chapter, these messages can be incredibly valuable in verifying that a 
</p>
<p>workflow was executed as expected and troubleshooting problems when things 
</p>
<p>don&rsquo;t go as planned.
</p>
<p>Fig. 6.51 Creating a fan coil DOAS Measure option
</p>
<p>Fig. 6.52 Creating a GSHP DOAS Measure option
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>206
</p>
<p>Now that we have multiple Design Alternatives, the Compare Results ( ) Tab is 
</p>
<p>more meaningful. Selected the Baseline data point as the basis for comparison and 
</p>
<p>you should see a performance summary similar to Fig.&nbsp;6.59. Because we have added 
</p>
<p>capital and utility costs to our data points, PAT is able to compare not only energy 
</p>
<p>performance, but also the simple payback and total life cycle cost of the proposed 
</p>
<p>HVAC alternatives.
</p>
<p>Note that the Ground Source Heat Pump alternative contains data in both the 
</p>
<p>district heating and cooling columns while the other alternatives do not. Does this 
</p>
<p>make sense? What is the best system choice? Is there a clear winner?
</p>
<p>Fig. 6.53 Adding the Xcel Energy utility rate tariff to the project
</p>
<p>Fig. 6.54 Creating a utility rate Measure option
</p>
<p>Fig. 6.55 Adding three additional Design Alternatives to the project
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>207
</p>
<p>Next, let&rsquo;s add a few more EE Measures into the mix. Return to the Analysis  
</p>
<p>( ) Tab and add the Measures shown in Fig.&nbsp;6.60. You will need to locate and down-
</p>
<p>load these from the BCL.
</p>
<p>Use Table&nbsp; 6.1 for Option names and arguments as you set up your Measure 
</p>
<p>Options.
</p>
<p>Fig. 6.56 Simulating the four Design Alternatives
</p>
<p>Fig. 6.57 PAT Project directory structure
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>208
</p>
<p>Fig. 6.58 Reviewing the Measure actions that produced the GSHP DOAS data point
</p>
<p>Fig. 6.59 Comparing the three Design Alternatives against the baseline
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>209
</p>
<p>On the Design Alternatives ( ) Tab, add a new Option that combines the GSHP 
</p>
<p>system with all of the new EE Measures we just added. Again, don&rsquo;t forget to make 
</p>
<p>sure that this new alternative includes the utility tariff and standard report as shown 
</p>
<p>in Fig.&nbsp;6.61.
</p>
<p>Run the additional Design Alternative on the Run Simulations ( ) Tab and use 
</p>
<p>the Compare Results ( ) Tab to compare the results with the previous Alternatives. 
</p>
<p>Figures&nbsp;6.62 and 6.63 compare the additional data point with the previous HVAC 
</p>
<p>alternatives. Do these results make sense?
</p>
<p>To conclude this exercise, recall that none of the Measures we have added to our 
</p>
<p>school project included more than one Option. Let&rsquo;s get a bit of practice in with 
</p>
<p>multiple Options by adding the &ldquo;Reduce Lighting Loads by Percentage&rdquo; Measure to 
</p>
<p>our Project as shown in Fig.&nbsp;6.64.
</p>
<p>Fig. 6.60 Adding additional Measures to the project
</p>
<p>Table 6.1 EE Measure Option names and arguments
</p>
<p>Measure name Option name Arguments
</p>
<p>AedgK12ElectricEquipment Improve electric 
equipment efficiency
</p>
<p>$2 per equipment
</p>
<p>AedgK12Kitchen Improve kitchen 
efficiency
</p>
<p>$40,000
</p>
<p>200 students
</p>
<p>AedgK12ElectricEquipmentControls Improve electric 
equipment controls
</p>
<p>$1500
</p>
<p>AedgK12RoofConstructions Improved roof 
construction
</p>
<p>$1 per ft2 insulated
</p>
<p>$0 per ft2 solar
</p>
<p>AedgK12FenestrationAndDaylightingControls Fenestration and 
daylight controls
</p>
<p>$1 per ft2 daylight
</p>
<p>$1 per ft2 view
</p>
<p>$2 per ft2 skylight
</p>
<p>$0.5 per ft2 shading
</p>
<p>$2 per ft2 light shelf
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>210
</p>
<p>Fig. 6.61 Defining a Design Alternative with GSHP and additional EE Measures
</p>
<p>Fig. 6.62 Comparing the four Design Alternatives to the baseline
</p>
<p>Fig. 6.63 Comparing end use breakdowns for the baseline and Design Alternatives
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>211
</p>
<p>Note that arguments we intend to vary across an option must be checked as 
</p>
<p>variables or PAT will not allow us to change their values. It is also important that 
</p>
<p>each Option be given a unique and descriptive name. Lastly, note that we have 
</p>
<p>placed the lighting load reduction Measure ahead of the fenestration and daylight-
</p>
<p>ing controls Measure. This ensures that we modify all light fixtures in each Space 
</p>
<p>before daylighting controls are applied.
</p>
<p>Create two more Design Alternatives that include the GSHP System, all of the 
</p>
<p>previous EE Measures, and either the 20% or 40% LPD reduction Option. 
</p>
<p>Running those additional points should produce the comparison shown in 
</p>
<p>Figs.&nbsp;6.65 and 6.66.
</p>
<p>Have our changes to LPD had the expected results in the last two Design 
</p>
<p>Alternatives? What other Measures might we consider for our school, and in what 
</p>
<p>combinations? Now that you have a reasonable understanding of how Measures 
</p>
<p>work with PAT and access to additional Measures from the BCL, consider exploring 
</p>
<p>the school&rsquo;s design for additional energy and cost savings.
</p>
<p>Fig. 6.64 Adding the &ldquo;Reduce Lighting Loads by Percentage&rdquo; Measure with two options
</p>
<p>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</p>
<p/>
</div>
<div class="page"><p/>
<p>212
</p>
<p>Fig. 6.65 Comparing the two additional Design Alternatives with the baseline
</p>
<p>Fig. 6.66 Comparing end user breakdowns for baseline and alternatives
</p>
<p>6 OpenStudio Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>213
</p>
<p>6.6  Additional Exercises
</p>
<p> 1) Recommended additional exercises involving the Checkpoint Nine Model 
</p>
<p>include application of additional Measures within the PAT. The BCL contains a 
</p>
<p>large number of Measures related to envelope, lighting, loads, systems and more. 
</p>
<p>Spend some time navigating the available Measures and create additional Design 
</p>
<p>Alternatives for further comparison with the Checkpoint Nine results.
</p>
<p> 2) Assess the relative merits of various efficiency measures on the &ldquo;Additional 
</p>
<p>Exercises&rdquo; Model you created in Chap. 4 using PAT. You may consider some of 
</p>
<p>the same Measures used in Checkpoint Nine but are encouraged to explore other 
</p>
<p>Measures available in the BCL.
</p>
<p>References
</p>
<p>ASHRAE (2011) Advanced energy design guide for K-12 school buildings: 50% energy savings
Fleming K, Long N, Swindler A (2012) Building Component Library: an online repository to 
</p>
<p>facilitate building energy model creation. ACEEE summer study on energy efficient buildings, 
Pacific Grove, CA, August 12&ndash;17
</p>
<p>https://bcl.nrel.gov/node/39440
https://bcl.nrel.gov/node/39783
https://bcl.nrel.gov/node/82771
https://bcl.nrel.gov/node/83307
https://bcl.nrel.gov/node/83591
https://bcl.nrel.gov/node/83647
https://github.com/NREL/openstudio-standards
https://www.ruby-lang.org/en/
</p>
<p>References</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39440">https://bcl.nrel.gov/node/39440</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39783">https://bcl.nrel.gov/node/39783</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/82771">https://bcl.nrel.gov/node/82771</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83307">https://bcl.nrel.gov/node/83307</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83591">https://bcl.nrel.gov/node/83591</a></div>
<div class="annotation"><a href="https://bcl.nrel.gov/node/83647">https://bcl.nrel.gov/node/83647</a></div>
<div class="annotation"><a href="https://github.com/NREL/openstudio-standards">https://github.com/NREL/openstudio-standards</a></div>
<div class="annotation"><a href="https://www.ruby-lang.org/en/">https://www.ruby-lang.org/en/</a></div>
</div>
<div class="page"><p/>
<p>215&copy; Springer International Publishing AG, part of Springer Nature 2018 
L. Brackney et al., Building Energy Modeling with OpenStudio, 
https://doi.org/10.1007/978-3-319-77809-9_7
</p>
<p>Chapter 7
</p>
<p>Parametric Analysis with&nbsp;OpenStudio
</p>
<p>7.1  Introduction to&nbsp;Parametric Analysis
</p>
<p>The previous chapter introduced the concept of OpenStudio Measures and how 
</p>
<p>they can be applied individually and in combination to a Model to create and  
</p>
<p>compare different Design Alternatives. While an improvement from modifying 
</p>
<p>models by hand, generating results, and comparing them; the manual analysis 
</p>
<p>workflow is still labor intensive, non-scalable, and will not necessarily yield the 
</p>
<p>best solution for a given problem. In this chapter, we will discuss how OpenStudio 
</p>
<p>enables automated creation and search of large building parameter spaces. We&rsquo;ll 
</p>
<p>also look at how these same approaches may be used to &ldquo;tune&rdquo; models of existing 
</p>
<p>buildings to best match measured energy consumption data.
</p>
<p>7.2  OpenStudio Server
</p>
<p>In the previous chapter, we alluded to a &ldquo;server&rdquo; that ran on a user&rsquo;s computer to 
</p>
<p>manage multiple simulations in PAT&rsquo;s manual mode. To understand and utilize 
</p>
<p>OpenStudio for parametric analysis, it is important to have a better understanding 
</p>
<p>of what OpenStudio Server is and (to a limited degree) how it works. Figure&nbsp;7.1 
</p>
<p>illustrates the basic relationship between PAT, the &ldquo;OpenStudio Server,&rdquo; and the 
</p>
<p>workers who create and simulate the individual data points.
</p>
<p>OpenStudio Server has three primary components:
</p>
<p> 1. Web Interface&nbsp; &ndash; A minimal interface that allows for user interaction with 
</p>
<p>analysis projects and the contents of the Results Database,
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
978-3-319-77809-9_7) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_7&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_7&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>216
</p>
<p> 2. Results Database&nbsp;&ndash; A database used to store high level simulation results for 
</p>
<p>a project, and
</p>
<p> 3. R&nbsp;&ndash; An open source platform for statistical computing and analysis.1
</p>
<p>OpenStudio Workers are a fourth component in the overall architecture, separate 
</p>
<p>from but integral to the server. Each worker node is an independent computing 
</p>
<p>instance, configured with OpenStudio, EnergyPlus, and supporting software. When 
</p>
<p>provided with a seed Model, weather file, and one or more Measures; a worker has 
</p>
<p>everything it needs to create, simulate, and post-process results for a given Design 
</p>
<p>Alternative. While workers generate all of the output available in a typical simula-
</p>
<p>tion run, file size and storage capacity generally dictate that only a subset of that 
</p>
<p>data be returned to the Results Database for subsequent use. We&rsquo;ll discuss shortly 
</p>
<p>how Reporting Measures, along with PAT&rsquo;s Outputs ( ) Tab, are used to specify 
</p>
<p>which values are stored.
</p>
<p>R does most of the &ldquo;heavy lifting&rdquo; for any OpenStudio Server-based analysis, 
</p>
<p>defining individual data points to be simulated. The fundamental difference 
</p>
<p>between the &ldquo;mini server&rdquo; used locally for manual analyses and a full OpenStudio 
</p>
<p>Server implementation used in algorithmic mode is the inclusion of R and support-
</p>
<p>ing files. The manner in which R defines data points, reviews results, prescribes 
</p>
<p>additional points, etc. varies based on the algorithm chosen, and is discussed in the 
</p>
<p>following section.
</p>
<p>Lastly, OpenStudio Server manages an API that translates PAT projects into 
</p>
<p>problem formulations for R, communication with worker nodes, queuing of simula-
</p>
<p>tion jobs, and communication of results back to PAT.&nbsp; Additional details of 
</p>
<p>OpenStudio Server are presented in Chap. 9.
</p>
<p>1 https://www.r-project.org/.
</p>
<p>Fig. 7.1 PAT, OpenStudio Server, and Workers
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
<div class="annotation"><a href="https://www.r-project.org/">https://www.r-project.org/</a></div>
</div>
<div class="page"><p/>
<p>217
</p>
<p>7.3  Algorithms in&nbsp;PAT
</p>
<p>PAT has been designed to enable large-scale exploration of design spaces using a 
</p>
<p>range of sampling, optimization, and machine learning algorithms. Switching from 
</p>
<p>&ldquo;Manual&rdquo; to &ldquo;Algorithmic&rdquo; in the Analysis selection field of the Analysis ( ) Tab 
</p>
<p>modifies PAT&rsquo;s interface and functionality in a number of ways. Immediately  
</p>
<p>obvious are the additions of &ldquo;sampling method&rdquo; as a selection field near the top of 
</p>
<p>the window along with new sections in the Tab for algorithm settings, analysis files, 
</p>
<p>and server scripts (Fig.&nbsp;7.2).
</p>
<p>In this example, Latin Hypercube Sampling (LHS) is selected as the algorithm 
</p>
<p>that will be used to guide exploration of the design space. Immediately below the 
</p>
<p>sampling method field are collapsible sections denoted by a  Button for algorithm 
</p>
<p>settings, supplementary analysis files, and server scripts. A  Button pro-
</p>
<p>vides a link to detailed documentation for each algorithm and its settings.
</p>
<p>Figure 7.3 shows the contents of the sampling method choice list and the range 
</p>
<p>of algorithms that OpenStudio server currently supports. While complete docu-
</p>
<p>Fig. 7.2 PAT analysis Tab in algorithmic mode
</p>
<p>Fig. 7.3 Selecting an algorithm in PAT
</p>
<p>7.3  Algorithms in&nbsp;PAT</p>
<p/>
</div>
<div class="page"><p/>
<p>218
</p>
<p>mentation for most algorithms is available via , it&rsquo;s important to have 
</p>
<p>a general understanding of what each algorithm attempts to do and the kinds of 
</p>
<p>applications that each is best suited for.
</p>
<p>7.3.1  Single Run
</p>
<p>Selecting the Single Run algorithm creates a single data point including the seed 
</p>
<p>Model and each Measure applied with its static/default value. This algorithm is 
</p>
<p>primarily used for testing the seed Model and Measures on a server prior to running 
</p>
<p>a larger analysis.
</p>
<p>7.3.2  Pre-Flight
</p>
<p>&ldquo;Pre-Flight&rdquo; takes the Single Run algorithm a step further, creating three data points 
</p>
<p>utilizing the Seed Model with all measures applied using their minimum, mean, and 
</p>
<p>maximum arguments.
</p>
<p>7.3.3  Repeat Run
</p>
<p>This algorithm replicates the data point defined by the Single Run algorithm a speci-
</p>
<p>fied number of times. It is primarily used for software development and testing of 
</p>
<p>the OpenStudio Server itself, and is not of general interest.
</p>
<p>7.3.4  Baseline Perturbation
</p>
<p>This is an experimental algorithm and is not recommended for general use at the 
</p>
<p>time of writing.
</p>
<p>7.3.5  Diagonal
</p>
<p>This is an experimental algorithm and is not recommended for general use at the 
</p>
<p>time of writing.
</p>
<p>Tip: This algorithm is so-named because it is intended as a &ldquo;pre-flight&rdquo; 
</p>
<p>check of the seed model and measures prior to performing any larger 
</p>
<p>analysis. Pre-flight checks are strongly recommended prior to committing 
</p>
<p>significant computing resources for sampling and optimization problems.
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>219
</p>
<p>7.3.6  Design of&nbsp;Experiments (DOE)
</p>
<p>Design Of Experiments or &ldquo;DOE&rdquo; is a sampling method that varies each indepen-
</p>
<p>dent variable separately. The number of samples (sometimes referred to as levels) 
</p>
<p>in a DOE problem determines how many times the effect of each independent vari-
</p>
<p>able will be evaluated. So a two level DOE with two independent variables would 
</p>
<p>sample the design space shown in Fig.&nbsp;7.4 resulting in four total data points.
</p>
<p>The &ldquo;full factorial&rdquo; DOE implemented in OpenStudio Server generates a total 
</p>
<p>of mn data points for a problem with &ldquo;n&rdquo; independent variables and &ldquo;m&rdquo; levels,. 
</p>
<p>With problems of any significant complexity, the total number of simulations to be 
</p>
<p>performed in a DOE quickly grows out of control. For this reason, mathematicians 
</p>
<p>have devised alternate sampling methods that attempt to reduce the number of 
</p>
<p>samples without greatly compromising the quality of an analysis.
</p>
<p>7.3.7  Latin Hypercube Sampling (LHS)
</p>
<p>Latin Hypercube Sampling,2 or &ldquo;LHS,&rdquo; attempts to generate a sparser set of samples 
</p>
<p>than DOE using pseudo-random distributions of independent variables. In LHS, 
</p>
<p>independent variable ranges are divided into segments containing equally probable 
</p>
<p>2 McKay et&nbsp;al. (1979).
</p>
<p>Fig. 7.4 A DOE with two independent variables and two sampling levels
</p>
<p>7.3  Algorithms in&nbsp;PAT</p>
<p/>
</div>
<div class="page"><p/>
<p>220
</p>
<p>intervals. The concept of a &ldquo;Latin Square,&rdquo; a square array in which array elements 
</p>
<p>appear exactly once in each row and column, is applied to those independent ranges 
</p>
<p>to define samples. A simple example involving two independent variables and four 
</p>
<p>samples is shown in Fig.&nbsp;7.5.
</p>
<p>Note that number of samples dictates the number of intervals applied to each 
</p>
<p>independent variable and consequently, the total number of data points that will be 
</p>
<p>defined. For a fixed number of samples, as the number of independent variables 
</p>
<p>increases, the multi-dimensional &ldquo;grid&rdquo; discretizing the sample space becomes 
</p>
<p>coarser and coarser, resulting in fewer data points in each dimension, and a rougher 
</p>
<p>approximation of the variable&rsquo;s distribution. We will revisit the concept of indepen-
</p>
<p>dent variable distributions in Sect. 7.4, but for the moment think of LHS as a reason-
</p>
<p>ably efficient means of assessing how different design parameters (Measure 
</p>
<p>arguments) affect building performance.
</p>
<p>7.3.8  Morris Method
</p>
<p>The previous algorithms generate data points irrespective of their relative perfor-
</p>
<p>mance in terms of energy use intensity (EUI), cost, or whatever other combination 
</p>
<p>of criteria might be of interest. The Morris Method and optimization algorithms 
</p>
<p>described in Sects. 7.3.9 through 7.3.13 all rely on knowing something about how 
</p>
<p>well any given data point achieves a performance objective. Abstractly, we define a 
</p>
<p>performance objective function &ldquo;F&rdquo; in terms of our independent variables, the vec-
</p>
<p>tor x. We will discuss exactly how we define F(x) using PAT in Sect. 7.5.1, but for 
</p>
<p>the moment imagine that algorithms have a means of quantifying how well any 
</p>
<p>given data point meets an objective like EUI.
</p>
<p>Fig. 7.5 LHS concept 
with two independent 
variables and four samples
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>221
</p>
<p>The Morris Method3 is used to assess how sensitive the objective function is to 
</p>
<p>changes in the independent variables. For example if window-to-wall ratio and insu-
</p>
<p>lation R value were both available as Measure arguments in a PAT analysis, the 
</p>
<p>algorithm can be used to inform which of those variables had a more significant 
</p>
<p>impact on EUI for a particular building. Unlike DOE or LHS, which identify all 
</p>
<p>samples (and associated input argument values) a priori, Morris method starts by 
</p>
<p>&ldquo;randomly&rdquo; selecting a set of samples within the available input ranges, simulating 
</p>
<p>those data points, and evaluating the objective function for each. Input arguments 
</p>
<p>are modified, one at a time, creating new data points, simulations, and objective 
</p>
<p>functions. A new starting point is randomly selected and the entire process is 
</p>
<p>repeated a number of times. If r is the number of times and n is the number of inde-
</p>
<p>pendent variables, this produces a total of r&nbsp;*&nbsp;(n&nbsp;+&nbsp;1) data points (Fig.&nbsp;7.6).
</p>
<p>7.3.9  Sobol Method
</p>
<p>The Sobol4 Method is an alternative to Morris for identifying parametric sensitivity 
</p>
<p>for a problem. Sobol decomposes the variance of outputs into fractions that are 
</p>
<p>attributed to inputs. Sobol typically requires more point evaluations than Morris, 
</p>
<p>providing better coverage of the parameter space at the expense of computation time.
</p>
<p>3 Morris (1991).
4 Sobol (2001).
</p>
<p>Fig. 7.6 Morris method concept with initial and subsequent data points for r&nbsp;=&nbsp;4
</p>
<p>7.3  Algorithms in&nbsp;PAT</p>
<p/>
</div>
<div class="page"><p/>
<p>222
</p>
<p>7.3.10  Fourier Amplitude Sensitivity Test (FAST99) Method
</p>
<p>The Fourier Amplitude Sensitivity Test (FAST99)5 is a third method of estimating 
</p>
<p>parametric sensitivity based on a variation of the Sobol Method. It improves (com-
</p>
<p>putationally) on Sobol, and generally falls somewhere between Morris and Sobol in 
</p>
<p>terms of computational performance and accuracy.
</p>
<p>7.3.11  Optim
</p>
<p>Optim is the simplest goal-seeking algorithm supported by OpenStudio Server. It is 
</p>
<p>based largely on a Nelder-Mead Simplex method6 that moves in single directions 
</p>
<p>(linear combinations of x) until no further improvement in F(x) is achieved. 
</p>
<p>Figure&nbsp;7.7 shows a conceptual progression of a Simplex approach for two indepen-
</p>
<p>dent variables and a well-behaved performance surface. Because optim calculates 
</p>
<p>approximate derivatives for the performance index, it is not recommended to apply 
</p>
<p>it to problems with non-differentiable surfaces. This includes design problems with 
</p>
<p>discrete independent variables (e.g. wall insulation values of R20, R30, R40, etc.) 
</p>
<p>5 Saltelli et&nbsp;al. (1999).
6 Nelder and Mead (1965).
</p>
<p>Fig. 7.7 Optim conceptual progression to optimal solution
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>223
</p>
<p>Since a great many building optimization problems of interest fall into this category, 
</p>
<p>optim should always be used with an abundance of caution.
</p>
<p>7.3.12  Particle Swarm Optimization (PSO)
</p>
<p>Particle Swarm Optimization was originally intended to simulate social behavior, 
</p>
<p>and loosely modeled the behavior of flocks of birds and schools of fish.7 In this 
</p>
<p>algorithm a set of particles (data points) migrate around the design space based on 
</p>
<p>an equation that governs their relative velocities, proximity to local optimae, and 
</p>
<p>proximity to the most optimal solution observed by the swarm. Over time, the 
</p>
<p>swarm generally drifts towards the best known solution, but individual particles are 
</p>
<p>granted a degree of autonomy to explore local optimae that may yield better solu-
</p>
<p>tions (Fig.&nbsp;7.8). This potentially allows the algorithm to identify a global optimum 
</p>
<p>when performance surfaces contain multiple local minimae. Because the algorithm 
</p>
<p>does not require the performance surface be differentiable, it is better suited to 
</p>
<p>address a broader class of optimization problems than &ldquo;optim.&rdquo;
</p>
<p>7.3.13  Nondominated Sorting Genetic Algorithm 2 (NSGA2)
</p>
<p>The last three optimizers discussed in this section are based (at least in part) around 
</p>
<p>a class of solvers referred to as &ldquo;genetic algorithms,&rdquo; which attempt to digitally 
</p>
<p>mimic the concept of natural selection.8,9 In a genetic algorithm, the independent 
</p>
<p>variables are typically discretized or &ldquo;encoded&rdquo; to construct a population of solu-
</p>
<p>tions. Figure&nbsp;7.9 contains examples for three data points with roof and wall insula-
</p>
<p>tion, lighting, and window-wall-ratio as independent variables; effectively identifying 
</p>
<p>the &ldquo;DNA&rdquo; of a particular building. In the case of variables that are already discrete 
</p>
<p>(e.g. insulation values of R20, R30, R40, etc.) no encoding is necessary&nbsp;&ndash; this enables 
</p>
<p>genetic methods to address building design problems that other algorithms cannot.
</p>
<p>7 Kennedy and Eberhart (1995).
8 Barricelli (1957).
9 Fraser (1957).
</p>
<p>Fig. 7.8 Example particle swarm optimization progression (Figure adapted from Ephramac, 2017)
</p>
<p>7.3  Algorithms in&nbsp;PAT</p>
<p/>
</div>
<div class="page"><p/>
<p>224
</p>
<p>Once a population has been established, the data points are simulated and F(x) 
</p>
<p>is evaluated. The next generation&rsquo;s &ldquo;offspring&rdquo; are created by combining data 
</p>
<p>points (parents) that performed well. Poorly performing data points are removed 
</p>
<p>from the &ldquo;gene pool,&rdquo; and the process repeats. Genetic algorithms may also intro-
</p>
<p>duce the concept of &ldquo;mutation,&rdquo; random modifications to an offspring&rsquo;s DNA that 
</p>
<p>enable the algorithm to identify better solutions by chance. This iterative process 
</p>
<p>is illustrated in Fig.&nbsp;7.10.
</p>
<p>Unlike other optimizers, NSGA2 does not require a scalar objective function. 
</p>
<p>As generations progress from an initially random population, a locus of points, 
</p>
<p>F(x), is generated that represent the best identified solutions that have been 
</p>
<p>observed. This locus is called a &ldquo;Pareto front,&rdquo; and represents a collection of 
</p>
<p>Fig. 7.9 Genetic 
algorithm &ldquo;DNA&rdquo; for three 
building data points
</p>
<p>Fig. 7.10 Genetic algorithm applied to a building optimization problem
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>225
</p>
<p>solutions that are &ldquo;good&rdquo; in some sense. Figure&nbsp;7.11 illustrates the results of a 
</p>
<p>multi-variate optimization that seeks to minimize heating and cooling energy use. 
</p>
<p>Which solution is best? The answer to that question is&nbsp;&ndash; it depends. For this prob-
</p>
<p>lem do we value cooling electricity use more than heating gas consumption? The 
</p>
<p>Pareto Front illustrates the tradeoff between these competing goals, and the 
</p>
<p>&ldquo;best&rdquo; solution likely exists somewhere on that curve. One solution might be to 
</p>
<p>apply the associated energy costs as weighting factors to effectively turn the 
</p>
<p>problem into a univariate optimization problem, but as we&rsquo;ll see in subsequent 
</p>
<p>examples, a singularly optimal solution is rarely that straightforward.
</p>
<p>In the case of the NSGA2 algorithm, the relative distances between data points 
</p>
<p>and the Pareto Front are used to sort or rank solutions for pairing and reproduc-
</p>
<p>tion.10 The algorithm also gives preference to solutions which are not clumped 
</p>
<p>together near other solutions, promoting their genetic characteristics into subse-
</p>
<p>quent generations. As with other genetic algorithms, the process proceeds until a 
</p>
<p>specific number of generations has been reached, or an optimization convergence 
</p>
<p>criteria has been met.
</p>
<p>7.3.14  Genetic Algorithm with&nbsp;Island Evolution (GAISL)
</p>
<p>GAISL is another genetic algorithm variant that partitions populations into isolated 
</p>
<p>&ldquo;islands&rdquo; for reproduction and mutation.11 Occasionally a data point will &ldquo;migrate&rdquo; 
</p>
<p>to another island, allowing subpopulations to share genetic material.
</p>
<p>10 Deb et&nbsp;al. (2002).
11 Belding (1995).
</p>
<p>Fig. 7.11 Multi-variate 
optimization of heating 
and cooling energy use 
with Pareto Front
</p>
<p>7.3  Algorithms in&nbsp;PAT</p>
<p/>
</div>
<div class="page"><p/>
<p>226
</p>
<p>7.3.15  Strength Pareto Evolutionary Algorithm 2 (SPEA2)
</p>
<p>As its name might suggest, SPEA2 is also a multi-objective optimization algorithm 
</p>
<p>that makes use of Pareto Front information to inform how the algorithm progresses. 
</p>
<p>SPEA2 is also a genetic algorithm and shares many similarities to the NSGA2 
</p>
<p>approach. SPEA2 differs in how it utilizes Pareto information to cluster data points 
</p>
<p>and match pairs for propogation into subsequent generations.12 Comparison of 
</p>
<p>SPEA2 and NSGA2 for a specific power system dispatch optimization problem 
</p>
<p>suggests that SPEA2 is capable of finding slightly better/more diverse sets of solu-
</p>
<p>tions than NSGA2 at the expense of increased computation time due to its compu-
</p>
<p>tational complexity.13 The authors have not performed extensive comparisons of 
</p>
<p>these two algorithms for building design optimization problems.
</p>
<p>7.3.16  R-GENetic Optimization Using Derivatives 
</p>
<p>(RGENOUD)
</p>
<p>RGENOUD, is a hybrid solver that combines the strengths of a genetic algorithm 
</p>
<p>(discrete variable capability, robustness in finding global optimum, etc.) with the 
</p>
<p>potential speed of gradient-based solvers like optim.14 In the case of RGENOUD, 
</p>
<p>derivative estimates inform propogation between generations to quickly climb hills 
</p>
<p>or decend valleys of the performance surface without significantly compromising 
</p>
<p>the algorithms stability and likelyhood of identifying a global minima. The authors 
</p>
<p>regularly use RGENOUD for building optimization problems, and generally that it 
</p>
<p>offers a reasonable trade-off between computation speed and performance.
</p>
<p>7.4  Working with&nbsp;Measure Variables and&nbsp;Arguments
</p>
<p>Algorithmic mode significantly alters the Measure section of the Analysis ( ) Tab. 
</p>
<p>The concept of manual mode&rsquo;s Measure &ldquo;option&rdquo; no longer applies, and variable 
</p>
<p>checkboxes now become selection fields that allow the user to specify the nature of 
</p>
<p>Measure inputs. Measure inputs may be set to one of four types in PAT:
</p>
<p> 1. Argument&nbsp;&ndash; Fixes the quantity as a static value for the analysis.
</p>
<p> 2. Continuous&nbsp;&ndash; Assigns a continuous probability density function to a variable.
</p>
<p> 3. Discrete&nbsp; &ndash; Allows the user to specify a specific set of distinct values with  
</p>
<p>associated weights.
</p>
<p> 4. Pivot&nbsp; &ndash; Forces the entire analysis to be repeated against each specified  
</p>
<p>(discrete) value.
</p>
<p>12 Zitzler and Thiele (1998).
13 King et&nbsp;al. (2010).
14 Mebane and Sekhon (2011).
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>227
</p>
<p>By default, all Measure inputs are considered arguments unless explicitly 
</p>
<p>changed to another type. This allows the user to vary, for example, only the 
</p>
<p>window- to- wall ratio in the Set Window to Wall Ratio by Fa&ccedil;ade Measure. Multiple 
</p>
<p>inputs in a single Measure may vary, and they need not all be defined as the same 
</p>
<p>variable type. Figure&nbsp;7.12 provides a good example involving the Window to Wall 
</p>
<p>Ratio by Fa&ccedil;ade Measure. In this case, the window to wall ratio is a continuous 
</p>
<p>variable, sill height is a constant, and the cardinal direction of the windows changed 
</p>
<p>by the Measure will vary according to a discrete distribution.
</p>
<p>Figure 7.13 shows the distribution of window to wall ratio values that the 
</p>
<p>Measure might apply to the seed Model over 100 simulations. As the number of 
</p>
<p>simulations increases, the histogram would become flatter, better approximating the 
</p>
<p>uniform distribution requested.
</p>
<p>Fig. 7.12 Assigning multiple variable types to a Measure&rsquo;s inputs
</p>
<p>Fig. 7.13 Uniform distribution for window to wall ratio
</p>
<p>7.4  Working with&nbsp;Measure Variables and&nbsp;Arguments</p>
<p/>
</div>
<div class="page"><p/>
<p>228
</p>
<p>A discrete distribution for the side of the building the Measure will alter  
</p>
<p>windows on is shown in Fig.&nbsp;7.14 for a population of 100 data points. The discrete 
</p>
<p>option is appropriate here because the cardinal direction argument in the Measure 
</p>
<p>is a choice list comprised of North, South, East, and West. Additional options may 
</p>
<p>be added by clicking the  Button and removed with the  Buttons next to each 
</p>
<p>value/weight pair. The weight values are normalized to determine how frequently 
</p>
<p>a value might appear in a population. In this case, each of the options has a 25% 
</p>
<p>chance of occurring.
</p>
<p>PAT supports three additional types of distributions for sampling problems 
</p>
<p>involving continuous variables: normal, log normal, and triangular that are com-
</p>
<p>monly used in statistical analysis and modeling. Most readers will likely be familiar 
</p>
<p>with the normal distribution shown in Fig.&nbsp;7.15. Changing the distribution type in 
</p>
<p>PAT adds a mean input field. In this case, we&rsquo;ve requested that the algorithm pro-
</p>
<p>duce a distribution of window to wall ratio values with a mean of 0.4 and standard 
</p>
<p>deviation of 0.2. The histogram shows a possible distribution of Measure inputs 
</p>
<p>over 100 simulations.
</p>
<p>Fig. 7.14 Discrete distribution for cardinal direction
</p>
<p>Fig. 7.15 Normal distribution for window to wall ratio
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>229
</p>
<p>Figure 7.16 illustrates distribution of window to wall ratios one might expect 
</p>
<p>when a log normal distribution is applied to a population of 100 simulations.
</p>
<p>Note in both the normal and log normal cases that the minimum and maximum 
</p>
<p>entries in PAT do not limit the possible input values that might be generated by a 
</p>
<p>sampling algorithm.15 In the case of the normal distribution there are extreme 
</p>
<p>results in the distribution&rsquo;s tail with negative window to wall ratios. In the log 
</p>
<p>normal case, the Measure would be asked to modify the seed Model to produce 
</p>
<p>window to wall ratios exceeding 1.0, also a physical impossibility. Well-written 
</p>
<p>Measures will &ldquo;trap&rdquo; such situations and limit inputs to reasonable values, report-
</p>
<p>ing a warning in the process. We&rsquo;ll discuss best practices for writing Measures in 
</p>
<p>Chap. 9, but is it safe to assume that all Measures will be sufficiently robust 
</p>
<p>against nonsensical inputs? Because of this possibility, the authors recommend 
</p>
<p>using the triangular distribution in lieu of others.
</p>
<p>Figure 7.17 illustrates a potential triangular distribution of window to wall ratio 
</p>
<p>over 100 samples. Results are strictly constrained by the minimum and maximum 
</p>
<p>values, with the peak of the triangle occurring near the mean (or more accurately 
</p>
<p>the mode) of the triangular distribution. Triangular distributions can be used to 
</p>
<p>roughly approximate both normal and log normal distributions, while ensuring that 
</p>
<p>Measure inputs and resulting data points are reasonable.
</p>
<p>That final variable type supported by PAT is a &ldquo;pivot.&rdquo; At first glance, Pivots 
</p>
<p>might appear to behave like discrete variables, as the user can enter values with 
</p>
<p>the  Button and remove them with the  Buttons. However, one complete sam-
</p>
<p>pling problem is performed for each value of a pivot variable. An analysis prob-
</p>
<p>lem with 100 samples and 3 pivots would create a total of 300 data points to be 
</p>
<p>simulated. Why might you use a pivot variable? One common use for them is 
</p>
<p>not in performing an analysis of a single building, rather studying how effi-
</p>
<p>ciency measures might apply to many types of buildings. Figure&nbsp;7.18 illustrates 
</p>
<p>just this situation.
</p>
<p>15 While samplingalgorithms (e.g. LHS) will not respect prescribed maximum and minimum  
values, they are used to constrain solutions generated by PAT&rsquo;s optimizers.
</p>
<p>Fig. 7.16 LogNormal distribution for window to wall ratio
</p>
<p>7.4  Working with&nbsp;Measure Variables and&nbsp;Arguments</p>
<p/>
</div>
<div class="page"><p/>
<p>230
</p>
<p>In this example, the &ldquo;Create DOE Prototype Building&rdquo; Measure and OpenStudio 
</p>
<p>Standards Gem introduced in Chap. 6 are used to create an entire building Model 
</p>
<p>from scratch. Note that the seed Model in this project is called &ldquo;empty.osm,&rdquo; which 
</p>
<p>is literally an empty Model. The building type input for the Measure is set as a pivot 
</p>
<p>with Small, Medium, and Large Office as values. Any of the Measure&rsquo;s 13 other 
</p>
<p>building types including schools, hospitals, hotels, and retail could also be added to 
</p>
<p>expand the study. The building template and climate zone inputs are left as argu-
</p>
<p>ments for ASHRAE 90.1-2010 and climate zone 5B respectively. Combining this 
</p>
<p>with the &ldquo;Set Window to Wall Ratio by Fa&ccedil;ade&rdquo; Measure along with an appropriate 
</p>
<p>sampling algorithm allows us to investigate the effect of window variation on mul-
</p>
<p>tiple building types. This is an excellent example of the kind of flexibility that 
</p>
<p>OpenStudio, Measures, and PAT provide.
</p>
<p>Fig. 7.18 &ldquo;Pivoting&rdquo; an analysis on building type
</p>
<p>Fig. 7.17 Triangle distribution for window to wall ratio
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>231
</p>
<p>7.5  Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode
</p>
<p>In addition to the option to select and configure algorithms in the Analysis ( ) 
</p>
<p>Tab, a number of other changes manifest throughout PAT&rsquo;s tabs&nbsp;&ndash; some obvious 
</p>
<p>and some subtle. For example, since an algorithm is used to specify all Design 
</p>
<p>Alternatives, there is no use for PAT&rsquo;s Design Alternatives ( ) Tab as shown in 
</p>
<p>Fig.&nbsp;7.19.
</p>
<p>7.5.1  The Outputs Tab in&nbsp;Algorithmic Mode
</p>
<p>Analysis via algorithm tends to produce very large data sets. As such, the meth-
</p>
<p>ods for visualizing results and teasing out valuable insights differ from the simple 
</p>
<p>table views available in manual mode. In addition, some algorithms (e.g. optimiz-
</p>
<p>ers) are goal seeking, and require specification of performance metrics to func-
</p>
<p>tion properly. PAT&rsquo;s Outputs ( ) Tab, shown in Fig.&nbsp;7.20, is designed to specify 
</p>
<p>key simulation outputs for use in post-processing large sets of simulation results 
</p>
<p>or as a means of guiding optimizers. At a minimum, the Outputs ( ) Tab needs 
</p>
<p>the OpenStudio Results Measure to be available to provide a nominal set of out-
</p>
<p>puts, although additional reporting Measures may be used to add more outputs.
</p>
<p>Pressing the  Button brings up a dialog of all outputs specified by the 
</p>
<p>reporting Measure (Fig.&nbsp;7.21). The user may select all of the outputs, or only indi-
</p>
<p>vidual outputs via check boxes.
</p>
<p>Fig. 7.20 PAT&rsquo;s Outputs Tab in algorithmic mode
</p>
<p>Fig. 7.19 PAT&rsquo;s Design Alternatives Tab in algorithmic mode
</p>
<p>7.5  Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode</p>
<p/>
</div>
<div class="page"><p/>
<p>232
</p>
<p>Once selected, outputs appear in the Outputs ( ) Tab along with additional fields 
</p>
<p>(Fig.&nbsp;7.22). The &ldquo;visualize&rdquo; field should be set to true for any variables the user 
</p>
<p>wishes to preserve from worker node simulations for use in visualizations or subse-
</p>
<p>quent analysis.
</p>
<p>The remaining columns in the Outputs ( ) Tab are used to specify objective 
</p>
<p>function, F(x). They include:
</p>
<p> 1. Objective Function&nbsp;&ndash; Should be set to true for any variables that will be included 
</p>
<p>as part of an objective function (an element in vector x).
</p>
<p> 2. Target Value&nbsp;&ndash; The target value for the output variable that will be sought by the 
</p>
<p>goal-seeking algorithm.
</p>
<p> 3. Weighting Factor&nbsp; &ndash; A multiplier used to create linear combinations of error 
</p>
<p>functions in multi-objective optimization problems.
</p>
<p> 4. Objective Function Groups&nbsp;&ndash; This argument only appears when an algorithm 
</p>
<p>that performs multi-objective analysis is in use. Use an integer to group perfor-
</p>
<p>mance indices or assigning each index to its own group number.
</p>
<p>Fig. 7.21 Outputs available from the OpenStudio Results Measure
</p>
<p>Fig. 7.22 Configuring selected outputs
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>233
</p>
<p>It is important to note that many optimization algorithms require scalar  
</p>
<p>performance metrics. Multi-objective optimization is frequently achieved through 
</p>
<p>linear combination (weighted average) of separate performance indices as shown 
</p>
<p>in the following equation:
</p>
<p> 
F w f t w f t w f t
</p>
<p>n n n
x( ) = -( ) + -( ) + -( )1 1 1
</p>
<p>2
</p>
<p>2 2 2
</p>
<p>2 2
</p>
<p> 
</p>
<p>where:
</p>
<p>wi is the ith weighting factor,
</p>
<p>fi is a performance metric computed by simulating a data point, which is a function 
</p>
<p>of x, and
</p>
<p>ti is a target value associated with the ith performance metric.
</p>
<p>The f t
i i
-( )
</p>
<p>2
</p>
<p> terms in the equation represents an &ldquo;L2 norm&rdquo; of the error 
</p>
<p>between metric and target. Although some algorithms can use other norms, the L2 
</p>
<p>norm is commonly used by goal-seeking algorithms that require a positive definite 
</p>
<p>performance index.
</p>
<p>7.5.2  The Run Tab in&nbsp;Algorithmic Mode
</p>
<p>The size of algorithm-based analysis problems generally exceeds the computational 
</p>
<p>capability of a personal computer. PAT has been designed to run these sorts of anal-
</p>
<p>yses in the cloud or on dedicated servers. While PAT&rsquo;s &ldquo;mini server&rdquo; still launches 
</p>
<p>in the background, the application does not support algorithms using local comput-
</p>
<p>ing resources. For that reason, PAT&rsquo;s Run ( ) Tab will initially look like Fig.&nbsp;7.23 
</p>
<p>when first selected in Algorithmic Mode.
</p>
<p>Selecting &ldquo;Run on Cloud&rdquo; as the Run option changes the Run ( ) Tab signifi-
</p>
<p>cantly (Fig.&nbsp;7.24).
</p>
<p>Run on Cloud produces a dialog that enables the user to specify either an 
</p>
<p>&ldquo;Existing Remote Server&rdquo; or Amazon Cloud. Provisioning an existing, dedicated 
</p>
<p>Fig. 7.23 PAT&rsquo;s Run Tab in algorithmic mode
</p>
<p>7.5  Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode</p>
<p/>
</div>
<div class="page"><p/>
<p>234
</p>
<p>server with OpenStudio is beyond the scope of this text. Interested users are referred 
</p>
<p>to https://github.com/NREL/OpenStudio-server for further guidance on the topic.
</p>
<p>Amazon Web Service (AWS) has been pre-provisioned with Amazon Machine 
</p>
<p>Images (AMIs) for OpenStudio Server that enables users to leverage large-scale 
</p>
<p>computing with minimal effort and cost. New users will need to establish an account 
</p>
<p>at https://aws.amazon.com. The AWS web console enables tracking and manage-
</p>
<p>ment of computing resources, security credentials, billing details, etc. Figure&nbsp;7.25 
</p>
<p>depicts the AWS console with a link to its &ldquo;Key Pair&rdquo; management tool highlighted. 
</p>
<p>Establishing a key pair is the first step in linking OpenStudio to AWS. Clicking on 
</p>
<p>this link takes the user to a management screen with a  Button allowing cre-
</p>
<p>ation of a new set of credentials. Follow the instructions on AWS and make note of 
</p>
<p>the new access and secret keys before proceeding.
</p>
<p>Fig. 7.24 PAT&rsquo;s Run Tab with Run on Cloud selected
</p>
<p>Fig. 7.25 AWS console with secret key option highlighted
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server">https://github.com/NREL/OpenStudio-server</a></div>
<div class="annotation"><a href="https://aws.amazon.com">https://aws.amazon.com</a></div>
</div>
<div class="page"><p/>
<p>235
</p>
<p>The following steps begin the process of setting up PAT to use AWS as a remote 
</p>
<p>computing cluster for large-scale analysis:
</p>
<p> 1. In the PAT Run ( ) Tab, select &ldquo;Run on Cloud&rdquo; with &ldquo;Amazon Cloud&rdquo; as the 
</p>
<p>server type.
</p>
<p> 2. Press the  Button and choose a cluster name to store your AWS cluster 
</p>
<p>settings.
</p>
<p> 3. Press the  Button in the AWS Credentials area and follow the prompts to enter 
</p>
<p>the access and secret key information created from the AWS console.
</p>
<p>The cluster name is used to save PAT&rsquo;s settings for AWS including the number of 
</p>
<p>workers, size of compute nodes, etc. Multiple setting sets may be stored for use as 
</p>
<p>an analysis is scaled up. Like the cluster name, the AWS credential name is used by 
</p>
<p>PAT to help the user manage access credential configurations, and multiple sets may 
</p>
<p>be stored to assign analyses to different AWS accounts.
</p>
<p>A field labeled &ldquo;AMI Name&rdquo; specifies the version of OpenStudio that the server 
</p>
<p>and worker nodes will use. This list may include a large number of major and minor 
</p>
<p>OpenStudio versions. It is recommended that you use a major release (one ending 
</p>
<p>in a .0) that corresponds with the version of OpenStudio installed on your computer. 
</p>
<p>The specific version of OpenStudio and the Standards Gem included in the AMI are 
</p>
<p>listed next to the AMI Name field.
</p>
<p>The Server and Worker Instance Type fields allow the user to configure the pro-
</p>
<p>cessing capability and storage size of the primary server and workers used to per-
</p>
<p>form an analysis. The user is referred to AWS documentation related to server and 
</p>
<p>worker options, but PAT provides a brief description of the node configuration and 
</p>
<p>approximate cost/hour next to the server choice field. A PAT analysis requires a 
</p>
<p>server and a minimum of one worker. Figure&nbsp;7.26 illustrates a cluster configured to 
</p>
<p>run an analysis with an &ldquo;m3.2xlarge&rdquo; server and 2&nbsp;m3.2xlarge workers at a total cost 
</p>
<p>of approximately $1.6816 per hour. Each machine has 8 CPUs so a total of 16 work-
</p>
<p>ers along with a few of the server&rsquo;s spare nodes are available for simulation.
</p>
<p>Once configured and saved with the  Button, the user should press the 
</p>
<p> Button next to the Cluster Status indicator on the right side of the UI.&nbsp;A dialog 
</p>
<p>(Fig.&nbsp;7.27) explaining the user&rsquo;s responsibility to monitor and manage AWS com-
</p>
<p>puting resources appears and must be acknowledged before proceeding.
</p>
<p>At this point, the server and worker provisioning process begins as shown in 
</p>
<p>Fig.&nbsp;7.28. A startup dialog states that the process may take many minutes.
</p>
<p>Clicking on the  Button will open the AWS console in a web browser, 
</p>
<p>allowing the user to monitor the startup process as shown in Figs.&nbsp;7.29 and 7.30.
</p>
<p>Once the server is running, the Server Status indicator will change from  to . 
</p>
<p>Two new Buttons also appear in the Run ( ) Tab:  and . Clicking the 
</p>
<p> Button starts the analysis on the server. As in Manual mode, progress may 
</p>
<p>be monitored within PAT as shown in Fig.&nbsp;7.31. The  Button functionality will 
</p>
<p>be discussed in the next section.
</p>
<p>16 Amazon routinely updates its pricing structure. Prices listed in PAT are only estimates, and the 
user is ultimately responsible for knowing what costs may be incurred by an analysis.
</p>
<p>7.5  Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode</p>
<p/>
</div>
<div class="page"><p/>
<p>236
</p>
<p>Fig. 7.26 Server and worker node configuration in PAT&rsquo;s Run Tab
</p>
<p>Fig. 7.27 PAT AWS responsibility dialog
</p>
<p>Fig. 7.28 AWS cluster starting up in PAT
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>237
</p>
<p>One notable difference between running in manual mode with local computing 
</p>
<p>resources and on the server is that detailed simulations are not automatically down-
</p>
<p>loaded from the cloud. These files can be quite large. Clicking on the  or  Buttons 
</p>
<p>next to a data point will download the OpenStudio Model or completed data point 
</p>
<p>zip file. The cloud Buttons appear as a  when a download has occurred. Data point 
</p>
<p>files are lost when the server shuts down, so it is important to download results that 
</p>
<p>may be of particular interest while the server is running.
</p>
<p>Fig. 7.29 AWS cluster starting up in the AWS console
</p>
<p>Fig. 7.30 AWS cluster nearly ready for use in the AWS console
</p>
<p>Fig. 7.31 Cloud run completed
</p>
<p>7.5  Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode</p>
<p/>
</div>
<div class="page"><p/>
<p>238
</p>
<p>When you are finished using AWS, it is important to shut the cluster down 
</p>
<p>properly. This can be accomplished using the  Button. Quitting PAT will also 
</p>
<p>bring up a dialog providing the user with the choice of terminating the cluster or 
</p>
<p>leaving it running for the next PAT session to connect to. AWS nodes continue to 
</p>
<p>incur costs to the user regardless of whether simulations are running or not. It is 
</p>
<p>recommended that the user quickly check the AWS console when finishing work 
</p>
<p>to make sure all instances are terminated as expected.
</p>
<p>7.6  Working with&nbsp;OpenStudio Server
</p>
<p>The OpenStudio Analysis Server ( ) Tab is of much greater importance with  
</p>
<p>algorithmic workflows. This same content may also be accessed through any web 
</p>
<p>browser by clicking the  Button in the Run ( ) Tab. The top-level view of 
</p>
<p>OpenStudio server, shown in Fig.&nbsp;7.32, provides a summary of completed or in- 
</p>
<p>progress projects and analyses along with navigation options.
</p>
<p>A single OpenStudio Server analysis (a specific run of a project) is shown in 
</p>
<p>Fig.&nbsp;7.33. This view provides a high-level summary of the project, links to more 
</p>
<p>detail about the analysis, and status updates for all data points that have been 
</p>
<p>completed, queued for simulation, or are in process. A few important links on this 
</p>
<p>page include:
</p>
<p> 1. Project Log&nbsp;&ndash; Near the bottom of the Analysis Information box is a view log file 
</p>
<p>link, which can be helpful in debugging failed analyses.
</p>
<p> 2. Downloads&nbsp; &ndash; These links download high-level information and simulation 
</p>
<p>results as CSV or R Data Frames for subsequent analysis. These results include 
</p>
<p>only analysis inputs and outputs that have been defined in PAT.&nbsp;Detailed simula-
</p>
<p>tion results associated with individual data points must be downloaded in PAT 
</p>
<p>Fig. 7.32 OpenStudio Cloud Management Console front page
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>239
</p>
<p>or via individual data point web links. Additional downloads may be available 
</p>
<p>here upon completion of an analysis depending upon the algorithm being used.
</p>
<p> 3. Data Points&nbsp;&ndash; The bottom of the analysis page includes a snapshot of all data 
</p>
<p>points along with their status, run times, and data point-specific links including 
</p>
<p>a zip file containing models and simulation results.
</p>
<p> 4. Data and Visualizations&nbsp;&ndash; A number of useful project summaries and interac-
</p>
<p>tive visualization tools are built into OpenStudio server.
</p>
<p>The variables link near the top center of the analysis web page provides a concise 
</p>
<p>summary of variables and arguments utilized by the analysis algorithm. While any 
</p>
<p>applicable Measures are summarized in an adjacent page, this section provides 
</p>
<p>more detail about how data points have been generated. In the example below, 
</p>
<p>building type is used as a pivot variable as shown in Fig.&nbsp;7.34. A five level &ldquo;Design 
</p>
<p>of Experiments&rdquo; with lighting power density reduction percentage and window to 
</p>
<p>wall ratio variables complete the study space.
</p>
<p>Parallel coordinate plots are one of the useful visualization tools built into 
</p>
<p>OpenStudio Server (Fig.&nbsp;7.35). They provide an interactive means of exploring 
</p>
<p>large data sets and teasing out valuable insights. The plotting tool enables the user 
</p>
<p>to select inputs and outputs that have been pre-defined in PAT&rsquo;s Analysis and 
</p>
<p>Fig. 7.33 OpenStudio Cloud Management Console view of a project
</p>
<p>7.6  Working with&nbsp;OpenStudio Server</p>
<p/>
</div>
<div class="page"><p/>
<p>240
</p>
<p>Outputs Tabs. Checkboxes turn inputs on and off, and the individual plot axes can 
</p>
<p>be re-ordered via drag and drop. In this example, LHS is used to sample the 
</p>
<p>parameter space for lighting power density, window to wall ratio, and the facade 
</p>
<p>on which windows are placed. Energy Use Intensity (EUI) is selected as the out-
</p>
<p>put of interest.
</p>
<p>Each blue-segmented line in the parallel coordinate plot represents a single 
</p>
<p>data point. Segments connect key simulation inputs with the resulting outputs. In 
</p>
<p>the above example: lighting power density reduction, window to wall ratio, and 
</p>
<p>window cardinal direction inputs appear on the left side of the chart with EUI as 
</p>
<p>the output of interest on the far right. Figure&nbsp;7.36 is an annotated parallel coordi-
</p>
<p>nate plot highlighting a single data point in a net zero building study performed 
</p>
<p>with PAT.
</p>
<p>More than a static display, the user can filter the data points based on input or 
</p>
<p>output ranges to zero in on simulations with certain characteristics. For example, 
</p>
<p>Fig.&nbsp;7.37 shows how filtering is used in the net zero study to highlight those data 
</p>
<p>points that are net zero or net positive energy producers. We&rsquo;ll make use of this 
</p>
<p>capability in subsequent sections to gain insight into modeled performance.
</p>
<p>Fig. 7.34 OpenStudio Cloud Management Console project variable summary
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>241
</p>
<p>7.7  Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty 
</p>
<p>Analysis
</p>
<p>The next two checkpoint exercises assume you have created an AWS account to 
</p>
<p>use EC-2 resources, or that your organization has provisioned a dedicated 
</p>
<p>OpenStudio Server for you to use. The most intensive of these exercises can be 
</p>
<p>analyzed in 10&ndash;20&nbsp;min using 40 or more worker nodes. This first exercise focuses 
</p>
<p>on establishing the analysis setup that we will use in Checkpoint Eleven to solve a 
</p>
<p>problem that building scientists and practitioners are often faced with&nbsp;&ndash; Model 
</p>
<p>Fig. 7.35 OpenStudio Cloud Management Console parallel coordinate plot visualization
</p>
<p>7.7  Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>242
</p>
<p>Fig. 7.36 Net zero building study visualized as a parallel coordinate plot
</p>
<p>Fig. 7.37 Net zero building study with output filtering
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>243
</p>
<p>calibration. While we will focus on a narrow application of these algorithms, rest 
</p>
<p>assured they may be used to solve a wide range of design problems.
</p>
<p>We will continue to work with our Model from Chap. 4. Launch PAT and begin 
</p>
<p>by:
</p>
<p> 1. Creating a new project called &ldquo;MyPatSchoolCalibrationProject.&rdquo;
</p>
<p> 2. On the Analysis ( ) Tab, set the Analysis mode to Algorithmic.
</p>
<p> 3. Set the Algorithmic Method to &ldquo;Latin Hypercube Sampling (LHS).&rdquo;
</p>
<p> 4. Add MyPrimarySchoolHVAC.osm as your default SEED Model.
</p>
<p> 5. Add USA_CO_Golden-NREL_724666_TMY3.epw as your default weather file.
</p>
<p> 6. Under algorithm settings, set the number of Samples to 75.17
</p>
<p> 7. Add the OpenStudio and Reporting Measures shown in Fig.&nbsp;7.38.
</p>
<p> 8. Specify the Measure arguments as variables as shown in Table&nbsp;7.1.
</p>
<p> 9. Proceed to the Outputs ( ) Tab and add Outputs as shown in Fig.&nbsp;7.39.
</p>
<p> 10. Save your project before proceeding to the Run ( ) Tab.
</p>
<p>17 You may choose to use fewer samples for faster simulations or if you have fewer workers  
available. Our analysis will produce 6&nbsp;&times;&nbsp;75 or 450 data points.
</p>
<p>Fig. 7.38 Setting up an LHS sampling problem with our school model
</p>
<p>7.7  Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>244
</p>
<p>On the Run ( ) Tab select &ldquo;Run on Cloud&rdquo; and specify the Remote Server Type 
</p>
<p>you will be using. Most users will select Amazon Cloud and set up their AWS run 
</p>
<p>as discussed in Sect. 7.5.2. Configure your settings and connect to the server. Once 
</p>
<p>connected, press the  Button to start the LHS analysis. The screenshot in 
</p>
<p>Fig.&nbsp;7.40 shows an analysis in process on a dedicated remote server.
</p>
<p>Once the analysis is running, click the  Button to open the OpenStudio 
</p>
<p>Server console in a web browser. The server&rsquo;s web page should look like Fig.&nbsp;7.41 
</p>
<p>while the LHS analysis is in progress.
</p>
<p>Clicking the  Button opens this particular LHS analysis&rsquo; page shown in 
</p>
<p>Fig.&nbsp;7.42. This particular screenshot shows the page after all 450 data points have 
</p>
<p>Table 7.1 Variable assignments for LHS school model analysis
</p>
<p>Measure Argument Variable Distribution Default Mean Std dev Min Max
</p>
<p>Change exterior 
wall thermal 
properties
</p>
<p>r_value_
mult
</p>
<p>Continuous Normal 0.9 0.9 0.1 0.5 1.5
</p>
<p>Change roof 
thermal properties
</p>
<p>r_value_
mult
</p>
<p>Continuous Normal 0.9 0.9 0.05 0.5 1.5
</p>
<p>Adjust thermostat 
setpoints by 
degrees
</p>
<p>cooling_
adjustment
</p>
<p>Continuous Triangle 0 0 1 &minus;3 3
</p>
<p>heating_
adjustment
</p>
<p>Continuous Triangle 0 0 1 &minus;3 3
</p>
<p>Improve fan belt 
efficiency
</p>
<p>fan_eff Continuous Uniform 0 &ndash; 5 &minus;40 0
</p>
<p>Set gas burner 
efficiency
</p>
<p>eff Continuous Uniform 0.8 &ndash; 0.1 0.6 0.9
</p>
<p>Fig. 7.39 Setting up outputs for LHS sampling problem with our school model
</p>
<p>Tip: Before Running a large analysis, the authors always recommend testing 
</p>
<p>a small version of it. You can do this by running a small number of LHS 
</p>
<p>samples (1 or 2), or temporarily switching to the &ldquo;Pre Flight&rdquo; or &ldquo;Single Run&rdquo; 
</p>
<p>algorithms.
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>245
</p>
<p>been simulated, however interim results and plots may be available while the  
</p>
<p>analysis is in progress. One such result is the variable summary shown in Fig.&nbsp;7.43. 
</p>
<p>This page includes plots allowing us to verify the variable distributions we requested.
</p>
<p>Once the LHS analysis is complete, take some time to explore the visualizations 
</p>
<p>and data point information available via the links shown in Fig.&nbsp;7.42. In addition to 
</p>
<p>the individual data points, which include the Model files, EnergyPlus results, HTML 
</p>
<p>reports, and more; the CSV and R Data Frame Results are useful downloads from 
</p>
<p>the main analysis page that allow you to further explore the relationships between 
</p>
<p>these inputs and outputs.
</p>
<p>One particularly useful feature of OpenStudio Server is illustrated in Fig.&nbsp;7.44, 
</p>
<p>the parallel coordinate plot. As discussed in Sect. 7.6, this interactive tool allows the 
</p>
<p>user to apply filter ranges to both the inputs and outputs to quickly identify a  
</p>
<p>Fig. 7.40 LHS sampling analysis in progress for school model problem
</p>
<p>Fig. 7.41 OpenStudio Server reporting progress of LHS analysis for school model problem
</p>
<p>7.7  Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>246
</p>
<p>Fig. 7.42 LHS analysis report page for school model problem
</p>
<p>Fig. 7.43 Variable distributions for LHS sampling of school model problem
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>247
</p>
<p>particular data point out of the 450 we simulated that may be of interest. Without 
</p>
<p>tools like this, finding solutions of interest can be a bit like looking for a needle in a 
</p>
<p>haystack.
</p>
<p>The LHS analysis we just completed contained a number of Measures related 
</p>
<p>to the school&rsquo;s insulation, temperature setpoints, fan and gas burner efficiencies. 
</p>
<p>The variable ranges we selected reflect a range of uncertain values that affect the 
</p>
<p>energy performance of the building. For example, R value multipliers less than 
</p>
<p>one reduce the effectiveness of the school&rsquo;s insulation, driving up energy con-
</p>
<p>sumption. Lower fan and burner efficiencies also degrade the performance of the 
</p>
<p>building. The study produced a population of 450 schools reflecting variation in 
</p>
<p>six dimensions. Obviously, this can be extended to encompass more characteris-
</p>
<p>tics related to school construction, Space loads, occupancy schedules, and HVAC 
</p>
<p>systems. As more degrees of freedom (Measure variables) are added to such an 
</p>
<p>analysis, the variation in energy performance will continue to increase.
</p>
<p>Previous chapters have treated our primary school as a new building with 
</p>
<p>Measures used to model design features that improve performance. However, we 
</p>
<p>can also use Measures to approximate degraded performance due to host of cir-
</p>
<p>cumstances like aging, poor construction, commissioning, or operation. This 
</p>
<p>leads us to the next exercise where we will consider the hypothetical case that our 
</p>
<p>school is not a new building but intended to model an existing school. The funda-
</p>
<p>mental question we will attempt to answer: &ldquo;If our school is best described by one 
</p>
<p>of the 450 we simulated above, which one is it most likely to be?&rdquo;
</p>
<p>Fig. 7.44 Parallel coordinate plot for LHS sampling of school model problem
</p>
<p>7.7  Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>248
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis 
</p>
<p>and&nbsp;Optimization
</p>
<p>Modeling existing buildings presents different challenges than analyzing new 
</p>
<p>building designs. When modeling for new construction, the design team and ana-
</p>
<p>lyst may have significant leeway in changing the form, fabric, and sometimes even 
</p>
<p>the function of a building, its Spaces, and systems. Aside from general perfor-
</p>
<p>mance goals, there are likely few expectations for the exact energy performance of 
</p>
<p>a building, and comparative assessment of EE Measures is sufficient to drive design 
</p>
<p>decisions; not so with an existing building. When faced with a decision to install a 
</p>
<p>Measure, the owner of an existing building owner has existing utility bills as a 
</p>
<p>benchmark of performance, and a natural expectation that EE investment will 
</p>
<p>reduce those bills sufficiently to pay for themselves over some period of time. This 
</p>
<p>raises the bar for the accuracy of modeled predictions and brings us to the topic of 
</p>
<p>Model calibration.
</p>
<p>Model calibration is the process of adjusting a Model&rsquo;s inputs to align the out-
</p>
<p>puts with measured data. While we could consider measuring many aspects of 
</p>
<p>building performance and &ldquo;tuning&rdquo; a Model to best represent them, we are primarily 
</p>
<p>concerned with energy consumption. Energy consumption data may be provided in 
</p>
<p>the form of monthly utility billing data, interval data from so-called &ldquo;smart meters,&rdquo; 
</p>
<p>or even finely grained time-series information recorded via data logger. OpenStudio 
</p>
<p>has a means of adding interval consumption data to a Model for the purpose of 
</p>
<p>calibration.
</p>
<p>Pretend that our school was actually built in 1992&nbsp; in Golden, CO.&nbsp; We have 
</p>
<p>monthly electricity and gas consumption billing data from our local utility for the 
</p>
<p>year 2017. Further, we have an EPW that represents the Actual Meteorological Year 
</p>
<p>(AMY) weather for that year.18 Open your trusty MyPrimarySchoolHVAC Model in 
</p>
<p>the OpenStudio Application once more. On the Site ( ) Tab make sure you are using 
</p>
<p>the same weather file you used in the previous exercise. In the section labeled 
</p>
<p>&ldquo;Select Year by,&rdquo; check the Calendar Year box and set the year to 2017.
</p>
<p>Next click on the  Sub-Tab and use the  Button to add an Electric Utility 
</p>
<p>Bill to your Model. Name the Bill &ldquo;Electric,&rdquo; and add new billing periods as needed. 
</p>
<p>Enter the monthly consumption data as shown in Figs.&nbsp;7.45 and 7.46.
</p>
<p>Add a second bill named &ldquo;Gas&rdquo; with the monthly consumption data shown in 
</p>
<p>Fig.&nbsp;7.47. Take care to enter the gas consumption data using the correct units of 
</p>
<p>MBtu. Save your Model when you are finished and exit the OpenStudio Application.
</p>
<p>So now we&rsquo;ve added the &ldquo;measured&rdquo; data that we will judge how well calibrated 
</p>
<p>our Model is. The next question we must ask ourselves, what variables do we need 
</p>
<p>to modify to perform the calibration? As we have seen, a complete energy Model 
</p>
<p>contains many thousand input parameters. Where do we even start knowing which 
</p>
<p>ones to modify to align modeled and measured performance?
</p>
<p>18 It is important to note that model calibration should always be performed with AMY data cor-
responding to the period that the available calibration data was obtained. Using TMY data to cali-
brate a model is like mixing apples and avocados. That said, our &ldquo;utility billing data&rdquo; was generated 
from TMY weather conditions, so it is appropriate to use that weather file in this exercise.
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>249
</p>
<p>Fig. 7.45 Preparing to add electricity and gas consumption data to school model
</p>
<p>Fig. 7.46 Adding electricity consumption data to school model
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>250
</p>
<p>When modeling a real building, there are things that are easy to know. What are 
</p>
<p>the dimensions of the envelope and Spaces? What are the hours of operation? How 
</p>
<p>many computers are installed in classroom, and how much power do they consume? 
</p>
<p>What type of mechanical systems are installed for heating and cooling? Whenever 
</p>
<p>possible, the modeler should use known data to inform inputs. Calibration variables 
</p>
<p>are best suited to parameters the modeler is uncertain about. Equipment efficiencies, 
</p>
<p>effective R values, infiltration rates, etc. are rarely known quantities. Nevertheless, 
</p>
<p>one could claim that there are still hundreds of uncertain parameters in any given 
</p>
<p>building. The next algorithm we will examine, the Morris Method, is very helpful in 
</p>
<p>determining which variables most affect aspects of a building&rsquo;s performance. This 
</p>
<p>allows us to identify and remove those variables that have little impact, while retain-
</p>
<p>ing those that matter.
</p>
<p>In PAT, replace the old Seed Model with the one we just modified. You can manu-
</p>
<p>ally copy the OSM into your PAT project&rsquo;s seed sub-folder or you can use the file 
</p>
<p>menu in PAT to select the revised Model. On the Analysis ( ) Tab switch the 
</p>
<p>Algorithm from LHS to Morris Method and set the Algorithm Settings as shown in 
</p>
<p>Fig.&nbsp;7.48.
</p>
<p>Launch PAT and:
</p>
<p> 1. Load the &ldquo;MyPatSchoolCalibrationProject.&rdquo;
</p>
<p> 2. Set the Algorithmic Method to &ldquo;Morris Method.&rdquo;
</p>
<p>Fig. 7.47 Adding gas consumption data to school model
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>251
</p>
<p> 3. Add your newly modified MyPrimarySchoolHVAC.osm as your default SEED 
</p>
<p>Model.19
</p>
<p> 4. Under algorithm settings, set r to 10 and Levels to 30 as shown in Fig.&nbsp;7.48.
</p>
<p> 5. Add the &ldquo;Calibration Reports Enhanced&rdquo; Reporting Measures shown in Fig.&nbsp;7.48.
</p>
<p> 6. Proceed to the Outputs ( ) Tab and add Outputs as shown in Fig.&nbsp;7.49.20
</p>
<p> 7. Save your project before proceeding to the Run ( ) Tab.
</p>
<p>The most significant changes in the Project include the choice of algorithm and 
</p>
<p>the addition of &ldquo;performance objectives&rdquo; that are computed by the Calibration 
</p>
<p>Reports Measure using the consumption data we added to the Model. Among other 
</p>
<p>things, the Measure produces two primary quantities that are indicative of the 
</p>
<p>&ldquo;goodness of fit&rdquo; for a given simulation run. They are the net mean bias error 
</p>
<p>(NMBE) and coefficient of variation of the root mean squared error (CVRMSE). 
</p>
<p>These are defined according to:
</p>
<p> 
</p>
<p>NMBE
y
</p>
<p>y y
</p>
<p>n
CVRMSE
</p>
<p>y
</p>
<p>y y
</p>
<p>n
</p>
<p>i i i i
= &acute;
</p>
<p>-( )
= &acute;
</p>
<p>-( )100 100
2
</p>
<p>S S 
</p>
<p> 
</p>
<p>where:
</p>
<p>yi is the ith measured data point,
</p>
<p>y
i
 is the ith simulated data point,
</p>
<p>y is the mean of the measured data points, and
</p>
<p>n is the total number of data points.
</p>
<p>For our analysis, the Measure will produce NMBE and CVRMSE values based 
</p>
<p>on the errors in monthly electricity and gas consumption resulting in four different 
</p>
<p>performance objectives. Ideally, these will be zero for perfectly matched analytical 
</p>
<p>and empirical values. In practice, these values can be minimized, but will never 
</p>
<p>equal zero due to measurement and modeling errors. ASHRAE has published 
</p>
<p>Guideline 14, which prescribes tolerances for NMBE and CVRMSE for building 
</p>
<p>calibration.21 A &ldquo;good&rdquo; calibration will have a NMBE less than 10% and CVRMSE 
</p>
<p>less than 30%. The Calibration Reporting Measure also checks against these thresh-
</p>
<p>old values and reports pass/fail results. We will make use of these metrics for both 
</p>
<p>the Morris Method and subsequent optimization of variables that minimize them.
</p>
<p>Connect to the OpenStudio Server and run the Morris Method analysis. As before, 
</p>
<p>you can open the Server window in a web browser to monitor the process and inter-
</p>
<p>act with interim results. The completed analysis should look like Fig.&nbsp; 7.50. The 
</p>
<p>Morris Method is an algorithm that offers an additional download on the Project&rsquo;s 
</p>
<p>page called Algorithm Results.zip. Download this file and examine its contents.
</p>
<p>19 You can manually copy the OSM into your PAT project&rsquo;s seed sub-folder or you can use the file 
menu in PAT to select the revised model, but do not forget this step.
20 You may choose to leave the OpenStudio Results outputs in your project. We have removed them 
to minimize server reporting clutter.
21 ASHRAE Guideline 14&ndash;2014: Measurement of Energy, Demand and Water Savings, 
ASHRAE, 2014.
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>252
</p>
<p>Algorithm Results.zip contains a number of pre-generated plots based on your 
</p>
<p>choice of variables and the NMBE and CVRMSE objective functions. Figures&nbsp;7.51 
</p>
<p>and 7.52 contains two sets of four plots related to gas and electric NMBE and 
</p>
<p>CVRMSE.&nbsp;Figure&nbsp;7.51 shows the &ldquo;elementary effects&rdquo; of each input variable on the 
</p>
<p>output of interest. * shown in Fig.&nbsp;7.52 is the mean value of the absolute value of 
</p>
<p>the elementary effects and represents the relative sensitivity of an output of interest 
</p>
<p>to all input variables. Variables with comparatively large * values are very signifi-
</p>
<p>cant in shaping an output, whereas * equal to zero has no relationship.
</p>
<p>Fig. 7.48 Setting up a Morris Method problem with our school model
</p>
<p>Fig. 7.49 Setting up outputs for Morris Method problem with our school model
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>253
</p>
<p>A few observations for our school Model are apparent. First, the most significant 
</p>
<p>variables impacting gas consumption are not necessarily the same as those effecting 
</p>
<p>electricity use. For example, the cooling setpoint change was the biggest driver of 
</p>
<p>electricity consumption variability. For gas consumption, the heating setpoint was 
</p>
<p>the most significant variable. Does this make sense?
</p>
<p>Second, the burner efficiency has no impact on either gas or electricity perfor-
</p>
<p>mance metrics. This might seem surprising but open up the seed Model and exam-
</p>
<p>ine its HVAC system to see if this outcome is reasonable. Assuming you have 
</p>
<p>satisfied yourself that it has no impact, this variable (and Measure) may be removed 
</p>
<p>from our Project.
</p>
<p>What about the other variables? If we were only concerned about gas consump-
</p>
<p>tion, we might consider removing cooling setpoint as a source of uncertainty in our 
</p>
<p>calibration. However, this would have a serious impact on our ability to shape the 
</p>
<p>electricity consumption of our Model. The converse is true for the heating setpoint, 
</p>
<p>so we will leave both of these in our project. Again, looking at gas consumption, one 
</p>
<p>Fig. 7.50 Completed Morris Method analysis for school model problem
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>254
</p>
<p>might consider removing fan efficiency as a variable. Once again though, this would 
</p>
<p>have a detrimental effect on our ability to shape electric consumption, as it is the 
</p>
<p>second most significant elementary effect. Based on these considerations, we are 
</p>
<p>probably wise to only prune the burner efficiency Measure from our calibration.
</p>
<p>We are now going to shift from performing a sensitivity analysis of our four 
</p>
<p>performance metrics to allowing SPEA2 to utilize the remaining Five variables to 
</p>
<p>minimize NMBE and CVRMSE for gas and electricity consumption. Back in PAT:
</p>
<p> 1. Delete the burner efficiency Measure from the Project.
</p>
<p> 2. Set the Algorithmic Method to &ldquo;SPEA2.&rdquo;
</p>
<p> 3. Under algorithm settings, set Number of Samples to 4022 and Generations to 2 as 
</p>
<p>shown in Fig.&nbsp;7.53.
</p>
<p> 4. Save your project before proceeding to the Run ( ) Tab.
</p>
<p>22 Algorithms like SPEA2, PSO, Rgenoud, etc. will make the most cost-effective use of your server 
and workers by setting the number of samples to be equal to the number of worker nodes available. 
This minimizes the number of workers that sit idle between optimizer iterations.
</p>
<p>4
80
</p>
<p>60
</p>
<p>40
</p>
<p>50
</p>
<p>&minus;50
</p>
<p>0
</p>
<p>20
</p>
<p>&minus;20
</p>
<p>&minus;40
</p>
<p>&minus;60
</p>
<p>0
</p>
<p>2
</p>
<p>&minus;2
</p>
<p>&minus;4
</p>
<p>&minus;6
</p>
<p>&minus;8
</p>
<p>0
</p>
<p>Electricity Consumption
</p>
<p>N
M
</p>
<p>B
E
</p>
<p> E
le
</p>
<p>m
e
n
</p>
<p>ta
ry
</p>
<p> E
ff
</p>
<p>e
c
ts
</p>
<p>C
V
</p>
<p>R
M
</p>
<p>S
E
</p>
<p> E
le
</p>
<p>m
e
n
</p>
<p>ta
ry
</p>
<p> E
ff
</p>
<p>e
c
ts
</p>
<p>Gas Consumption
</p>
<p>2
</p>
<p>&minus;2
</p>
<p>&minus;4
</p>
<p>e
ff
</p>
<p>e
ff
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>fa
n
_
e
ff
</p>
<p>fa
n
_
e
ff
</p>
<p>h
e
a
ti
n
g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>h
e
a
ti
n
g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>c
o
o
lin
</p>
<p>g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>c
o
o
lin
</p>
<p>g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>&minus;6
</p>
<p>0
</p>
<p>Fig. 7.51 Morris Method elementary effects box plots for school model problem
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>255
</p>
<p>4
</p>
<p>5
</p>
<p>50
</p>
<p>40
</p>
<p>30
</p>
<p>20
</p>
<p>10
</p>
<p>0
</p>
<p>50
</p>
<p>40
</p>
<p>30
</p>
<p>20
</p>
<p>10
</p>
<p>0
</p>
<p>2
</p>
<p>3
</p>
<p>1
</p>
<p>0
</p>
<p>3.5
</p>
<p>3.0
</p>
<p>2.5
</p>
<p>2.0
</p>
<p>1.5
</p>
<p>1.0
</p>
<p>0.5
</p>
<p>0.0
</p>
<p>Electricity Consumption Gas Consumption
m
</p>
<p>*
 N
</p>
<p>M
B
</p>
<p>E
m
</p>
<p>*
 C
</p>
<p>V
R
</p>
<p>M
S
</p>
<p>E
</p>
<p>e
ff
</p>
<p>e
ff
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>r_
v
a
lu
</p>
<p>e
_
m
</p>
<p>u
lt
</p>
<p>fa
n
_
e
ff
</p>
<p>fa
n
_
e
ff
</p>
<p>h
e
a
ti
n
g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>h
e
a
ti
n
g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>c
o
o
lin
</p>
<p>g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>c
o
o
lin
</p>
<p>g
_
a
d
ju
</p>
<p>s
tm
</p>
<p>e
n
t
</p>
<p>Fig. 7.52 Morris Method * plots for school model problem
</p>
<p>Fig. 7.53 Setting up an SPEA2 optimization problem with our school model
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>256
</p>
<p>Run the analysis and jump over to the OpenStudio Server console in your 
</p>
<p>web browser (Fig.&nbsp;7.54). This project is smaller and faster than the previous 
</p>
<p>two by virtue of having removed a variable and the fact that the algorithm is 
</p>
<p>focused on achieving a specific objective rather than studying the school 
</p>
<p>Model&rsquo;s performance space more generally. Note in this screenshot we have 
</p>
<p>clicked on the  Button just above the data point list to display the four 
</p>
<p>objective functions. Scrolling through the points reveals a range of good (and 
</p>
<p>bad) solutions that the optimizer discovered on its way to the &ldquo;best&rdquo; combina-
</p>
<p>tion of input variables.
</p>
<p>Figure 7.55 uses the server&rsquo;s interactive XY plot feature to examine a trajectory 
</p>
<p>of solutions that SPEA2 explored on its way to finding minimal values of NMBE 
</p>
<p>and CVRMSE for gas and electricity.23 Out of curiosity, you might want to try some 
</p>
<p>of the other optimizers to see how they perform. Figure&nbsp;7.56 shows how PSO arrives 
</p>
<p>at a similar solution.
</p>
<p>We have annotated these plots with regions showing data points that satisfy 
</p>
<p>ASHRAE Guideline 14. This underscores two considerations. First, the solution 
</p>
<p>space that we pulled our &ldquo;real school&rdquo; from in Checkpoint Nine was actually fairly 
</p>
<p>small, and none of the variables we used to create this experiment were wildly 
</p>
<p>divergent. Therefore, it&rsquo;s not that hard to find an answer that satisfies Guideline 14 
</p>
<p>for this simple problem.
</p>
<p>More importantly though is the fact that a multiplicity of solutions exist that 
</p>
<p>satisfy the criteria. This is very typical of building Model calibration problems and 
</p>
<p>23 Because of the dimensionality of the space the optimizer is traversing, we can only visualize 
slices of the solution in plots like these.
</p>
<p>Fig. 7.54 School model calibration project with completed SPEA2 optimization
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>257
</p>
<p>becomes more pronounced when the number of uncertain variables increases while 
</p>
<p>the number of dependent outputs (NMBE and CVRMSE) remains very small. These 
</p>
<p>are known as mathematically underdetermined problems, and they result in multiple 
</p>
<p>possible solutions yielding similar outcomes. While an unimpeachable, mathemati-
</p>
<p>cal solution may elude us; we can bring some human expertise into play to narrow 
</p>
<p>the range of potential solutions.
</p>
<p>OpenStudio Server&rsquo;s interactive parallel coordinate plot can be helpful in explor-
</p>
<p>ing solution spaces and identifying data points of interest (Fig.&nbsp;7.57). You may have 
</p>
<p>guessed that the four &ldquo;within_limit&rdquo; outputs shown on the far right of this plot cor-
</p>
<p>respond to solutions that achieved ASHRAE Guideline 14 electricity or gas compli-
</p>
<p>ance for NMBE or CVRMSE. Use your mouse to filter where these outputs are 
</p>
<p>equal to one and the corresponding metric falls within tolerances (Fig.&nbsp;7.58). The 
</p>
<p>remaining blue &ldquo;threads&rdquo; represent simulation data points that fall within both green 
</p>
<p>boxes shown in Fig.&nbsp;7.55.
</p>
<p>65
</p>
<p>60
</p>
<p>50
</p>
<p>40
</p>
<p>30
</p>
<p>20
</p>
<p>55
</p>
<p>45
</p>
<p>35
</p>
<p>25
</p>
<p>15
</p>
<p>10
</p>
<p>5
</p>
<p>0
</p>
<p>16
</p>
<p>14
</p>
<p>12
</p>
<p>10
</p>
<p>8
</p>
<p>6
</p>
<p>4
</p>
<p>2
</p>
<p>&minus;16 &minus;60 &minus;50 &minus;40 &minus;30 &minus;20 &minus;10 0 10 20 30&minus;14 &minus;12 &minus;10 &minus;8 &minus;6 &minus;4 &minus;2 0
</p>
<p>NMBE NMBE
</p>
<p>2 4
</p>
<p>Electricity Consumption Gas Consumption
</p>
<p>ASHRAE
</p>
<p>Guideline 14
</p>
<p>C
V
</p>
<p>R
M
</p>
<p>S
E
</p>
<p>Fig. 7.55 SPEA2 optimizer results for school model calibration problem
</p>
<p>70
</p>
<p>60
</p>
<p>50
</p>
<p>40
</p>
<p>30
</p>
<p>20
</p>
<p>10
</p>
<p>0
</p>
<p>C
V
</p>
<p>R
M
</p>
<p>S
E
</p>
<p>12
</p>
<p>13
</p>
<p>11
</p>
<p>9
</p>
<p>10
</p>
<p>8
</p>
<p>7
</p>
<p>6
</p>
<p>5
</p>
<p>4
</p>
<p>3
</p>
<p>2
&minus;14 &minus;12 &minus;10 &minus;8 &minus;6 &minus;4 &minus;2 0
</p>
<p>NMBE NMBE
</p>
<p>2 &minus;70 &minus;10&minus;20&minus;30&minus;40&minus;50&minus;60 0 10 20 30
</p>
<p>Electricity Consumption Gas Consumption
</p>
<p>ASHRAE
</p>
<p>Guideline 14
</p>
<p>Fig. 7.56 PSO optimizer results for school model calibration problem
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>258
</p>
<p>Fig. 7.57 Parallel coordinate plot of all SPEA2 data points
</p>
<p>Fig. 7.58 Parallel coordinate plot of SPEA2 results filtered for ASHRAE Guideline 14
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>259
</p>
<p>That helped a bit, but there are still a large number of potential solutions.  
</p>
<p>To refine our search further, we need to make use of one seemingly insignificant 
</p>
<p>detail that you may have overlooked at the beginning of this exercise&nbsp;&ndash; the school 
</p>
<p>was built in 1992.
</p>
<p>How can the vintage of the building help us narrow our search? A seasoned 
</p>
<p>energy modeler would recall one of the very first assumptions that we made back in 
</p>
<p>Chap. 2 when we first built our school Model. In that exercise, we assigned a 
</p>
<p>Construction Set corresponding to ASHRAE 90.1-2010. This represents a more 
</p>
<p>stringent level of the energy code than when our hypothetical school was built 
</p>
<p>nearly two decades earlier. It&rsquo;s quite likely that our school has less insulation than 
</p>
<p>how we modeled it. In our study, that would correspond to data points with R value 
</p>
<p>multipliers less than one. Applying an appropriate filter to the wall and roof  
</p>
<p>&ldquo;r_value_mult&rdquo; variables produces Fig.&nbsp;7.59. Abracadabra!
</p>
<p>Below the parallel coordinate plot is a list of all data points that meet the filter 
</p>
<p>requirements. As we continue to filter results, the list has winnowed down to less 
</p>
<p>than a handful of points. In fact, these points are identical solutions that the opti-
</p>
<p>mizer arrived at from different directions. Selecting one of them allows us to see the 
</p>
<p>specific Measure variable values that define the data point. The data point page also 
</p>
<p>allows convenient download of the specific Model, simulation results, and associ-
</p>
<p>ated reports shown in Fig.&nbsp;7.60.
</p>
<p>Output from the Calibration Report for this data point is one of the available 
</p>
<p>report links and allows us to quickly visualize the performance of this particular 
</p>
<p>Model relative to our school&rsquo;s &ldquo;measured&rdquo; consumption data. Figure&nbsp;7.61 compares 
</p>
<p>one such report for a bad solution with the SPEA2 solution that met our criteria.
</p>
<p>Fig. 7.59 Additional filtering of SPEA2 results on parallel coordinate plot
</p>
<p>7.8  Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</p>
<p/>
</div>
<div class="page"><p/>
<p>260
</p>
<p>Fig. 7.60 An SPEA2 optimized solution for the school calibration problem
</p>
<p>Fig. 7.61 School model calibration reports pre and post SPEA2 optimization
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
</div>
<div class="page"><p/>
<p>261
</p>
<p>This exercise attempted to provide some experience and insight in using PAT and 
</p>
<p>OpenStudio Server to solve a common problem that faces building modelers focus-
</p>
<p>ing on retrofit of existing buildings. Given the huge number of uncertain variables 
</p>
<p>associated with any building, these are fundamentally difficult problems to solve.  
</p>
<p>It is important to approach the tools with realistic expectations, and to leverage 
</p>
<p>common sense, experience, and even intuition when trying to arrive at the &ldquo;best&rdquo; 
</p>
<p>Model for a particular building.
</p>
<p>7.9  Additional Exercises
</p>
<p>There are a number of potential exercises involving the Model you created for 
</p>
<p>&ldquo;Additional Exercises&rdquo; in Chap. 4. A few to consider include:
</p>
<p> 1) Learn more about uncertainty in predicted Model performance.
</p>
<p>&bull; Consider sources of uncertainty in your model and select Measures for the 
</p>
<p>BCL that allow you to modify related inputs: e.g. electric load power, infiltra-
</p>
<p>tion, HVAC system performance, etc.
</p>
<p>&bull; Create continuous or discrete variables for key parameters in these Measures 
</p>
<p>and use them in an LHS problem to see how variation impacts annual energy 
</p>
<p>use and peak power consumption.
</p>
<p>&bull; Download R or Excel data from OpenStudio Server to plot EUI distributions 
</p>
<p>for the Models in your sample population.
</p>
<p> 2) Identify some of the key parameters your Model is most sensitive to.
</p>
<p>&bull; Expand upon the previous analysis by using Morris, Sobol, or FAST99 to 
</p>
<p>identify parameters that significantly impact annual energy use, peak power 
</p>
<p>consumption, or other outputs of potential interest.
</p>
<p> 3) Calibrate your Model using available consumption data.
</p>
<p>&bull; Obtain electric or gas consumption data from the building owner or facility 
</p>
<p>manager.
</p>
<p>&bull; Obtain an AMY weather file for your region.
</p>
<p>&bull; Calibrate your Model using the process described in Checkpoint Eleven.
</p>
<p> 4) Optimize efficiency Measures for your calibrated Model.
</p>
<p>&bull; Set up an objective function24 to assess the relative goodness of a collection 
</p>
<p>of efficiency measures.
</p>
<p>&bull; Select Measures and input ranges for your optimization problem.
</p>
<p>&bull; Experiment with one or more optimization algorithms and compare the  
</p>
<p>solutions they produce.
</p>
<p>24 Give some thought to definition of an objective function. For example, optimizing on annual 
energy use alone will result in a building with no windows, maximum insulation, ultra-high  
efficiency HVAC systems, etc. Add additional objectives (e.g. cost, comfort, or competing factors 
like heating and cooling energy) to create more realistic optimization problems.
</p>
<p>7.9  Additional Exercises</p>
<p/>
</div>
<div class="page"><p/>
<p>262
</p>
<p>References
</p>
<p>Barricelli N (1957) Symbiogenetic evolution processes realized by artificial methods. Methodos 
9:143&ndash;182
</p>
<p>Belding T (1995) The distributed genetic algorithm revisited. In: Eshelman LJ (ed) Proceedings 
of the sixth international conference on genetic algorithms. Morgan Kaufmann, San Francisco, 
CA, pp&nbsp;114&ndash;121
</p>
<p>Deb K, Pratap A, Agarwal S (2002) A fast and elitist multi-objective genetic algorithm: 
NSGA-II.&nbsp;IEEE Trans Evol Comput 6:182&ndash;197
</p>
<p>Ephramac (2017) 2D-Partikelschwarm sucht globales Minimum, 12 Jan 2017. https://commons.
wikimedia.org/wiki/File:ParticleSwarmArrowsAnimation.gif
</p>
<p>Fraser A (1957) Simulation of genetic systems by automatic digital computers. Aust J&nbsp;Biol Sci 
10:484&ndash;491
</p>
<p>https://www.r-project.org/
Kennedy J, Eberhart R (1995) Particle swarm optimization. Proc IEEE Int Conf Neural Netw 
</p>
<p>IV:1942&ndash;1948
King R, Deb K, Rughooputh H (2010) Comparison of NSGA-II and SPEA2 on the multi-objective 
</p>
<p>environmental/economic dispatch problem. Univ Mauritius Res J&nbsp;16:485&ndash;511
McKay M, Beckman R, Conover W (1979) A comparison of three methods for selecting values 
</p>
<p>of input variables in the analysis of output from a computer code. Technometrics 21:239&ndash;245
Mebane W Jr, Sekhon J&nbsp;(2011) Genetic optimization using derivatives: the RGenOUD package for 
</p>
<p>R.&nbsp;J Stat Softw 42(11):1&ndash;26. https://www.jstatsoft.org/article/view/v042i11
Morris M (1991) Factorial sampling plans for preliminary computational experiments. 
</p>
<p>Technometrics 33:161&ndash;174
Nelder J, Mead R (1965) A simplex algorithm for function minimization. Comput J 7:308&ndash;313
Saltelli A, Tarantola S, Chan K (1999) A quantitative, model independent method for global  
</p>
<p>sensitivity analysis of model output. Technometrics 41:39&ndash;56
Sobol I (2001) Global sensitivity indices for nonlinear mathematical models and their Monte Carlo 
</p>
<p>estimates. Math Comput Simul 55:271&ndash;280
Zitzler E, Thiele L (1998) An evolutionary algorithm for multi-objective optimization: the strength 
</p>
<p>Pareto approach. Technical report 43, Computer Engineering and Networks Laboratory (TIK), 
Swiss Federal Institute of Technology (ETH) Zurich
</p>
<p>7 Parametric Analysis with&nbsp;OpenStudio</p>
<p/>
<div class="annotation"><a href="https://commons.wikimedia.org/wiki/File:ParticleSwarmArrowsAnimation.gif">https://commons.wikimedia.org/wiki/File:ParticleSwarmArrowsAnimation.gif</a></div>
<div class="annotation"><a href="https://commons.wikimedia.org/wiki/File:ParticleSwarmArrowsAnimation.gif">https://commons.wikimedia.org/wiki/File:ParticleSwarmArrowsAnimation.gif</a></div>
<div class="annotation"><a href="https://www.r-project.org/">https://www.r-project.org/</a></div>
<div class="annotation"><a href="https://www.jstatsoft.org/article/view/v042i11">https://www.jstatsoft.org/article/view/v042i11</a></div>
</div>
<div class="page"><p/>
<p>263&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_8
</p>
<p>Chapter 8
</p>
<p>Daylighting
</p>
<p>8.1  Introduction
</p>
<p>After mastering the basics of energy modeling with OpenStudio and EnergyPlus, 
</p>
<p>there are still many advanced modeling features left to explore. A few include:
</p>
<p>&bull; Radiant heating and cooling systems that can achieve deeper savings for some 
</p>
<p>climates and building types,
</p>
<p>&bull; Distributed energy resources and storage systems may be added to design net 
</p>
<p>zero or off grid buildings,1
</p>
<p>&bull; Large refrigeration for grocery store and warehouse models,
</p>
<p>&bull; Airflow network models may be added for improved infiltration and natural ven-
</p>
<p>tilation assessment, and
</p>
<p>&bull; EnergyPlus&rsquo; EMS scripting language which allows users to model custom build-
</p>
<p>ing controls and sequences of operation.
</p>
<p>These features and many more, integrated within EnergyPlus are beyond the 
</p>
<p>scope of this introductory text. However, the approaches we have discussed for 
</p>
<p>comparative analysis of building design features is equally applicable when consid-
</p>
<p>ering these advanced topics. The EnergyPlus Input Output Reference is the defini-
</p>
<p>tive reference for learning more about EnergyPlus&rsquo; full range of capabilities.
</p>
<p>In addition, OpenStudio can facilitate interoperability and co-simulation with other 
</p>
<p>engines and solvers that are designed to model specific building or grid-related phe-
</p>
<p>1 Distributed energy resources include solar hot water, photovoltaic, and wind turbine, and genera-
</p>
<p>tor systems. A few examples of thermal and electric storage include phase change construction 
</p>
<p>materials and mechanical systems or batteries.
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_8) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_8&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_8&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>264
</p>
<p>nomena in greater detail. One such program, and the subject of this Chapter, is 
</p>
<p>Radiance.2 While EnergyPlus can model daylighting and calculate associated energy 
</p>
<p>savings, that isn&rsquo;t its primary function and the algorithms it uses to do so are simplified. 
</p>
<p>Radiance has been purpose-built to model light propagation in buildings and is capable 
</p>
<p>of calculating lighting metrics with far greater accuracy. OpenStudio pairs EnergyPlus 
</p>
<p>with Radiance to deliver superior energy savings estimates for lighting-related ECMs.
</p>
<p>8.2  Daylighting
</p>
<p>Daylighting is a key design strategy used in low energy buildings, particularly 
</p>
<p>offices, which tend to have high lighting loads and daytime occupancy. By making 
</p>
<p>use of naturally available light entering the building through windows, skylights, 
</p>
<p>and other apertures; electric lights may be dimmed or turned off when they are not 
</p>
<p>needed. This strategy provides direct lighting energy savings. In addition, reducing 
</p>
<p>lighting heat rejection can lower cooling loads for further HVAC energy savings. 
</p>
<p>Beyond the energy benefits, many studies3,4 have found that daylit spaces are more 
</p>
<p>comfortable, pleasant, and healthy for occupants.
</p>
<p>Creating a well daylit space requires careful design, far beyond the energy per-
</p>
<p>formance tradeoff of adding fenestration to provide daylight access while poten-
</p>
<p>tially reducing the envelope&rsquo;s thermal performance. Ensuring that uniform 
</p>
<p>illumination is available for occupants throughout a space is a non-trivial exercise 
</p>
<p>for daylit spaces. External shading or daylight redirecting devices are often required 
</p>
<p>to prevent excessive glare that can distract or disturb occupants. Finally, the visual 
</p>
<p>characteristics of a space include a certain je ne sais quoi that cannot be fully cap-
</p>
<p>tured in the tabular output of an energy simulation.
</p>
<p>As noted in Chap. 3, EnergyPlus does not perform detailed electric lighting illu-
</p>
<p>minance calculations during simulations. Lighting loads and schedules are pre-
</p>
<p>scribed a priori, and the direct energy used by lighting is accounted for as well as the 
</p>
<p>additional heat generated by lighting equipment. For this reason, EnergyPlus is not 
</p>
<p>typically used to design and validate electric lighting layouts. However, EnergyPlus 
</p>
<p>does have the ability to model the impact of daylighting controls, which may dim or 
</p>
<p>turn off electric lights when sufficient natural light is available.
</p>
<p>EnergyPlus uses a split flux method to calculate available daylighting as a com-
</p>
<p>bination of direct, externally reflected, and internally reflected light.5 For points of 
</p>
<p>interest inside the building, these components are related to the exterior solar insola-
</p>
<p>tion through daylight factors. Daylight factors are calculated for a variety of sun 
</p>
<p>positions (e.g. once per month at each hour of the day) and then interpolated based 
</p>
<p>2 Ward and Shakespeare (1998).
3 https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_gov-
</p>
<p>ernment_report.pdf.
4 http://www.sciencedirect.com/science/article/pii/S0378778806000624.
5 http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calcula-
</p>
<p>tion.html.
</p>
<p>8 Daylighting</p>
<p/>
<div class="annotation"><a href="https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf">https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf</a></div>
<div class="annotation"><a href="https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf">https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf</a></div>
<div class="annotation"><a href="http://www.sciencedirect.com/science/article/pii/S0378778806000624">http://www.sciencedirect.com/science/article/pii/S0378778806000624</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html</a></div>
</div>
<div class="page"><p/>
<p>265
</p>
<p>on the actual sun position at any given simulation time step. This technique provides 
</p>
<p>a first order approximation of the available daylight illuminance inside the building 
</p>
<p>and is sufficient to estimate potential savings due to daylighting control strategies. 
</p>
<p>The split flux method does not consider all exterior and interior reflections. Further, 
</p>
<p>it cannot be used to provide detailed renderings of the scene. For these reasons, 
</p>
<p>EnergyPlus is not often used to aid in detailed daylighting design.
</p>
<p>A variety of other tools are available to assist in the design of electric and natural 
</p>
<p>lighting systems. One such tool is the open source Radiance software package, 
</p>
<p>which was developed with DOE support beginning in 1985. Radiance uses a detailed 
</p>
<p>backward ray-tracing method to compute interior illuminance, capturing all interior 
</p>
<p>and exterior reflections. This results in a more accurate simulation that may be used 
</p>
<p>to predict electric and natural lighting levels for design purposes. Additionally, 
</p>
<p>Radiance can be used to generate scene renderings useful in design. Like EnergyPlus, 
</p>
<p>the Radiance package consists of command line tools with complicated input for-
</p>
<p>mats which are difficult for beginners to master.
</p>
<p>The OpenStudio Object Model includes components necessary to perform day-
</p>
<p>lighting simulation using EnergyPlus. Additionally, the Radiance Daylighting 
</p>
<p>Measure has been developed to:
</p>
<p>&bull; Export an OpenStudio Model with daylighting elements for use by Radiance,
</p>
<p>&bull; Perform daylighting analysis using the Radiance engine,
</p>
<p>&bull; Post-process Radiance results to identify daylight availability within the Model, and
</p>
<p>&bull; Merge the availability data into the Model to inform EnergyPlus lighting 
</p>
<p>schedules.
</p>
<p>This gives a user the option to use either EnergyPlus or Radiance for daylighting 
</p>
<p>simulations depending on their needs. OpenStudio Luminaire Objects are not pres-
</p>
<p>ently exported to Radiance for electric lighting simulation, this is an anticipated 
</p>
<p>future extension to the Measure.
</p>
<p>8.2.1  Daylighting Controls
</p>
<p>A Daylighting Control Object is required to enable daylighting calculations in 
</p>
<p>OpenStudio. These Objects are placed in an OpenStudio Space. The specific location 
</p>
<p>of the Object within a Space defines the point at which illuminance is calculated for 
</p>
<p>the purpose of daylighting control. Daylighting Controls may be placed on a floor 
</p>
<p>plan using the floorplan editor or in a detailed 3D space using the OpenStudio 
</p>
<p>SketchUp Plug-in. Additionally, several OpenStudio Measures exist which automati-
</p>
<p>cally place Daylighting Control Objects in Spaces of interest.6 An OpenStudio Model 
</p>
<p>with Daylighting Control Objects may be simulated directly in EnergyPlus. These 
</p>
<p>same Objects and the Model&rsquo;s geometry are also used when the Radiance Measure is 
</p>
<p>included as part of a workflow, requiring no additional effort from the user.
</p>
<p>6 The AedgK12FenestrationAndDaylightingControls Measure (https://bcl.nrel.gov/node/39783) 
</p>
<p>we used in Checkpoint Eight is one example.
</p>
<p>8.2 Daylighting</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39783">https://bcl.nrel.gov/node/39783</a></div>
</div>
<div class="page"><p/>
<p>266
</p>
<p>While OpenStudio allows Daylighting Control Objects to point in arbitrary 
</p>
<p>directions but EnergyPlus currently only allows these sensors to point up. 
</p>
<p>Daylighting Control Objects do not currently support directionally sensitive 
</p>
<p>inputs. Illuminance from all directions in front of the sensor is weighted equally. 
</p>
<p>Given these limitations, current best practice is to place Daylighting Control 
</p>
<p>Objects on the work plane instead of their actual location within the space, which 
</p>
<p>is often on the ceiling. Used in this way, Daylighting Control Objects represent 
</p>
<p>ideal daylight sensors.
</p>
<p>In addition to position, Daylighting Control Object parameters describe the con-
</p>
<p>trol strategy which will be used to dim or turn off lights in response to available 
</p>
<p>daylight. As of OpenStudio 2.3.0, a given Daylighting Control Object cannot be 
</p>
<p>used to control a specific light or group of lights. Instead, the user specifies up to 
</p>
<p>two Daylighting Control Objects. Each Control Object controls a fraction of all 
</p>
<p>Light and Luminaire Objects within a Thermal Zone. This restriction was originally 
</p>
<p>put in place due to EnergyPlus limitations. Recently, EnergyPlus was upgraded to 
</p>
<p>support less restrictive daylighting configurations, and future versions of OpenStudio 
</p>
<p>may support these as well.
</p>
<p>When used with the Radiance Measure, Daylighting Control Objects define the 
</p>
<p>location at which ray tracing-based illuminance calculations will be performed. 
</p>
<p>Based on the control strategy, the Measure modifies fractional lighting Schedules 
</p>
<p>for Light and Luminaire Objects based on the daylight availability. Because these 
</p>
<p>modified schedules already reflect the intended daylighting control action, the 
</p>
<p>Measure then removes the Daylighting Control Objects prior to EnergyPlus simula-
</p>
<p>tion. This prevents EnergyPlus from taking additional action that would compro-
</p>
<p>mise the results of the Radiance analysis. Radiance time series analysis results are 
</p>
<p>written to an SQL file in the same format as EnergyPlus results, allowing easy 
</p>
<p>comparison of EnergyPlus and Radiance results with DView. Additional results 
</p>
<p>from the Radiance simulation are available in the Measure&rsquo;s run directory.
</p>
<p>8.2.2  Illuminance Maps
</p>
<p>Daylighting Control Objects are used to measure daylight illuminance at a given 
</p>
<p>point and to dim or turn off lights in response to available daylight. This is useful for 
</p>
<p>estimating energy savings potential. However, it does not give a full view of the 
</p>
<p>available daylight throughout the space. The Illuminance Map Object is useful for 
</p>
<p>this purpose. Illuminance Map Objects specify a rectangular grid of points for 
</p>
<p>which daylight illuminance is calculated at each time step using the same method as 
</p>
<p>for Daylighting Control Objects. Illuminance Map Objects cannot be used to con-
</p>
<p>trol Light and Luminaire Objects, the Illuminance Map is only used to provide 
</p>
<p>output for visual inspection. EnergyPlus writes Illuminance Map output to a human 
</p>
<p>readable CSV format. The deprecated OpenStudio ResultsViewer application 
</p>
<p>(available in OpenStudio 2.2.0 and previous releases) allows the user to visualize 
</p>
<p>Illuminance Map output in a graphical form. As of OpenStudio 2.3.0, the DView 
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>267
</p>
<p>application, which has replaced OpenStudio ResultsViewer for output visualization, 
</p>
<p>does not have the ability to visually display Illuminance Map output from 
</p>
<p>EnergyPlus.
</p>
<p>Similar to Daylighting Control Objects, the OpenStudio Radiance Measure oper-
</p>
<p>ates on the same Illuminance Map Object that is used for EnergyPlus results. The 
</p>
<p>OpenStudio Radiance Measure requests a daylight calculation for each point in the 
</p>
<p>Illuminance Map. It then writes these results to a SQLite file in the same format that 
</p>
<p>EnergyPlusdoes, allowing the user to visualize both results side by side using the 
</p>
<p>OpenStudio ResultsViewer program. In addition to Illuminance Maps, the Radiance 
</p>
<p>Measure can also be used to generate photo-realistic renderings of the entire scene.
</p>
<p>8.2.3  Advanced Daylighting Objects
</p>
<p>After mastering the Daylighting Control and Illuminance Map Objects, there are 
</p>
<p>many other even more advanced Objects for daylight simulation. The Glare Control 
</p>
<p>Object can be used to calculate glare at a specific location. This is useful to ensure 
</p>
<p>that daylighting designs which provide sufficient daylight illuminance for tasks do 
</p>
<p>not bring in too much daylight which causes distracting glare. The Shading Control 
</p>
<p>Object is used to operate shading devices such as blinds, shades, or screens in 
</p>
<p>response to daylight illuminance or glare. There are very detailed inputs for this 
</p>
<p>Object (e.g. controlling the slat angle of blinds), the user is directed to the EnergyPlus 
</p>
<p>Input Output Reference for details. Unlike Daylighting Control and Illuminance 
</p>
<p>Map Objects, the OpenStudio Radiance Measure does not fully incorporate all of 
</p>
<p>these advanced daylighting Objects. Users should take caution when using these 
</p>
<p>Objects with the OpenStudio Radiance Measure.
</p>
<p>8.3  Checkpoint Twelve: Daylighting Analysis
</p>
<p>In this example, we will be performing a daylighting analysis on a portion of a 
</p>
<p>Model imported from gbXML, an industry-supported schema for sharing building 
</p>
<p>information between building energy design software tools.7 Many software tools 
</p>
<p>are capable of reading or writing gbXML files. OpenStudio is able to both read and 
</p>
<p>write gbXML.&nbsp;The OpenStudio Application imports gbMXL files through the &ldquo;File/
</p>
<p>Import/gbXML&rdquo; menu as shown in Fig.&nbsp;8.1.
</p>
<p>For this exercise, we will use a sample gbXML file available online. Open a web 
</p>
<p>browser and navigate to https://github.com/GreenBuildingXML/Sample-gbXML-
</p>
<p>Files. Download the gbXML_TRK.xml example file by pressing &ldquo;Clone or 
</p>
<p>Download&rdquo; and then select &ldquo;Download ZIP.&rdquo; This gbXML file was exported from 
</p>
<p>an Autodesk Revit MEP 2014 model and represents a mixed-use building with retail 
</p>
<p>7 https://gbxml.org.
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
<div class="annotation"><a href="https://github.com/GreenBuildingXML/Sample-gbXML-Files">https://github.com/GreenBuildingXML/Sample-gbXML-Files</a></div>
<div class="annotation"><a href="https://github.com/GreenBuildingXML/Sample-gbXML-Files">https://github.com/GreenBuildingXML/Sample-gbXML-Files</a></div>
<div class="annotation"><a href="https://gbxml.org">https://gbxml.org</a></div>
</div>
<div class="page"><p/>
<p>268
</p>
<p>on the first floor and a mix of office and gymnasium spaces on the second floor. A 
</p>
<p>large two-story atrium serves as the main entrance and lobby. Once imported into 
</p>
<p>the OpenStudio Application, the geometry can be viewed using the Geometry ( ) 
</p>
<p>Tab as shown in Fig.&nbsp;8.2.
</p>
<p>After importing a gbXML file, non-geometric portions of the model such as 
</p>
<p>space types, thermal zones, and HVAC may all be specified in the OpenStudio 
</p>
<p>Application. However, the Application&rsquo;s floorplan editor cannot be used to edit 
</p>
<p>potentially complex Models that have been imported from gbXML. For this reason, 
</p>
<p>we introduce the OpenStudio SketchUp Plug-In for this exercise. Use of the 
</p>
<p>SketchUp Plug-in requires that the user download and install SketchUp from https://
</p>
<p>sketchup.com. SketchUp should be installed before installing OpenStudio, however 
</p>
<p>Fig. 8.1 gbXML import within the OpenStudio Application
</p>
<p>Fig. 8.2 gbXML Model import previewed in the geometry Tab
</p>
<p>8 Daylighting</p>
<p/>
<div class="annotation"><a href="https://sketchup.com">https://sketchup.com</a></div>
<div class="annotation"><a href="https://sketchup.com">https://sketchup.com</a></div>
</div>
<div class="page"><p/>
<p>269
</p>
<p>the OpenStudio installer can simply be run a second time if you did not previously 
</p>
<p>install SketchUp. As of OpenStudio 2.3.0, SketchUp Make 2017 and SketchUp 
</p>
<p>Professional 2017 are supported.
</p>
<p>Once installed, the OpenStudio SketchUp Plug-in will automatically start when 
</p>
<p>you launch SketchUp. The OpenStudio SketchUp Plug-in installs a variety of 
</p>
<p>OpenStudio specific tools on the SketchUp toolbar. It will also create &ldquo;Extensions/
</p>
<p>OpenStudio&rdquo; and &ldquo;Extensions/OpenStudio User Scripts&rdquo; menu items. We will only 
</p>
<p>be using a small subset of the OpenStudio SketchUp Plug-in for this exercise. A 
</p>
<p>more extensive reference guide to the Plug-In is available online.8
</p>
<p>Start SketchUp and verify that the OpenStudio SketchUp Plug-in is loaded by 
</p>
<p>checking for the &ldquo;Extensions/OpenStudio&rdquo; menu (Fig.&nbsp;8.3). Navigate to &ldquo;Extensions/
</p>
<p>OpenStudio/Import/Import gbXML Model,&rdquo; select the gbXML_TRK.xml you down-
</p>
<p>loaded in the file selection dialog.
</p>
<p>After the gbXML file is loaded, you should see the Model shown in Fig.&nbsp;8.4. 
</p>
<p>Note that SketchUp&rsquo;s solid green axis shown in Fig.&nbsp;8.4 is North and the solid red 
</p>
<p>axis is East. Rotate around the Model to view all of the Spaces as shown in Fig.&nbsp;8.5.
</p>
<p>For this example, we are going to examine the daylighting in one Space only, the 
</p>
<p>Space named &ldquo;1 Atrium&rdquo; which is associated with the Thermal Zone &ldquo;Atrium&rdquo;. 
</p>
<p>Press the  Button, which renders the Model according to Thermal Zone as shown 
</p>
<p>8 https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface.
</p>
<p>Fig. 8.3 OpenStudio SketchUp Plug-in gbXML Import Menu
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface">https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface</a></div>
</div>
<div class="page"><p/>
<p>270
</p>
<p>Fig.&nbsp;8.6. Use the Info Tool, selected using the  Button, to mouse over each Thermal 
</p>
<p>Zone to find the &ldquo;Atrium&rdquo; Zone. Click on each Space that is not part of the &ldquo;Atrium&rdquo; 
</p>
<p>Thermal Zone and delete it with the Delete Key.
</p>
<p>Tip: The OpenStudio SketchUp Plug-in does not support SketchUp&rsquo;s undo 
</p>
<p>(Ctrl-Z) feature. If you make a mistake while modifying your model, it is best 
</p>
<p>to close SketchUp and start over. For this reason, &ldquo;Save Early and Save Often&rdquo; 
</p>
<p>is a useful mantra when working with the SketchUp Plug-in.
</p>
<p>Fig. 8.4 Initial Model import screen in SketchUp
</p>
<p>Fig. 8.5 Rotated view of Model in SketchUp
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>271
</p>
<p>After successfully deleting all the other spaces in your Model, you will be left 
</p>
<p>with the two story atrium as shown in Fig.&nbsp; 8.7. Heading our mantra, save the 
</p>
<p>OpenStudio Model at this point.
</p>
<p>Tip: The OpenStudio SketchUp Plug-in&rsquo;s Save tool is separate from the 
</p>
<p>native SketchUp Save command you access from the File menu or 
</p>
<p>Ctrl-S.&nbsp; When working in the OpenStudio SketchUp Plug-in, use the 
</p>
<p>OpenStudio  and  Buttons to save and load your Model. SketchUp&rsquo;s native 
</p>
<p>SKP file format is not used by OpenStudio and can be ignored.
</p>
<p>Fig. 8.6 Rendering in SketchUp by Thermal Zone
</p>
<p>Fig. 8.7 Isolated Atrium 
</p>
<p>Space from Original Model
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>272
</p>
<p>Once you have isolated the atrium Space and saved your OpenStudio Model, we 
</p>
<p>will add a section cut to help us see &ldquo;inside&rdquo; the Space. The Section Cut Tool is part 
</p>
<p>of the SketchUp Large Tool Set and is selected with the  Button. If you do not see 
</p>
<p>it, select &ldquo;View/Toolbars&rdquo; and select &ldquo;Large Tool Set&rdquo;. After clicking the  Button, 
</p>
<p>click on the Space&rsquo;s roof to place the section cut. Use the Move tool selected with 
</p>
<p>the  Button to move the section cut up and down to see inside the space as shown 
</p>
<p>in Fig.&nbsp;8.8.
</p>
<p>Once you have placed your section cut, switch back to the  Tool and double- 
</p>
<p>click on the atrium Space to open the related SketchUp Group for editing. All 
</p>
<p>OpenStudio geometry for a given Space is created in a related SketchUp group, and 
</p>
<p>geometry can only be modified when the SketchUp group is selected. Once the 
</p>
<p>Space has been selected, click the  Button to add a new Daylighting Control 
</p>
<p>Object. Click on the floor in the middle of the space under the window to place the 
</p>
<p>Daylighting Control as shown in Fig.&nbsp;8.9.
</p>
<p>Fig. 8.8 Section Cut of the Atrium Space
</p>
<p>Fig. 8.9 Placing a Daylighting Control in a Model
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>273
</p>
<p>Once the Daylighting Control has been placed inside the Space, it can be moved 
</p>
<p>with the  Tool. The  Tool is very useful in that it allows you to lock on a particular 
</p>
<p>direction using the Shift Key. You can specify the distance to move the selected 
</p>
<p>Object by entering a distance with units into the text box at the lower right-hand 
</p>
<p>corner then pressing Enter. Move the Daylighting Control along the negative red 
</p>
<p>axis (South) twelve feet as shown in Fig.&nbsp;8.10.
</p>
<p>Properties of the Daylighting Control Object may be inspected and edited using 
</p>
<p>the  Button as shown in Fig.&nbsp;8.11. In addition to the position of the control sensor, 
</p>
<p>the Illuminance Setpoint is another key parameter of the Daylighting Control Object. 
</p>
<p>This is the illuminance level at which daylight illuminance is deemed sufficient to 
</p>
<p>Fig. 8.10 Moving a Daylighting Control Within a Model
</p>
<p>Fig. 8.11 Inspecting Daylighting Controls
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>274
</p>
<p>turn off electric lights. Because EnergyPlus is only concerned with the power and 
</p>
<p>thermal characteristics of lighting, it is assumed that the lighting design is sufficient 
</p>
<p>to provide this level of illumination without any available daylight.
</p>
<p>After positioning our Daylighting Control Object, we also want to add an 
</p>
<p>Illuminance Map to our Model using the  Button. Illuminance Map Objects are 
</p>
<p>placed in a similar way to Daylighting Control Objects. Once the Illuminance Map 
</p>
<p>is placed it can be moved just like the Daylighting Control Object. The Illuminance 
</p>
<p>Map Object is unique as the only OpenStudio Model Object that may be modified 
</p>
<p>with the SketchUp Scale Tool. Select the Scale Tool with the  Button and modify 
</p>
<p>the Illuminance Map to cover the entire atrium as shown in Figs.&nbsp;8.12 and 8.13.
</p>
<p>Similar to the Daylighting Control Object, you can use the  Button to modify 
</p>
<p>properties of the Illuminance Map Object as shown in Fig.&nbsp;8.14.
</p>
<p>Fig. 8.12 Placing an Illuminance Map in a Model
</p>
<p>Fig. 8.13 Resizing an Illuminance Map within a Model
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>275
</p>
<p>While the OpenStudio Inspector window is open, navigate to the Thermal Zone 
</p>
<p>Object and select the atrium Thermal Zone. Check that the Daylighting Control and 
</p>
<p>Illuminance Map we just placed are selected as the primary Daylighting Control 
</p>
<p>and Illuminance Map for the atrium Thermal Zone (Fig.&nbsp;8.15).
</p>
<p>At this point, we have reduced our Model to only include the atrium Space and 
</p>
<p>placed our Daylighting Control and Illuminance Map Objects. This is as far as we 
</p>
<p>need to go in the OpenStudio SketchUp Plug-in. Save your OpenStudio Model 
</p>
<p>Fig. 8.14 Inspecting the Illuminance Map
</p>
<p>Fig. 8.15 Inspecting the Atrium Thermal Zone
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>276
</p>
<p>using the  Button. Do not use SketchUp&rsquo;s Save. Switch to the OpenStudio 
</p>
<p>Application and open the Model. The  Button in the Plug-In allows you to do this 
</p>
<p>with a single mouse click.
</p>
<p>After opening your Model in the OpenStudio Application, set a weather file and 
</p>
<p>import design days on the Site ( ) Tab. Then, navigate to the Thermal Zones ( ) Tab. 
</p>
<p>Notice that deleting the non-atrium space geometry in the SketchUp Plug-in did not 
</p>
<p>delete the associated Thermal Zones, which were imported from the original gbXML. 
</p>
<p>Select all the Thermal Zones besides the atrium and delete them as shown in Fig.&nbsp;8.16.
</p>
<p>Fig. 8.16 Deleting Thermal Zones from the Imported Model
</p>
<p>Fig. 8.17 Deleting Space Types from the Imported Model
</p>
<p>Fig. 8.18 Applying a New Schedule Set to the Imported Model
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>277
</p>
<p>Next, navigate to the Space Types ( ) Tab. Notice that the other imported Space 
</p>
<p>Types were not deleted either. Select and delete them as shown in Fig.&nbsp;8.17.
</p>
<p>The Space Types imported from this gbXML file did not include lighting loads 
</p>
<p>or lighting schedules. Drag in the &ldquo;189.1-2009&nbsp;&ndash; Office&nbsp;&ndash; Lobby&rdquo; Schedule Set and 
</p>
<p>lights definition Objects and apply them to the AtriumFirstThreeFloors Space Type 
</p>
<p>as shown in Figs.&nbsp;8.18 and 8.19. This will apply a high efficiency lighting level to 
</p>
<p>the atrium along with a typical operation schedule.
</p>
<p>Navigate to the Schedules ( ) Tab to examine the lighting Schedules we just 
</p>
<p>applied (Fig.&nbsp;8.20).
</p>
<p>Before running the simulation, navigate to the Variables ( ) Tab and turn on out-
</p>
<p>put variable requests for &ldquo;Zone Lights Electric Energy&rdquo; and &ldquo;Daylighting Reference 
</p>
<p>Point 1 Illuminance&rdquo; as shown in Fig.&nbsp;8.21. This will allow us to see the electric 
</p>
<p>energy used for lighting in each Thermal Zone to verify that the Daylighting Controls 
</p>
<p>Object is indeed reducing lighting energy in response to available daylight.
</p>
<p>Now we are ready to run our first daylighting simulation using EnergyPlus as 
</p>
<p>the daylight calculation engine. Navigate to the Run Simulations ( ) Tab and run 
</p>
<p>the simulation as shown in Fig.&nbsp;8.22. Note the additional messages in the run log 
</p>
<p>related to daylighting.
</p>
<p>Fig. 8.19 Applying a Lighting Definition
</p>
<p>Fig. 8.20 Reviewing the Lighting Schedules
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>278
</p>
<p>The eplusout.sql file generated by the EnergyPlus simulation also includes 
</p>
<p>Illuminance Map output. Illuminance Map vary throughout the day and through-
</p>
<p>out the year, so it&rsquo;s important to take that into consideration when reviewing 
</p>
<p>Illuminance Map data. Figures&nbsp;8.23 and 8.24 show two Illuminance Map plots 
</p>
<p>for the atrium. Recall that the windows in the atrium face East. Notice how the 
</p>
<p>illuminance levels in Fig.&nbsp; 8.23 are much higher in the in the morning due to 
</p>
<p>direct sun exposure than they are later in the day in Fig.&nbsp;8.24.9 For reference, 
</p>
<p>9 Note that EnergyPlus reports time as &ldquo;standard&rdquo; time. If daylight savings is in effect, then local 
</p>
<p>time will be 1&nbsp;h ahead of standard time.
</p>
<p>Fig. 8.21 Adding an output Variable to the Model
</p>
<p>Fig. 8.22 Running a simulation using EnergyPlus for Daylighting calculations
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>279
</p>
<p>illuminance levels of 50,000 lux are much higher than needed for task lighting 
</p>
<p>and will likely result in occupant discomfort.
</p>
<p>We can examine the impact of daylighting controls on electric lighting by plot-
</p>
<p>ting the daylight illuminance calculated at the control point alongside the electric 
</p>
<p>lighting energy in Fig.&nbsp;8.25. Compare the lighting energy use profile to the lighting 
</p>
<p>schedule in Fig.&nbsp;8.20. Notice that during the morning when there is excessive day-
</p>
<p>light illumination the electric lights do not consume energy. Later in the day, as the 
</p>
<p>sun moves to the other side of the building, daylight illumination levels drop, and 
</p>
<p>the electric lights are turned back on to provide sufficient illumination for the 
</p>
<p>remainder of the work day.
</p>
<p>Fig. 8.23 EnergyPlus Illuminance Map on 6/21 at 8:00&nbsp;AM DST
</p>
<p>Fig. 8.24 EnergyPlus Illuminance Map on 6/21 at 1:00&nbsp;PM DST
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>280
</p>
<p>At this point, we have successfully run a daylighting simulation using the 
</p>
<p>split- flux calculation method available in EnergyPlus. EnergyPlus can provide a 
</p>
<p>rough estimate of the energy savings potential for daylighting controls as well as 
</p>
<p>alert us to potential glare issues with the large East facing windows. Depending 
</p>
<p>on our needs, this may be sufficient. However, we may need to perform more 
</p>
<p>accurate daylighting simulation to increase confidence in savings estimates, or to 
</p>
<p>persuade an architect that a glare control feature is required in a design.
</p>
<p>The only change necessary in our OpenStudio Model is the addition of the 
</p>
<p>OpenStudio Radiance Measure. This measure can be found on the BCL under the 
</p>
<p>&ldquo;Electric Lighting Controls&rdquo; category. Simply download this measure and drag it 
</p>
<p>into your workflow on the Measures ( ) Tab as shown in Fig.&nbsp;8.26.
</p>
<p>The Radiance Measure has several parameters that control its operation as 
</p>
<p>shown in Fig.&nbsp;8.27. If checked, the Apply Schedules option applies lighting sched-
</p>
<p>ule reductions based on calculation of available daylight illuminance and removes 
</p>
<p>Fig. 8.25 EnergyPlus Daylighting Illuminance and Electric Lighting Energy
</p>
<p>Fig. 8.26 OpenStudio Radiance Measure added to workflow
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>281
</p>
<p>Daylighting Control Objects in the Model prior to EnergyPlus simulation. The 
</p>
<p>Cores input allows you to determine how many Radiance simulation processes 
</p>
<p>may run in parallel during the Measure application. The Radiance Settings param-
</p>
<p>eter allows the user to select between fast simulation settings for initial testing and 
</p>
<p>debugging or higher quality settings for final calculations. The Debug and Cleanup 
</p>
<p>Data settings control which intermediate Radiance files are retained after the 
</p>
<p>Measure runs.
</p>
<p>Once the Measure has been added and configured, simply return to the Run 
</p>
<p>Simulations ( ) Tab and re-run your simulation as shown in Fig.&nbsp; 8.28. Note 
</p>
<p>that the actual Radiance simulation occurs during processing of the OpenStudio 
</p>
<p>Radiance Measure, so this measure will take more time to apply than most 
</p>
<p>other measures.
</p>
<p>After re-running the simulation, you can use ResultsViewer or DView to open 
</p>
<p>eplusout.sql results from EnergyPlus as well as the radout.sql file generated by the 
</p>
<p>Radiance Measure (this file is located in the \run\000_RadianceMeasure\
</p>
<p>radiance\output directory). Open the radout.sql file to see Illuminance Map data 
</p>
<p>generated by the OpenStudio Radiance Measure. Compare the results calculated 
</p>
<p>with Radiance in Figs.&nbsp;8.29, 8.30, and 8.31 with those calculated by EnergyPlus in 
</p>
<p>Figs.&nbsp;8.23, 8.24, and 8.25. What differences do you see?
</p>
<p>Fig. 8.27 OpenStudio Radiance measure parameters
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>282
</p>
<p>Fig. 8.29 Radiance Illuminance Map on 6/21 at 8:00&nbsp;AM DST
</p>
<p>Fig. 8.28 Re-running simulation with the OpenStudio Radiance measure
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>283
</p>
<p>Fig. 8.30 Radiance Illuminance Map on 6/21 at 1:00&nbsp;PM DST
</p>
<p>Fig. 8.31 Radiance Daylighting Illuminance and Electric Lighting Energy
</p>
<p>8.3 Checkpoint Twelve: Daylighting Analysis</p>
<p/>
</div>
<div class="page"><p/>
<p>284
</p>
<p>DView can also be used to directly compare the daylight illuminance calculated 
</p>
<p>at the Daylighting Control Object by EnergyPlus to that calculated by Radiance as 
</p>
<p>shown in Fig.&nbsp;8.32.
</p>
<p>If you configured the Radiance Measure as shown in Fig.&nbsp;8.27, several useful 
</p>
<p>intermediate files generated by the Measure will have been preserved in the 
</p>
<p>Measure&rsquo;s run directory shown in Fig.&nbsp;8.33.
</p>
<p>One such file is a scene rendering, which is generated at each Daylighting Control 
</p>
<p>point as shown in Fig.&nbsp;8.34. Scene renderings are produced at the position of the 
</p>
<p>Daylighting Control looking upwards. They allow you to visualize what the 
</p>
<p>Daylighting Control effectively observes at various times in the simulation.
</p>
<p>Fig. 8.33 OpenStudio Radiance Measure run directory
</p>
<p>Fig. 8.32 Comparison of EnergyPlus and Radiance Illuminance Calculations
</p>
<p>8 Daylighting</p>
<p/>
</div>
<div class="page"><p/>
<p>285
</p>
<p>Finally, the OpenStudio Radiance Measure calculates additional daylighting 
</p>
<p>metrics as shown in Fig.&nbsp;8.35.
</p>
<p>This is but one advanced application of OpenStudio that makes use of a separate 
</p>
<p>engine. In the next Chapter, we will delve more deeply into OpenStudio Measures, 
</p>
<p>the fundamental OpenStudio building block that enables such applications to be 
</p>
<p>built and integrated into sophisticated analysis workflows.
</p>
<p>8.4  Additional Exercises
</p>
<p>The IESNA Lighting Handbook provides recommended illuminance levels for a 
</p>
<p>variety of space types. The recommended illuminance level for a &ldquo;Lobby&nbsp;&ndash; Office/
</p>
<p>General&rdquo; space type is 200&ndash;300 lux. Results in this exercise show that direct 
</p>
<p>Fig. 8.34 Radiance scene 
</p>
<p>rendering
</p>
<p>Fig. 8.35 Additional Daylighting Metrics
</p>
<p>8.4 Additional Exercises</p>
<p/>
</div>
<div class="page"><p/>
<p>286
</p>
<p>illuminance levels in the atrium space can reach up to 50,000 lux at the sensor 
</p>
<p>location. Check other points in the space to see what illuminance levels are right 
</p>
<p>by the window, in the far corner, or in the middle of the room. What happens if the 
</p>
<p>building is rotated so the atrium windows face North, South, or West? Try chang-
</p>
<p>ing the &ldquo;Visible Transmittance&rdquo; of the &ldquo;Simple Glazing System Window Materials&rdquo; 
</p>
<p>on the Materials Sub-Tab, what impact does that have?
</p>
<p>References
</p>
<p>Ward G, Shakespeare R (1998) Rendering with radiance. Morgan Kaufmann, Waltham
</p>
<p>https://bcl.nrel.gov/node/39783
</p>
<p>http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calcula-
</p>
<p>tion.html
</p>
<p>https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_govern-
</p>
<p>ment_report.pdf
</p>
<p>https://gbxml.org
</p>
<p>https://github.com/GreenBuildingXML/Sample-gbXML-Files
</p>
<p>https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface
</p>
<p>http://www.sciencedirect.com/science/article/pii/S0378778806000624
</p>
<p>https://sketchup.com.
</p>
<p>8 Daylighting</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/node/39783">https://bcl.nrel.gov/node/39783</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html</a></div>
<div class="annotation"><a href="http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html">http://bigladdersoftware.com/epx/docs/8-7/engineering-reference/time-step-daylighting-calculation.html</a></div>
<div class="annotation"><a href="https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf">https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf</a></div>
<div class="annotation"><a href="https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf">https://cdn2.hubspot.net/hub/155785/file-18058478-pdf/docs/daylighting_research_-_us_government_report.pdf</a></div>
<div class="annotation"><a href="https://gbxml.org">https://gbxml.org</a></div>
<div class="annotation"><a href="https://github.com/GreenBuildingXML/Sample-gbXML-Files">https://github.com/GreenBuildingXML/Sample-gbXML-Files</a></div>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface">https://nrel.github.io/OpenStudio-user-documentation/reference/sketchup_plugin_interface</a></div>
<div class="annotation"><a href="http://www.sciencedirect.com/science/article/pii/S0378778806000624">http://www.sciencedirect.com/science/article/pii/S0378778806000624</a></div>
<div class="annotation"><a href="https://sketchup.com">https://sketchup.com</a></div>
</div>
<div class="page"><p/>
<p>287&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_9
</p>
<p>Chapter 9
</p>
<p>The OpenStudio Software  
Development Kit
</p>
<p>9.1  Introduction
</p>
<p>As discussed in Chap. 1, OpenStudio is not a single energy modeling tool. Rather, 
</p>
<p>it is an SDK or platform, designed to reduce the cost and time to create a variety of 
</p>
<p>energy efficiency assessment applications. The OpenStudio Application and PAT, 
</p>
<p>presented in previous chapters, are intended as examples of using the SDK to create 
</p>
<p>software in C++ and Electron/Angular respectively. A third example of creating 
</p>
<p>new functionality with the SDK is the OpenStudio Measure introduced in Chap. 6. 
</p>
<p>OpenStudio Measures are the most accessible means of creating new capability 
</p>
<p>with OpenStudio and represent the &ldquo;gateway&rdquo; to more advanced application devel-
</p>
<p>opment. For this reason, the bulk of Chap. 9 is devoted to adapting existing Measures 
</p>
<p>or creating new ones to add functionality to the OpenStudio Application or PAT.
</p>
<p>9.2  OpenStudio Measure Overview
</p>
<p>We have already explored the basic concept of an OpenStudio Measure along with 
</p>
<p>the BCL as a convenient source for them in Chap. 6. In Chap. 7, we extended our 
</p>
<p>understanding of OpenStudio Measures as a means of optimizing building energy 
</p>
<p>performance and calibrating models against consumption data. Chapter 8 high-
</p>
<p>lighted an advanced use of Measure scripting to combine Radiance and EnergyPlus 
</p>
<p>analyses for more accurate daylighting design savings estimates. Another example 
</p>
<p>The original version of this chapter was revised. A correction to this chapter can be found at  
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Electronic Supplementary Material: The online version of this chapter (https://doi.org/10.1007/ 
</p>
<p>978-3-319-77809-9_9) contains supplementary material, which is available to authorized users.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_9&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_9&amp;domain=pdf</a></div>
</div>
<div class="page"><p/>
<p>288
</p>
<p>integrates1 OpenStudio models with the GLHEPro2 Ground Loop Heat Exchanger 
</p>
<p>Design tool. Lastly, the authors know of one enterprising OpenStudio user who wrote 
</p>
<p>a Measure to access measured occupancy data from his Nest thermostat as a means 
</p>
<p>of creating Model schedules (Fig.&nbsp;9.1). We now turn our attention to how Measures 
</p>
<p>actually work and how to extend OpenStudio&rsquo;s functionality by creating new ones.
</p>
<p>OpenStudio Measures are ZIP archives comprised of at least two files: measure.xml 
</p>
<p>and measure.rb. The measure.xml file is an eXtensible Markup Language (XML) file 
</p>
<p>containing descriptive information (metadata) about the measure. Measure metadata is 
</p>
<p>used by the BCL and OpenStudio applications to identify where and how a measure 
</p>
<p>might be used, what arguments the measure may accept, when it was last modified, etc. 
</p>
<p>The measure.xml file, while written in plain text, can be difficult to read and edit. XML 
</p>
<p>editor/viewers are widely available3 and helpful in working with Measure metadata. 
</p>
<p>Figure&nbsp; 9.2 illustrates codebeautify.org&rsquo;s web- based XML viewer inspecting a raw 
</p>
<p>measure.xml (on left) and a convenient tree view of the same content (on right).
</p>
<p>Readily apparent in the tree view are the Measure&rsquo;s name, when it was last modi-
</p>
<p>fied, a high level description, a more detailed explanation of how the Measure 
</p>
<p>works, its arguments, search tags, and more. In this case, the &ldquo;set_gas_burner_effi-
</p>
<p>ciency&rdquo; Measure contains ten arguments, many of which are optional. The first two 
</p>
<p>named &ldquo;object&rdquo; and &ldquo;eff&rdquo; are required and tell the Measure which of the Model&rsquo;s air 
</p>
<p>loops it should operate on, the default being all of them, and the fractional burner 
</p>
<p>efficiency, which defaults to 0.95. Argument names, type definitions, etc. are of 
</p>
<p>particular significance in describing how information is passed between OpenStudio 
</p>
<p>applications and the measure.rb code itself.
</p>
<p>If the OpenStudio Measure metadata standard defines how it can be connected 
</p>
<p>with OpenStudio applications, much like a puzzle piece, then the measure.rb repre-
</p>
<p>sents the picture on the puzzle piece. Measures may contain additional files such as 
</p>
<p>design documents, test cases, and more as part of the Measure&rsquo;s &ldquo;payload,&rdquo; but the 
</p>
<p>measure.rb contains the actual Ruby code that is executed whenever the measure is 
</p>
<p>invoked by an application. Figure&nbsp;9.3 illustrates the overall &ldquo;anatomy&rdquo; of a Measure 
</p>
<p>as it might appear on the BCL.
</p>
<p>1 https://bcl.nrel.gov/search/site/GLHEPro?f[0]=bundle%3Anrel_measure
2 https://hvac.okstate.edu/glhepro/overview
3 http://codebeautify.org/xmlviewer
</p>
<p>Fig. 9.1 NEST thermostat Measure concept
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/search/site/GLHEPro?f%5b0%5d=bundle%3Anrel_measure">https://bcl.nrel.gov/search/site/GLHEPro?f%5b0%5d=bundle%3Anrel_measure</a></div>
<div class="annotation"><a href="https://hvac.okstate.edu/glhepro/overview">https://hvac.okstate.edu/glhepro/overview</a></div>
<div class="annotation"><a href="http://codebeautify.org/xmlviewer">http://codebeautify.org/xmlviewer</a></div>
</div>
<div class="page"><p/>
<p>289
</p>
<p>Fig. 9.2 Code beautify used to inspect a Measure.xml file
</p>
<p>Fig. 9.3 Anatomy of a Measure
</p>
<p>9.2 OpenStudio Measure Overview</p>
<p/>
</div>
<div class="page"><p/>
<p>290
</p>
<p>The following &ldquo;snippet&rdquo; of Measure Ruby code provides some flavor for what 
</p>
<p>Measure scripts look like. In this example, the Measure loops across all surfaces 
</p>
<p>in the Model. If a surface is an exterior wall, then a new construction is applied to 
</p>
<p>that surface.
</p>
<p># Measure structure to replace exterior wall orig construction with new
</p>
<p>model.getSurfaces.each do |s|
</p>
<p>if s.outsideBoundaryCondition == &ldquo;Outdoors&rdquo; and s.surfaceType == &ldquo;Wall&rdquo;
</p>
<p>if s.construction.name.get == orig
</p>
<p>s.setConstruction(new)
 
</p>
<p>Sections 9.3 and 9.4 cover the rudiments of modifying existing measure.xml and 
</p>
<p>measure.rb files or creating new ones. Section 9.5 presents the important topic of 
</p>
<p>Measure testing, and additional files one might want to include as part of a Measure&rsquo;s 
</p>
<p>payload to continuously verify that it works as intended. The reader is referred to 
</p>
<p>the Measure Writer&rsquo;s Reference Guide on the OpenStudio website4 as an additional 
</p>
<p>resource for use alongside these sections of the text.
</p>
<p>9.3  Adapting an&nbsp;Existing Measure
</p>
<p>Recall from Chap. 6 that Measures frequently start out on the BCL and are then 
</p>
<p>downloaded to the user&rsquo;s local library. In the case of PAT, Measures may then 
</p>
<p>be added from that local library to a specific project. Figure&nbsp;9.4 shows PAT&rsquo;s 
</p>
<p>now familiar Measure management window with a range of fenestration 
</p>
<p>Measures. Two of these have already been downloaded and are available to add 
</p>
<p>to this PAT project.
</p>
<p>Note that once a Measure has been downloaded, its  Button changes to a  
</p>
<p>Button. Clicking  creates a copy of the measure in a separate directory desig-
</p>
<p>nated as &ldquo;MyMeasures.&rdquo; This directory is distinct from the local library and is 
</p>
<p>intended for use in creating new or customized Measures. Figure&nbsp;9.5 illustrates a 
</p>
<p>&ldquo;flow&rdquo; of Measures from the BCL to a user&rsquo;s local Measures directory, which can 
</p>
<p>then be used directly in a PAT project or copied into MyMeasures for modification 
</p>
<p>and use in PAT.
</p>
<p>Both the OpenStudio Application and PAT have a Preferences Menu option that 
</p>
<p>allows the user to specify (or change) the location of this directory. Measures in the 
</p>
<p>MyMeasures directory will be denoted with a &ldquo;My&rdquo; label in PAT or an  icon in 
</p>
<p>the OpenStudio Application (Fig.&nbsp;9.6).
</p>
<p>Highlighting a Measure in the OpenStudio Application also enables a copy 
</p>
<p>Measure option indicated by a  Button. This behaves identically to PAT&rsquo;s  Button 
</p>
<p>and makes a copy of the Measure XML and .rb files to your MyMeasures directory 
</p>
<p>for further editing (Fig.&nbsp;9.7).
</p>
<p>4 http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide/
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
<div class="annotation"><a href="http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide/">http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide/</a></div>
</div>
<div class="page"><p/>
<p>291
</p>
<p>Fig. 9.4 Measure library with BCL fenestration content shown
</p>
<p>Fig. 9.5 Measure flow in PAT
</p>
<p>9.3 Adapting an&nbsp;Existing Measure</p>
<p/>
</div>
<div class="page"><p/>
<p>292
</p>
<p>Fig. 9.6 OpenStudio Apply Measure Now dialog highlighting BCL and MyMeasures content
</p>
<p>Fig. 9.7 Preparing to make a copy of a Measure in the OpenStudio Application
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>293
</p>
<p>9.4  Checkpoint Thirteen: Adapting Measures
</p>
<p>One of the best ways to learn how to write Measures is to modify an existing 
</p>
<p>Measure. By taking this approach, users who are not programming experts can gain 
</p>
<p>the confidence and skills to eventually develop their own Measures from scratch. In 
</p>
<p>this exercise, we will copy the measure named &ldquo;GasHeatingCoilEfficiency&rdquo; and 
</p>
<p>modify it to set the efficiency of gas fired hot water boilers instead.
</p>
<p>9.4.1  Text Editor
</p>
<p>For this exercise, you will need a text editor. Although a basic text editor like 
</p>
<p>Notepad for Windows will work, a text editor with syntax highlighting for the Ruby 
</p>
<p>programming language makes the process much easier. There are many programs 
</p>
<p>available online. Notepad++ is a good free option for Windows, and Mac users 
</p>
<p>might consider TextMate. The authors would not presume to suggest anything for 
</p>
<p>Linux users, lest we provoke a VI/Emacs altercation.
</p>
<p>9.4.2  Programming Background
</p>
<p>Writing Measures involves basic computer programming with the Ruby scripting 
</p>
<p>language. If basic programming concepts are unfamiliar to you, we recommend 
</p>
<p>beginning with an online tutorial.5 Spending an hour or two going through one of 
</p>
<p>the many excellent online Ruby tutorials will be well worth the effort. Here are few 
</p>
<p>key concepts you will need to comprehend, edit, or write most measures:
</p>
<p>&bull; Data types (String, Double, Integer, Array, Boolean),
</p>
<p>&bull; Variables,
</p>
<p>&bull; If &amp; Case Statements, and
</p>
<p>&bull; For &amp; For Each Loops.
</p>
<p>9.4.3  Copy the&nbsp;Measure
</p>
<p>The first step in adapting a Measure for a new purpose is to find an existing one that 
</p>
<p>has similar functionality to what you are trying to achieve. For example, if your goal 
</p>
<p>were to modify wall insulation, a Measure that modified roof insulation might be a 
</p>
<p>good candidate. For the purpose of this exercise, the Measure to be copied will be 
</p>
<p>&ldquo;GasHeatingCoilEfficiency.&rdquo;
</p>
<p>5 https://www.ruby-lang.org/en/documentation/quickstart/
</p>
<p>9.4 Checkpoint Thirteen: Adapting Measures</p>
<p/>
<div class="annotation"><a href="https://www.ruby-lang.org/en/documentation/quickstart/">https://www.ruby-lang.org/en/documentation/quickstart/</a></div>
</div>
<div class="page"><p/>
<p>294
</p>
<p> 1. Open the PrimarySchoolHVAC.osm Model from Chap. 4 in the OpenStudio 
</p>
<p>Application.
</p>
<p> 2. Open the &ldquo;Apply Measure Now&rdquo; dialog under &ldquo;Components &amp; Measures&rdquo;
</p>
<p> 3. Find the &ldquo;Gas Heating Coil Efficiency&rdquo; Measure under HVAC &gt; Heating
</p>
<p> 4. Make a copy of the Measure using the  Button.
</p>
<p> 5. Change the name to: Gas Fired Boiler Efficiency.
</p>
<p>9.4.4  Review the&nbsp;Measure
</p>
<p>After the new Measure is created, a folder will be opened that contains a/tests direc-
</p>
<p>tory, a measure.xml file, and the new measure.rb file. Open the measure.rb file in 
</p>
<p>your text editor. It should look something like Fig.&nbsp;9.8 below.
</p>
<p>The first step is to get a general idea of how the existing code works.  
</p>
<p>Well-written measures should have comments describing what the code is doing at 
</p>
<p>each step. These comments are denoted by the # symbol at the beginning of the line. 
</p>
<p>Read these comments in order, starting at the top of the file and moving down to the 
</p>
<p>bottom. Don&rsquo;t worry about the rest of the code in the file. You may need to repeat 
</p>
<p>this process a few times to get the general idea. At the end of this process, you 
</p>
<p>should have a general idea of the steps that are involved in the measure. If a mea-
</p>
<p>sure is insufficiently commented or is very complex, it is not a good starting point. 
</p>
<p>Rather than wasting time learning from a difficult example, look for a simpler mea-
</p>
<p>sure to start with.
</p>
<p>With the general idea in mind, start again at the first comment. Read the code 
</p>
<p>immediately below this comment. Use your basic programming knowledge and 
</p>
<p>energy modeling expertise to understand what is going on. You can add additional 
</p>
<p>comments to the file on a line-by-line basis can help you document the progress you 
</p>
<p>are making and keep the ideas straight. This process sounds tedious, but after doing 
</p>
<p>it once or twice you will have a much better understanding of how the measure works.
</p>
<p># Start the measure
</p>
<p>class GasBoilerEfficiency &lt; OpenStudio::Ruleset::ModelUserScript
</p>
<p># Define the name that a user will see
</p>
<p>def name
</p>
<p>return "Gas Boiler Efficiency"
</p>
<p>end
</p>
<p># Define the arguments that the user will input
</p>
<p>def arguments(model)
</p>
<p>args = OpenStudio::Ruleset::OSArgumentVector.new
</p>
<p># Make an argument for the COP
</p>
<p>eff = OpenStudio::Ruleset::OSArgument::makeDoubleArgument("eff",true)
</p>
<p>eff.setDisplayName("Rated Efficiency")
</p>
<p>eff.setDescription("Rated gas burner efficiency of the gas heating coil")
</p>
<p>eff.setUnits("%")
</p>
<p>eff.setDefaultValue(0.8)
</p>
<p>args &lt;&lt; eff
</p>
<p>return args
</p>
<p>end
</p>
<p>Fig. 9.8 Reading through a Measure
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>295
</p>
<p>9.4.5  Modify the&nbsp;Measure
</p>
<p>After gaining an understanding of the code, we are going to make our first edit to 
</p>
<p>the file. In this case, we are simply changing the description and default value for 
</p>
<p>the measure argument from gas burner efficiency to boiler efficiency. It is a good 
</p>
<p>idea to start small, make minor changes, and then test before moving on. Find the 
</p>
<p>section of the measures shown in Fig.&nbsp;9.9 below, make the changes specified, and 
</p>
<p>save the file.
</p>
<p>Before making any other changes, run the measure using &ldquo;Apply Measure Now&rdquo; 
</p>
<p>and review the resulting Model. Ensure that the changes you made are actually 
</p>
<p>reflected in the Model. In this case, the changes to the argument can be seen in the 
</p>
<p>dialog, as shown in Fig.&nbsp;9.10.
</p>
<p>If the measure didn&rsquo;t run, go back and correct any typos or other errors you may 
</p>
<p>have made. Generally, the line number for the error will be shown in the message. 
</p>
<p>For example, Fig.&nbsp;9.11 identifies the location of a typo.
</p>
<p>Proceed in this fashion, making small changes and testing, until the measure is to 
</p>
<p>your liking. Until you have performed this process a few times, resist the temptation 
</p>
<p>to change multiple things at once. Think of the process as an experiment; if you 
</p>
<p>change two variables and the measure doesn&rsquo;t run, you won&rsquo;t know which change 
</p>
<p>was responsible for the failure.
</p>
<p>Next, modify the allowable boiler efficiencies. Change the code as shown in 
</p>
<p>Fig.&nbsp;9.12 so that the boiler efficiency must be between 0.65 (65%) and 1 (100%). This 
</p>
<p>range is acceptable for our purposes, but be aware that an existing building could 
</p>
<p>contain an old boiler in disrepair that falls outside of these bounds these bounds.
</p>
<p>Next, modify the code to change boilers instead of gas heating coils, as shown in 
</p>
<p>Fig.&nbsp;9.13.
</p>
<p>Next, modify the code that reports whether or not the Measure was applicable, as 
</p>
<p>shown in Fig.&nbsp;9.14.
</p>
<p>Next, modify the code that reports the initial and final condition of the Model, as 
</p>
<p>shown in Fig.&nbsp;9.15.
</p>
<p>Change this:
</p>
<p># Make an argument for the efficiency
</p>
<p>eff = OpenStudio::Ruleset::OSArgument::makeDoubleArgument("eff",true)
</p>
<p>eff.setDisplayName("Rated Efficiency")
</p>
<p>eff.setDescription("Rated gas burner efficiency of the gas heating coil")
</p>
<p>eff.setUnits("%")
</p>
<p>eff.setDefaultValue(0.8)
</p>
<p>args &lt;&lt; eff
</p>
<p>To this:
</p>
<p># Make an argument for the efficiency
</p>
<p>eff = OpenStudio::Ruleset::OSArgument::makeDoubleArgument("eff",true)
</p>
<p>eff.setDisplayName("Rated Efficiency")
</p>
<p>eff.setDescription("Rated efficiency of the boiler")
</p>
<p>eff.setUnits("%")
</p>
<p>eff.setDefaultValue(0.85)
</p>
<p>args &lt;&lt; eff
</p>
<p>Fig. 9.9 Initial edits to the new Measure
</p>
<p>9.4 Checkpoint Thirteen: Adapting Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>296
</p>
<p>Fig. 9.10 Verifying that the argument changes were made correctly
</p>
<p>Fig. 9.11 Identifying the location of a Measure error
</p>
<p>Change this:
</p>
<p># Check the efficiency for reasonableness
</p>
<p># Efficiency must be between zero and one
</p>
<p>if eff &lt;= 0 || eff &gt;= 1
</p>
<p>runner.registerError("Efficiency must be between zero and one.  You entered #{eff}.")
</p>
<p>return false
</p>
<p>end
</p>
<p>To this:
</p>
<p># Check the efficiency for reasonableness
</p>
<p># Efficiency must be between 0.65 and 1
</p>
<p>if eff &lt;= 0.65 || eff &gt;= 1
</p>
<p>runner.registerError("Efficiency must be between 0.65 and 1.  You entered #{eff}.")
</p>
<p>return false
</p>
<p>end
</p>
<p>Fig. 9.12 Making a second change to the Measure
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>297
</p>
<p>Change this:
</p>
<p># Loop through the gas heating coils in the model
num_htg_coils_changed = 0
orig_effs = []
model.getCoilHeatingGass.each do |htg_coil|
</p>
<p># Get the original efficiency and store it
eff_original = htg_coil.gasBurnerEfficiency
orig_effs &lt;&lt; eff_original
</p>
<p># Change the efficiency to the new value
htg_coil.setGasBurnerEfficiency(eff)
</p>
<p># Report the change of efficiency
runner.registerInfo("Changing the efficiency of #{htg_coil.name} from #{eff_original} to 
</p>
<p>#{eff} ")
</p>
<p># Add to the number of coils changed
num_htg_coils_changed += 1
</p>
<p>end
</p>
<p>To this:
</p>
<p># Loop through the boilers in the model
num_blrs_changed = 0
orig_effs = []
model.getBoilerHotWaters.each do |boiler|
</p>
<p># Get the original efficiency and store it
eff_original = boiler.nominalThermalEfficiency
orig_effs &lt;&lt; eff_original
</p>
<p># Change the efficiency to the new value
boiler.setNominalThermalEfficiency(eff)
</p>
<p># Report the change of efficiency
runner.registerInfo("Changing the efficiency of #{boiler.name} from #{eff_original} to 
</p>
<p>#{eff} ")
</p>
<p># Add to the number of boilers changed
num_blrs_changed += 1
</p>
<p>end
</p>
<p>Fig. 9.13 Making a third change to the Measure
</p>
<p>Change this:
</p>
<p># Not applicable if no coils were changed
if num_htg_coils_changed == 0
runner.registerAsNotApplicable("Not applicable; model contains no gas heating coils.")
return true
</p>
<p>end
</p>
<p>To this:
</p>
<p># Not applicable if no boilers were changed
if num_blrs_changed == 0
runner.registerAsNotApplicable("Not applicable; model contains no boilers.")
return true
</p>
<p>end
</p>
<p>Fig. 9.14 Making a fourth Measure change
</p>
<p>9.4 Checkpoint Thirteen: Adapting Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>298
</p>
<p>The final step is testing the Measure on a Model. Run the Measure via &ldquo;Apply 
</p>
<p>Measure Now&rdquo; on our school Model. The result should be a dialog that shows the 
</p>
<p>newly modified messages, which refer to boilers instead of gas heating coils, and 
</p>
<p>show the newly modified default efficiency, as shown in Fig.&nbsp;9.16.
</p>
<p>If the Measure output looks good, the next step is to verify the Object values in 
</p>
<p>the Model itself. Click  in the &ldquo;Apply Measure Now&rdquo; dialog. Proceed to the 
</p>
<p>HVAC ( ) Tab, and then navigate to the Hot Water Loop. Click on the boiler Object 
</p>
<p>and ensure that the efficiency value matches expectations, as shown in Fig.&nbsp;9.17. If 
</p>
<p>it does not, use the &ldquo;File/Revert to Saved&rdquo; menu option to discard these changes and 
</p>
<p>reload the Model as it was before the Measure was applied.
</p>
<p>9.5  Creating a&nbsp;New Measure
</p>
<p>Both the OpenStudio Application and PAT enable the creation of new Measures 
</p>
<p>from scratch. Clicking the  Button in PAT or the  Button in the OpenStudio 
</p>
<p>Application opens a window to capture information about the new Measure 
</p>
<p>(Fig.&nbsp;9.18). The astute reader will quickly realize that the contents of this dialog are 
</p>
<p>used to create a new measure.xml file, and allow the author to specify the nature of 
</p>
<p>the Measure, its intended use, and how it should show up within a Measure search.
</p>
<p>Change this:
</p>
<p># Record the initial efficiency range of the heating coils
runner.registerInitialCondition("Gas coils had efficiencies between #{orig_effs.min * 100}% to 
</p>
<p>#{orig_effs.max * 100}%.")
</p>
<p># Record the final efficiency of the heating coils
runner.registerFinalCondition("#{num_htg_coils_changed} gas coils were set to #{eff * 100}% 
</p>
<p>efficiency.")
</p>
<p>To this:
</p>
<p># Record the initial efficiency range of the boilers
runner.registerInitialCondition("Boilers had efficiencies between #{orig_effs.min * 100}% to 
</p>
<p>#{orig_effs.max * 100}%.")
</p>
<p># Record the final efficiency of the boilers
runner.registerFinalCondition("#{num_blrs_changed} boilers were set to #{eff * 100}% 
</p>
<p>efficiency.")
</p>
<p>Fig. 9.15 Final Measure change
</p>
<p>Fig. 9.16 Output from a successful application of our Measure
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>299
</p>
<p>Fig. 9.17 Boiler efficiency modified successfully by our new Measure
</p>
<p>Fig. 9.18 OpenStudio Application Measure creation dialog
</p>
<p>9.5 Creating a&nbsp;New Measure</p>
<p/>
</div>
<div class="page"><p/>
<p>300
</p>
<p>The Measure creation process also generates a measure.rb template file, which 
</p>
<p>can be opened in a text editor or a Ruby Integrated Development Environment 
</p>
<p>(IDE) like RubyMine (Fig.&nbsp;9.19). The template file includes placeholders or &ldquo;stubs&rdquo; 
</p>
<p>for required methods that are fully documented in the OpenStudio Measure Writer&rsquo;s 
</p>
<p>Reference Guide. Many of these are self-explanatory&nbsp;&ndash; e.g. name, description, mod-
</p>
<p>eler_description, etc.
</p>
<p>The arguments method parses any required or optional arguments that are passed 
</p>
<p>into the Measure, mapping them to variables that will be used by the Measure&rsquo;s 
</p>
<p>code. As illustrated above, new Measure contains a brief code snippet that illustrates 
</p>
<p>using a single string argument with a default value of &ldquo;New space name.&rdquo;
</p>
<p>Figure 9.20 presents another sample arguments method, illustrating additional 
</p>
<p>input data types. In this more sophisticated example, the Model that the Measure is 
</p>
<p>being applied to is first queried to identify all of its space types. These space types 
</p>
<p>are then used to populate a menu of choices that comprise the Measure&rsquo;s first argu-
</p>
<p>ment dynamically. An additional (default) option &ldquo;*Entire Building*&rdquo; is also added, 
</p>
<p>allowing the user to specify that the Measure should act on each space in the Model. 
</p>
<p>A second floating point numerical argument related to &ldquo;power reduction&rdquo; is also 
</p>
<p>expected by the Measure and defaults to 30. The reader is referred to the Measure 
</p>
<p>Writing Guide for complete documentation on Measure arguments. Existing 
</p>
<p>Measures in the BCL are also an excellent source of examples.
</p>
<p>A Measure&rsquo;s run method is where the &ldquo;real work&rdquo; is performed. Logic to ensure 
</p>
<p>that inputs are meaningful, perform transformations to the Model, and reportstatus 
</p>
<p>are all contained within the run method. The run method created for a new Measure 
</p>
<p>is shown in Fig.&nbsp;9.21.
</p>
<p>Fig. 9.19 New Measure template file edited within the RubyMine IDE
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>301
</p>
<p>Fig. 9.20 Example Measure arguments method
</p>
<p>Fig. 9.21 Run method from the new Measure template
</p>
<p>9.5 Creating a&nbsp;New Measure</p>
<p/>
</div>
<div class="page"><p/>
<p>302
</p>
<p>This run method includes a call to OpenStudio&rsquo;s &ldquo;runner.validateUserArguments&rdquo; 
</p>
<p>method that verifies that the user entered the required inputs with the correct data 
</p>
<p>types. A Measure-specific check ensures that a non-empty space name was entered 
</p>
<p>before proceeding. Measure authors are encouraged to qualify user inputs rigorously 
</p>
<p>and invoke the &ldquo;runner.registerError&rdquo; method with a meaningful error message prior 
</p>
<p>to executing &ldquo;return false&rdquo; code. This helps ensure that the Measure doesn&rsquo;t generate 
</p>
<p>nonsensical models, providing meaningful feedback to the user.
</p>
<p>Related to the topic of providing useful feedback to the user are a trio of 
</p>
<p>OpenStudio methods; &ldquo;runner.registerInitialCondition,&rdquo; &ldquo;runner.registerInfo,&rdquo; and 
</p>
<p>&ldquo;runner.registerFinalCondition.&rdquo; We first experienced the products of these methods 
</p>
<p>in Sect. 6.3.1 with an example Measure that reported the initial and final states of 
</p>
<p>the Model when the ERV Measure was applied to a Model. The new Measure tem-
</p>
<p>plate reports the number of spaces in the initial Model, the name of the new space 
</p>
<p>that was added, and the number of spaces in the final Model. The Measure&rsquo;s logic 
</p>
<p>concludes with &ldquo;return true,&rdquo; informing the program that called the Measure that it 
</p>
<p>completed normally.
</p>
<p>9.6  Checkpoint Fourteen: Creating a&nbsp;New Measure
</p>
<p>In this exercise, we will create a new Measure from scratch, starting with just the 
</p>
<p>basic template created by OpenStudio. This final activity assumes that you have 
</p>
<p>read the OpenStudio Measure Writer&rsquo;s Reference Guide online. You will likely find 
</p>
<p>the need to refer back to it often to understand the code that is being used.
</p>
<p>The first step in writing a Measure is writing an outline of what it will do. This 
</p>
<p>step may seem silly, but having an outline to refer back to when you get lost in the 
</p>
<p>details of coding can be very helpful. For this example, we are going to make a 
</p>
<p>Measure that adds a user-specified process load, of a user-specified fuel type to the 
</p>
<p>largest Space in the Model. An outline of the steps includes:
</p>
<p> 1. Get user input for load type (electric or gas),
</p>
<p> 2. Get user input for the amount of load (W),
</p>
<p> 3. Identify the largest Space in the Model,
</p>
<p> 4. Create a process load of the appropriate type and wattage,
</p>
<p> 5. Assign it to the identified Space, and
</p>
<p> 6. Report out the load amount that was added and the associated Space.
</p>
<p>The next step in the process is to go through the OpenStudio GUI and walk 
</p>
<p>through the outline steps. Expand upon the outline by writing down the OpenStudio 
</p>
<p>Object types to be used. This will make it easier to look up the documentation for 
</p>
<p>these objects while writing the Measure. A revised outline might look something 
</p>
<p>like this:
</p>
<p> 1. Get user input for load type (electric or gas),
</p>
<p>&bull; Choice input (dropdown list)
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>303
</p>
<p> 2. Get user input for the amount of load (W),
</p>
<p>&bull; Number input
</p>
<p> 3. Identify the largest Space in the Model,
</p>
<p>&bull; OpenStudio Space objects
</p>
<p> 4. Create a process load of the appropriate type and wattage,
</p>
<p>&bull; If electric, use OpenStudio Electric Equipment Definition and Electric 
</p>
<p>Equipment objects
</p>
<p>&bull; If gas, use OpenStudio Gas Equipment Definition and Gas Equipment objects
</p>
<p> 5. Assign it to the identified Space, and
</p>
<p>&bull; OpenStudio Space objects
</p>
<p> 6. Report out the amount of load that was added, and the associated Space.
</p>
<p>Create a new Measure using the OpenStudio Application, as shown in Fig.&nbsp;9.18. 
</p>
<p>Use the inputs shown in Fig.&nbsp;9.22.
</p>
<p>Open the new measure.rb file in a text editor. Select this Measure in the &ldquo;Apply 
</p>
<p>Measure Now&rdquo; dialog. It will be found under Equipment &gt; Electric Equipment. You 
</p>
<p>should see that default arguments match those in the measure.rb file. They must be 
</p>
<p>Fig. 9.22 Creating the new Measure XML
</p>
<p>9.6 Checkpoint Fourteen: Creating a&nbsp;New Measure</p>
<p/>
</div>
<div class="page"><p/>
<p>304
</p>
<p>customized for our application. Create two Measure arguments: one for the load 
</p>
<p>type and another for the wattage as shown in Fig.&nbsp;9.23.
</p>
<p>Add the code from Fig.&nbsp;9.24 to assign the argument values to variables.
</p>
<p>Figure 9.25 contains a code snippet that identifies the largest Space in a Model.
</p>
<p>It is best practice to include error handling code and appropriate reporting in 
</p>
<p>a Measure. Figure&nbsp;9.26 is a simple example that reports if the Model contains 
</p>
<p>no Spaces and exits. If Spaces do exist, then the Measure reports its name and 
</p>
<p>size in ft2.
</p>
<p>The logic shown in Fig.&nbsp;9.27 adds the appropriate load Object depending upon 
</p>
<p>the fuel type and assigns it to the appropriate Space.
</p>
<p>The Measure concludes in Fig.&nbsp;9.28 with code to report the name of the load that 
</p>
<p>was added to the largest Space.
</p>
<p>Test the Measure on an example Model and ensure that it works as intended. If 
</p>
<p>you have written the Measure correctly, the output should look like Fig.&nbsp;9.29.
</p>
<p>You&rsquo;ve now written an entire Measure that may be used in the OpenStudio 
</p>
<p>Application, PAT, or other OpenStudio-based applications. By writing an outline, 
</p>
<p>planning the approach, and then dividing code up into small, manageable pieces; the 
</p>
<p>Measure writing process is made less daunting. What tedious modeling tasks do you 
</p>
<p>want to automate next?
</p>
<p># Get user input for process load type
load_type_chs = OpenStudio::StringVector.new
load_type_chs &lt;&lt; 'Electric'
load_type_chs &lt;&lt; 'Natural Gas'
load_type = OpenStudio::Ruleset::OSArgument::makeChoiceArgument('load_type', load_type_chs, true)
load_type.setDisplayName('Load Type')
load_type.setDescription('The type of process load to add.')
load_type.setDefaultValue('Electric')
args &lt;&lt; load_type
</p>
<p># Get user input for load wattage
load_wattage = OpenStudio::Ruleset::OSArgument::makeDoubleArgument('load_wattage', true)
load_wattage.setDisplayName('Load Wattage')
load_wattage.setUnits('W')
load_wattage.setDefaultValue(1000.0)
args &lt;&lt; load_wattage
</p>
<p>Fig. 9.23 Measure argument code
</p>
<p># assign the user inputs to variables
load_type = runner.getStringArgumentValue("load_type", user_arguments)
load_wattage = runner.getDoubleArgumentValue("load_wattage", user_arguments)
</p>
<p>Fig. 9.24 Assigning Measure arguments to Measure variables
</p>
<p># Find the biggest space (by floor area) in the model
big_space = nil
biggest_area_m2 = 0
model.getSpaces.each do |space|
# Go to the next space unless this one is bigger than previous spaces
next if space.floorArea &lt; biggest_area_m2
# Record this as the biggest space
big_space = space
biggest_area_m2 = space.floorArea
</p>
<p>end
</p>
<p>Fig. 9.25 Identifying the largest Space in a Model
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>305
</p>
<p># Not applicable if no spaces was found
if big_space.nil?
runner.registerAsNotApplicable("No spaces were found in the model.")
return true
</p>
<p>end
</p>
<p># Record the biggest space
biggest_area_ft2 = OpenStudio.convert(biggest_area_m2, 'm^2', 'ft^2').get
runner.registerInfo("The biggest space is #{big_space.name}, with a floor area of 
</p>
<p>#{biggest_area_ft2} ft2")
</p>
<p>Fig. 9.26 Error trapping logic for models with no spaces
</p>
<p># Make the correct type of load definition
case load_type
when 'Electric'
</p>
<p># Create load definition
load_def = OpenStudio::Model::ElectricEquipmentDefinition.new(model)
load_def_name = "#{load_wattage.round} W Electric Load Definition"
load_def.setName(load_def_name)
load_def.setDesignLevel(load_wattage)
</p>
<p># Create load instance
load = OpenStudio::Model::ElectricEquipment.new(load_def)
load_name = "#{load_wattage.round} W Electric Load"
load.setName(load_name)
load.setMultiplier(1.0)
</p>
<p># Assign to biggest space
load.setSpace(big_space)
runner.registerInfo("Added #{load_name} to #{big_space.name}.")
</p>
<p>when 'Natural Gas'
</p>
<p># Create load definition
load_def = OpenStudio::Model::GasEquipmentDefinition.new(model)
load_def_name = "#{load_wattage.round} W Gas Load Definition"
load_def.setName(load_def_name)
load_def.setDesignLevel(load_wattage)
</p>
<p># Create load instance
load = OpenStudio::Model::GasEquipment.new(load_def)
load_name = "#{load_wattage.round} W Gas Load"
load.setName(load_name)
load.setMultiplier(1.0)
</p>
<p># Assign to biggest space
load.setSpace(big_space)
runner.registerInfo("Added #{load.name} to #{big_space.name}.")
</p>
<p>end
</p>
<p>Fig. 9.27 Ruby code that adds electric or gas equipment objects to the largest Space in the Model
</p>
<p># Record the final condition
runner.registerFinalCondition("Added one #{load.name} to #{big_space.name}.")
</p>
<p>return true
</p>
<p>Fig. 9.28 Reporting the final state of the Model after the Measure completes
</p>
<p>Fig. 9.29 Successful addition of a process load to the largest Space in a Model
</p>
<p>9.6 Checkpoint Fourteen: Creating a&nbsp;New Measure</p>
<p/>
</div>
<div class="page"><p/>
<p>306
</p>
<p>9.7  Checkpoint Fifteen: Testing Measures
</p>
<p>As shown in the previous two exercises, the most obvious way to test that a 
</p>
<p>Measure is working correctly is to apply the Measure to a Model and check that 
</p>
<p>the output messages and resulting changes occurred as expected. Some best prac-
</p>
<p>tices for this step include testing on more than one Model, where differences in 
</p>
<p>the Model&rsquo;s contents may cause issues. Testing on a Model where the Measure 
</p>
<p>should not be applicable is equally valuable to ensure that the applicability is 
</p>
<p>reported correctly.
</p>
<p>Advanced users with large collections of their own Measures, or companies 
</p>
<p>where employees share common libraries of Measures need to ensure that 
</p>
<p>Measures continue to work over time. In these situations, it is impractical to manu-
</p>
<p>ally re-test Measure functionality each time a change is made to OpenStudio itself 
</p>
<p>or Measure code.
</p>
<p>Fortunately, OpenStudio borrows from software engineering best practices to 
</p>
<p>provide a solution. This solution is known as unit testing. A unit test is simply a 
</p>
<p>script that runs a piece of code and checks that certain conditions, known as 
</p>
<p>assertions are met. Unit tests for OpenStudio Measures programmatically assert 
</p>
<p>that a Measure behaves correctly for one or more test Models. Assertion is not a 
</p>
<p>guarantee of consistent performance but is a strong indicator.
</p>
<p>Navigate to your MyMeasures directory to locate your GasHeatingCoil 
</p>
<p>Measure, then open the file called GasHeatingCoil_Test.rb from the /tests sub-
</p>
<p>folder. Figure&nbsp;9.30 below shows this unit test for the Gas Heating Coil Measure.
</p>
<p>Following the approach in the previous checkpoint and read through the file to 
</p>
<p>get a high level understanding of how it works. A quick read of the comments shows 
</p>
<p>that this test:
</p>
<p> 1. Creates an instance of the Measure,
</p>
<p> 2. Creates a runner to run the Measure,
</p>
<p> 3. Loads the test Model,
</p>
<p> 4. Sets the arguments for the Measure,
</p>
<p> 5. Runs the Measure on the test Model using the supplied arguments,
</p>
<p> 6. Shows the output including information, warning, &amp; error messages,
</p>
<p> 7. Asserts that the Measure was applied successfully,
</p>
<p> 8. Asserts that the gas heating coils in the Model have the expected efficiencies, and
</p>
<p> 9. Saves the modified Model for later inspection,
</p>
<p>Next, run the unit test for this Measure by using the following steps:
</p>
<p> 1. Open a terminal/command prompt
</p>
<p> 2. Navigate to the /tests directory for the Measure by running the command:
</p>
<p>&bull; On Windows&nbsp;&ndash; cd C:\path\to\GasHeatingCoilEfficiency\tests
</p>
<p>&bull; On Mac&nbsp; &ndash; cd /Users/yourname/OpenStudio/MyMeasures/GasHeatingCoil 
</p>
<p>Efficiency\tests
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>307
</p>
<p> 3. Run the command:
</p>
<p>&bull; On Windows&nbsp; &ndash; C:\openstudio-2.3.0\bin\openstudio GasHeatingCoilEffici 
</p>
<p>ency_Test.rb
</p>
<p>&bull; On Mac&nbsp; &ndash; /Applications/OpenStudio-2.3.0/bin/openstudio GasHeatingCoil 
</p>
<p>Efficiency_Test.rb
</p>
<p>The output in Fig.&nbsp; 9.31 shows the initial condition, the final condition, info, 
</p>
<p>warning, and error messages. The last line shows that there were four assertions 
</p>
<p>require 'openstudio'
require 'openstudio/ruleset/ShowRunnerOutput'
</p>
<p>require "#{File.dirname(__FILE__)}/../measure.rb"
</p>
<p>require 'minitest/autorun'
</p>
<p>class GasHeatingCoilEfficiency_Test &lt; MiniTest::Unit::TestCase
</p>
<p>def test_change_efficiency
# create an instance of the measure
measure = GasHeatingCoilEfficiency.new
</p>
<p># create an instance of a runner
runner = OpenStudio::Measure::OSRunner.new(OpenStudio::WorkflowJSON.new)
</p>
<p># load the test model
translator = OpenStudio::OSVersion::VersionTranslator.new
path = OpenStudio::Path.new(File.dirname(__FILE__) + "/MyPrimarySchoolHVACTest.osm")
model = translator.loadModel(path)
assert(model.is_initialized)
model = model.get
</p>
<p># get arguments
arguments = measure.arguments(model)
argument_map = OpenStudio::Ruleset.convertOSArgumentVectorToMap(arguments)
</p>
<p># create hash of argument values.
# If the argument has a default that you want to use, you don't need it in the hash
args_hash = {}
args_hash["eff"] = 0.86
# using defaults values from measure.rb for other arguments
</p>
<p># populate argument with specified hash value if specified
arguments.each do |arg|
temp_arg_var = arg.clone
if args_hash.has_key?(arg.name)
assert(temp_arg_var.setValue(args_hash[arg.name]))
</p>
<p>end
argument_map[arg.name] = temp_arg_var
</p>
<p>end
</p>
<p># run the measure
measure.run(model, runner, argument_map)
result = runner.result
</p>
<p># show the output
show_output(result)
</p>
<p># assert that it ran correctly
assert_equal("Success", result.value.valueName)
</p>
<p># assert that all boilers in the model now have an efficiency of 0.86
model.getCoilHeatingGass.each do |htg_coil|
assert_equal(0.86, htg_coil.gasBurnerEfficiency, "Efficiency was not set correctly.")
</p>
<p>end
</p>
<p># save the model to test output directory
output_file_path = OpenStudio::Path.new(File.dirname(__FILE__) + "/output/test_output.osm")
model.save(output_file_path,true)
</p>
<p>end
</p>
<p>end
</p>
<p>Fig. 9.30 A typical Measure unit test
</p>
<p>9.7 Checkpoint Fifteen: Testing Measures</p>
<p/>
</div>
<div class="page"><p/>
<p>308
</p>
<p>made, and that there were zero test failures. This means that all of the checks passed 
</p>
<p>and that the Measure is asserted to work correctly.
</p>
<p>Now, modify the unit test for the Gas Boiler Efficiency Measure that was created 
</p>
<p>in the previous checkpoint. The modified code is shown on the next page with the 
</p>
<p>changes highlighted (Fig.&nbsp;9.32). Try to avoid looking at this code while making the 
</p>
<p>modifications yourself and see how far you can get. Remember the strategy of mak-
</p>
<p>ing small changes and re-running. Remember that error messages typically show 
</p>
<p>the line number where an error exists.
</p>
<p>When you have successfully modified the unit test, the output will look like 
</p>
<p>Fig.&nbsp;9.33.
</p>
<p>In order for unit tests to be useful, they must incorporate meaningful checks. 
</p>
<p>By itself, checking that the Measure completed successfully is a poor assertion 
</p>
<p>of success. The Measure could be setting values incorrectly or missing other key 
</p>
<p>behaviors entirely. For this reason, best practice is to include all the checks you 
</p>
<p>would perform when reviewing the output of a Measure successfully in the unit 
</p>
<p>test. Obviously, writing these tests takes time, so the effort needs to be weighed 
</p>
<p>against the cost. For those with large collections of Measures to manage, the 
</p>
<p>upfront cost of developing these tests quickly pays for itself in avoided issues 
</p>
<p>later on.
</p>
<p>Fig. 9.31 Typical Measure unit test output
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
</div>
<div class="page"><p/>
<p>309
</p>
<p>9.8  The OpenStudio Command Line Interface
</p>
<p>The OpenStudio CLI is a compact, cross-platform executable that processes 
</p>
<p>OpenStudio &ldquo;Workflow&rdquo; (OSW) files6 to create and simulate building energy mod-
</p>
<p>els. Workflows chain together Model files (OSMs) and Measures to automate com-
</p>
<p>mon modeling tasks. An OSW is a JSON (JavaScript Object Notation) file that 
</p>
<p>6 https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/
</p>
<p>require 'openstudio'
require 'openstudio/ruleset/ShowRunnerOutput'
</p>
<p>require "#{File.dirname(__FILE__)}/../measure.rb"
</p>
<p>require 'minitest/autorun'
</p>
<p>class GasBoilerEfficiency_Test &lt; MiniTest::Unit::TestCase
</p>
<p>def test_change_efficiency
# create an instance of the measure
measure = GasBoilerEfficiency.new
</p>
<p># create an instance of a runner
runner = OpenStudio::Measure::OSRunner.new(OpenStudio::WorkflowJSON.new)
</p>
<p># load the test model
translator = OpenStudio::OSVersion::VersionTranslator.new
path = OpenStudio::Path.new(File.dirname(__FILE__) + "/MyPrimarySchoolHVACTest.osm")
model = translator.loadModel(path)
assert(model.is_initialized)
model = model.get
</p>
<p># get arguments
arguments = measure.arguments(model)
argument_map = OpenStudio::Ruleset.convertOSArgumentVectorToMap(arguments)
</p>
<p># create hash of argument values.
# If the argument has a default that you want to use, you don't need it in the hash
args_hash = {}
args_hash["eff"] = 0.86
# using defaults values from measure.rb for other arguments
</p>
<p># populate argument with specified hash value if specified
arguments.each do |arg|
temp_arg_var = arg.clone
if args_hash.has_key?(arg.name)
assert(temp_arg_var.setValue(args_hash[arg.name]))
</p>
<p>end
argument_map[arg.name] = temp_arg_var
</p>
<p>end
</p>
<p># run the measure
measure.run(model, runner, argument_map)
result = runner.result
</p>
<p># show the output
show_output(result)
</p>
<p># assert that it ran correctly
assert_equal("Success", result.value.valueName)
</p>
<p># assert that all boilers in the model now have an efficiency of 0.86
model.getBoilerHotWaters.each do |boiler|
assert_equal(0.86, boiler.nominalThermalEfficiency, "Efficiency was not set correctly.")
</p>
<p>end
</p>
<p># save the model to test output directory
output_file_path = OpenStudio::Path.new(File.dirname(__FILE__) + "/output/test_output.osm")
model.save(output_file_path,true)
</p>
<p>end
</p>
<p>end
</p>
<p>Fig. 9.32 Modified unit test for the Gas Boiler Efficiency Measure
</p>
<p>9.8 The OpenStudio Command Line Interface</p>
<p/>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/</a></div>
</div>
<div class="page"><p/>
<p>310
</p>
<p>completely specifies a modeling workflow including the initial (seed) Model, 
</p>
<p>weather file, and specific Measures that are to be applied sequentially, along with 
</p>
<p>any arguments the Measures may require (Fig.&nbsp;9.34).7
</p>
<p>If Measures are akin to ingredients, then an OSW is the recipe, and the CLI is the 
</p>
<p>cook who uses both to create part of a tasty meal. Figure&nbsp;9.35 illustrates the basic 
</p>
<p>concept of using the CLI to execute a simple workflow.
</p>
<p>As its name would suggest, the CLI is invoked from a Windows, Mac, or Linux 
</p>
<p>command line prompt. Calling the openstudio executable with a -h or --help argu-
</p>
<p>ment produces the information shown in Fig.&nbsp;9.36.
</p>
<p>Using the CLI, the implementation details of proposed building energy modeling 
</p>
<p>application become software agnostic. Any programming language that can be used 
</p>
<p>to create an OSW and call the CLI can utilize OpenStudio and its supported engines 
</p>
<p>to perform detailed energy analysis.
</p>
<p>7 https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw- 
</p>
<p>structure
</p>
<p>Fig. 9.33 Unit test output for Gas Boiler Efficiency Measure
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure</a></div>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure</a></div>
</div>
<div class="page"><p/>
<p>311
</p>
<p>9.9  The OpenStudio Meta Command Line Interface
</p>
<p>The CLI is a powerful tool for creating and simulating individual building models, 
</p>
<p>but it requires a stream of OSW files to drive it. In Chap. 6, we saw this in action as 
</p>
<p>we used PAT to manually generate a series of building Design Alternatives that 
</p>
<p>were essentially individual OSWs, each processed by the OpenStudio CLI.&nbsp;  
</p>
<p>Fig. 9.34 Example OSW file
</p>
<p>Fig. 9.35 OpenStudio CLI enabled analysis (Credit: Marjorie Schott)
</p>
<p>9.9 The OpenStudio Meta Command Line Interface</p>
<p/>
</div>
<div class="page"><p/>
<p>312
</p>
<p>In Chap. 7, we explored PAT&rsquo;s ability to generate hundreds or thousands of OSWs 
</p>
<p>automatically. While each individual OSW was still processed by the CLI, they 
</p>
<p>were generated by another part of the SDK called the OpenStudio &ldquo;Meta&rdquo; CLI&nbsp;&ndash; so-
</p>
<p>called because it is a CLI that generates inputs for another CLI.&nbsp;If the CLI is the 
</p>
<p>cook, then the Meta CLI is the chef, overseeing all of the individual cooks in the 
</p>
<p>kitchen to satisfy a restaurant full of hungry diners.
</p>
<p>Whereas the CLI takes instruction from an OSW, the Meta CLI uses an 
</p>
<p>OpenStudio Analysis (OSA) file. An OSA describes the characteristics of an algo-
</p>
<p>rithm that will autonomously create individual OSWs. Example analyses include 
</p>
<p>the use of sampling or optimization algorithms that dynamically generate combina-
</p>
<p>tions of seeds, Measures, and Measure arguments. Such algorithms enable rapid 
</p>
<p>evaluation of efficiency performance spaces, optimized designs based on multiple 
</p>
<p>objectives, or calibration of energy models against metered consumption data.
</p>
<p>OSAs are also JSON files, but specify one or more seed models, one or more 
</p>
<p>weather files, an algorithm and its parameters, and a set of OpenStudio Measures 
</p>
<p>along with their parameters. Unlike workflow Measure arguments that are pre-
</p>
<p>scribed in an OSW, an OSA can describe ranges, distributions, or sets of arguments 
</p>
<p>that can be explored by the algorithm. The schema for the OSA is currently docu-
</p>
<p>mented in https://github.com/NREL/OpenStudio-analysis-gem. In Chap. 7, we uti-
</p>
<p>lized PAT to generate a number of different OSAs.
</p>
<p>The Meta CLI is a compact, cross-platform executable that consumes OSA files 
</p>
<p>and executes them using local, cluster, or cloud computing resources.8 Like the 
</p>
<p>OpenStudio CLI, the Meta CLI can be used to create (more advanced) applica-
</p>
<p>tions. Figure&nbsp;9.37 describes the basic concept of using the Meta CLI to execute an 
</p>
<p>analysis. It also illustrates the relationship between the Meta CLI, OpenStudio 
</p>
<p>Server,9 and parallel computing &ldquo;workers&rdquo; running individual instances of the 
</p>
<p>OpenStudio CLI.
</p>
<p>As with the CLI, the Meta CLI is invoked from the command line. Invoking it 
</p>
<p>with a -h or --help argument returns basic guidance on using it to start or stop an 
</p>
<p>OpenStudio Server and run an OSA on it (Fig.&nbsp;9.38).
</p>
<p>8 https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta
9 https://github.com/NREL/OpenStudio-server
</p>
<p>Fig. 9.36 OpenStudio CLI help text
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-analysis-gem">https://github.com/NREL/OpenStudio-analysis-gem</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta">https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server">https://github.com/NREL/OpenStudio-server</a></div>
</div>
<div class="page"><p/>
<p>313
</p>
<p>Use of the OpenStudio Meta CLI outside of PAT is an advanced software engi-
</p>
<p>neering topic that can best be explored via documentation located at https://github.
</p>
<p>com/NREL/OpenStudio-server.
</p>
<p>9.10  Additional Exercises (for Advanced Users)
</p>
<p> 1) Continue learning about OpenStudio Measures by creating additional variations 
</p>
<p>of existing Measures or write an entirely new one.
</p>
<p> 2) Explore the OpenStudio CLI by creating some simple calculators that take input 
</p>
<p>from the user, write one or more OSW files, and call the CLI.&nbsp;A few simple ideas 
</p>
<p>include:
</p>
<p>Fig. 9.37 OpenStudio Meta CLI enabled analysis (Credit: Marjorie Schott)
</p>
<p>Fig. 9.38 OpenStudio Meta CLI help text
</p>
<p>9.10 Additional Exercises (for Advanced Users)</p>
<p/>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server">https://github.com/NREL/OpenStudio-server</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server">https://github.com/NREL/OpenStudio-server</a></div>
</div>
<div class="page"><p/>
<p>314
</p>
<p>&bull; A before and after retrofit calculator that involves two OSW files&nbsp;&ndash; both 
</p>
<p>with the same seed Model and weather file. The two workflow files would 
</p>
<p>only differ in the EE Measures and/or Measure arguments applied in the 
</p>
<p>retrofit case.
</p>
<p>&bull; A simple calculator that assesses the energy savings potential of a new EE 
</p>
<p>technology across many building types by utilizing an empty seed model and 
</p>
<p>calling the DOE Prototype Building Measure as the first step in a workflow.
</p>
<p>References
</p>
<p>https://bcl.nrel.gov/search/site/GLHEPro?f[0]=bundle%3Anrel_measure
</p>
<p>http://codebeautify.org/xmlviewer
</p>
<p>https://hvac.okstate.edu/glhepro/overview
</p>
<p>https://github.com/NREL/OpenStudio-analysis-gem
</p>
<p>https://github.com/NREL/OpenStudio-server
</p>
<p>https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta
</p>
<p>https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface
</p>
<p>https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/# 
</p>
<p>osw-structure
</p>
<p>http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide
</p>
<p>https://www.ruby-lang.org/en/documentation/quickstart/
</p>
<p>9 The OpenStudio Software Development Kit</p>
<p/>
<div class="annotation"><a href="https://bcl.nrel.gov/search/site/GLHEPro?f[0]=bundle:nrel_measure">https://bcl.nrel.gov/search/site/GLHEPro?f[0]=bundle:nrel_measure</a></div>
<div class="annotation"><a href="http://codebeautify.org/xmlviewer">http://codebeautify.org/xmlviewer</a></div>
<div class="annotation"><a href="https://hvac.okstate.edu/glhepro/overview">https://hvac.okstate.edu/glhepro/overview</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-analysis-gem">https://github.com/NREL/OpenStudio-analysis-gem</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server">https://github.com/NREL/OpenStudio-server</a></div>
<div class="annotation"><a href="https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta">https://github.com/NREL/OpenStudio-server/blob/develop/bin/openstudio_meta</a></div>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface</a></div>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure</a></div>
<div class="annotation"><a href="https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure">https://nrel.github.io/OpenStudio-user-documentation/reference/command_line_interface/#osw-structure</a></div>
<div class="annotation"><a href="http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide">http://nrel.github.io/OpenStudio-user-documentation/reference/measure_writing_guide</a></div>
<div class="annotation"><a href="https://www.ruby-lang.org/en/documentation/quickstart/">https://www.ruby-lang.org/en/documentation/quickstart/</a></div>
</div>
<div class="page"><p/>
<p>E1&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_10
</p>
<p>Correction to: Building Energy Modeling 
with&nbsp;OpenStudio
</p>
<p>Larry&nbsp;Brackney, Andrew&nbsp;Parker, Daniel&nbsp;Macumber, and&nbsp;Kyle&nbsp;Benne
</p>
<p>The updated online version of this book can be found at 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9
</p>
<p>The updated online versions of these chapters can be found at
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_2
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_3
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_4
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_5
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_6
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_7
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_8
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9_9
</p>
<p> Correction to:  
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9
</p>
<p>This book was inadvertently published without the online supplementary files for 
</p>
<p>chapters 2 through 9. This has now been updated accordingly.</p>
<p/>
<div class="annotation"><a href="http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_10&amp;domain=pdf">http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-319-77809-9_10&amp;domain=pdf</a></div>
<div class="annotation"><a href="https://doi.org/10.1007/978-3-319-77809-9">https://doi.org/10.1007/978-3-319-77809-9</a></div>
</div>
<div class="page"><p/>
<p>315&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9
</p>
<p> Resources
</p>
<p>This book is intended as a structured guide to beginning energy modeling using 
</p>
<p>OpenStudio and EnergyPlus. The scope of building energy modeling is vast, and it 
</p>
<p>is not possible to cover all of the features of these continually evolving tools, let 
</p>
<p>alone the nuances of systems modeling that can take years to master. Fortunately, 
</p>
<p>many online resources can assist you as you continue to practice what you have 
</p>
<p>begun to learn in this book.
</p>
<p>The central hub for information on OpenStudio is the project home page at 
</p>
<p>https://openstudio.net. In addition to software downloads, you will find user docu-
</p>
<p>mentation, tutorials, YouTube videos, a developer section, and documentation to the 
</p>
<p>SDK&nbsp;- crucial for those who wish to develop their own Measures and OpenStudio 
</p>
<p>applications. Figure A.1 is the main OpenStudio user documentation page featuring 
</p>
<p>links to some of the online materials available at the site.
</p>
<p>The site also contains a link to https://unmethours.com, an online forum sup-
</p>
<p>ported by a vibrant community of energy modeling practitioners, researchers, and 
</p>
<p>tool developers (Fig. A.2). Unmet Hours uses a searchable question and answer 
</p>
<p>format, and is a tremendous resource for both novice and expert energy modelers.
</p>
<p>As we have noted many times throughout this book, OpenStudio hews very 
</p>
<p>closely to EnergyPlus&rsquo; component hierarchy. As such, OpenStudio users can and 
</p>
<p>should take advantage of EnergyPlus&rsquo; extensive documentation. We have included 
</p>
<p>footnoted URLs to both the EnergyPlus Input Output Reference Guide as well as 
</p>
<p>the EnergyPlus Engineering Reference throughout the text for good reason. Both 
</p>
<p>references may be accessed at https://energyplus.net as shown in Fig. A.3.
</p>
<p>Tip: If you get stuck on a modeling problem, or think you&rsquo;ve stumbled across 
</p>
<p>a software bug, Unmet Hours is the place to go, but&hellip;
</p>
<p>&hellip; please remember to search for your problem before posting. You may 
</p>
<p>often find your question has already been asked and answered.</p>
<p/>
<div class="annotation"><a href="https://doi.org/10.1007/978-3-319-77809-9">https://doi.org/10.1007/978-3-319-77809-9</a></div>
<div class="annotation"><a href="https://openstudio.net">https://openstudio.net</a></div>
<div class="annotation"><a href="https://unmethours.com">https://unmethours.com</a></div>
<div class="annotation"><a href="https://energyplus.net">https://energyplus.net</a></div>
</div>
<div class="page"><p/>
<p>316
</p>
<p>We leave you with a few troubleshooting tips for common problems that new 
</p>
<p>modelers frequently stumble into.
</p>
<p> Common Simulation Failures
</p>
<p>Even the most experienced energy modelers can be faced with the dreaded  
</p>
<p>simulation failure. Outright failures to simulate are generally well documented in 
</p>
<p>the eplusout.err file that EnergyPlus creates. Don&rsquo;t be afraid to open this file and 
</p>
<p>scroll through the contents. It won&rsquo;t bite, and the answers you seek are often there 
</p>
<p>in plain English.
</p>
<p>Fig. A.1 OpenStudio documentation web page
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>317
</p>
<p>Common errors that may result in a simulation failure include:
</p>
<p>Weather Related
</p>
<p>&bull; Q: Did you include an EPW weather file?
</p>
<p>&bull; A: Add one.
</p>
<p>&bull; Q: Did you include a DDY design day file?
</p>
<p>&bull; A: If you expected systems to be auto-sized then add one.
</p>
<p>Envelope Related
</p>
<p>&bull; Q: Were Constructions assigned to all surfaces in your model?
</p>
<p>&bull; A: Use the Geometry Previewer to render by construction and check.
</p>
<p>&bull; Q: Are interior surfaces matched with other interior surfaces?
</p>
<p>&bull; A: Use the Geometry Previewer to render by boundary condition and check.
</p>
<p>Thermal Zone Related
</p>
<p>&bull; Q: Does your model include at least one Thermal Zone and Air Terminal?
</p>
<p>&bull; A: EnergyPlus requires at least one of each to simulate. Add them.
</p>
<p>&bull; Q: Do your Thermal Zones have associated heating and cooling setpoint 
</p>
<p>schedules?
</p>
<p>&bull; A: EnergyPlus requires heating and cooling schedules to drive HVAC systems. 
</p>
<p>Add them.
</p>
<p>Fig. A.2 The Unmet Hours web page
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>318
</p>
<p> Simulation &ldquo;Soft&rdquo; Failures
</p>
<p>Just because a simulation ran doesn&rsquo;t mean it necessarily ran &ldquo;correctly.&rdquo; Throughout 
</p>
<p>the text, we have attempted to impress upon the reader the importance of reviewing 
</p>
<p>simulation results and questioning their validity through application of experience, 
</p>
<p>common sense, and intuition. Energy modeling, like any type of modeling, is a gar-
</p>
<p>bage in/garbage out process. This means that no matter how good the engine is, 
</p>
<p>incorrect input will lead to incorrect output.
</p>
<p>&bull; Always double-check your inputs for correctness.
</p>
<p>&bull; Check detailed simulation results to make sure that what you expect to happen in 
</p>
<p>your model is actually happening. This includes annual, monthly, and time series 
</p>
<p>results.
</p>
<p>&bull; When appropriate, compare your energy results to known benchmarks such as 
</p>
<p>the DOE Reference Buildings to make sure that your results are in the right 
</p>
<p>ballpark.
</p>
<p>&bull; Try incorporating some of the Automated QAQC (Quality Assurance Quality 
</p>
<p>Checking) Reporting Measures from the BCL in your workflow to quickly  
</p>
<p>&ldquo;sanity test&rdquo; your results.
</p>
<p>Fig. A.3 EnergyPlus documentation web page
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>319
</p>
<p>For simulation results that don&rsquo;t seem quite right, consider the following:
</p>
<p>End Use Related
</p>
<p>&bull; Q: Are your Spaces assigned to a Thermal Zone?
</p>
<p>&bull; A: If they aren&rsquo;t, then their Loads will not be reflected in the building&rsquo;s  
</p>
<p>performance. Assign them.
</p>
<p>&bull; Q: Did you assign Loads to your Spaces?
</p>
<p>&bull; A: Check the Spaces ( ) Tab for inherited or manually assigned loads. If any are 
</p>
<p>missing, add them.
</p>
<p>Excessive Unmet Hours
</p>
<p>&bull; Q: Were your Thermal Zone design sizing parameters consistent with Air Loop 
</p>
<p>HVAC targets?
</p>
<p>&bull; A: Review Sect. 5.2.2. Note that Zone sizingparameter and Loop target  
</p>
<p>mismatch can result in undersized systems.
</p>
<p>&bull; Q: If you attached multiple Thermal Zones to a Loop, were their sizing  
</p>
<p>parameters set consistently?
</p>
<p>&bull; A: Again, review Sect. 5.2.2. Ensure that all sizing targets are consistent.
</p>
<p> PAT Issues
</p>
<p>PAT&rsquo;s ability to run locally or in the cloud is unique, but can pose some challenges 
</p>
<p>for new users. The following tips can help avoid or correct common problems:
</p>
<p>Local Server Won&rsquo;t Start
</p>
<p>&bull; Q: Did you wait at least a minute before checking to see if the server is 
</p>
<p>available?
</p>
<p>&bull; A: PAT can take up to a minute to start processes required for simulation. Check 
</p>
<p>back in a bit.
</p>
<p>&bull; Q: Is the server not available after a minute or more?
</p>
<p>&bull; A: The following steps can help release a local server instance that has gotten 
</p>
<p>stuck:
</p>
<p>Make sure all the server processes are running. Open your task or process manager 
</p>
<p>and look for ruby processes. If the server is running, you should see several&nbsp;&ndash; 
</p>
<p>roughly equal to the number of cores on your machine + one (Fig. A.4).
</p>
<p>Also, check for a process named &ldquo;mongod.&rdquo; This is the database that stores simula-
</p>
<p>tion results.
</p>
<p>Check to see if the server is responsive in your browser by going to http://local-
</p>
<p>host:8080. If you get an error saying the site can&rsquo;t be reached, things aren&rsquo;t run-
</p>
<p>ning correctly, and the following action should be taken:
</p>
<p>&bull; Under PATs Windows Menu, select &ldquo;Server Troubleshooting Tools.&rdquo; This will 
</p>
<p>bring up the window shown in Fig. A.5.
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>320
</p>
<p>&bull; Click the  Button. This should cause the ruby and mongod processes 
</p>
<p>to disappear from your task manager or activity monitor. If they persist, use 
</p>
<p>the manager/monitor to manually quit them.
</p>
<p>&bull; Quit PAT
</p>
<p>&bull; Go to your Project directory and manually delete the files highlighted in 
</p>
<p>Fig. A.6.
</p>
<p>&bull; Restart PAT.&nbsp;In nearly all cases, simply waiting for the server to start properly 
</p>
<p>before running an analysis will take care of things.
</p>
<p>Fig. A.4 PAT server running on a four core laptop
</p>
<p>Fig. A.5 PAT server troubleshooting tools
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>321
</p>
<p>Local Server Starts But Analysis Won&rsquo;t Run
</p>
<p>&bull; Q: Why does PAT seem &ldquo;stuck&rdquo; running when I try to run my project?
</p>
<p>&bull; A: PAT is unable to run Projects from network drives. Make sure your Project 
</p>
<p>files are stored locally.
</p>
<p>Measure Manager in PAT is Empty
</p>
<p>&bull; Q: I open the Measure Manager in PAT to add Measures to my Project but it is 
</p>
<p>empty. What&rsquo;s wrong?
</p>
<p>&bull; A: In some rare instances, OpenStudio&rsquo;s Measure Manager process can be 
</p>
<p>orphaned.
</p>
<p> &ndash; Quit PAT
</p>
<p> &ndash; Use your task or process manager to look for a stray process named 
</p>
<p>&ldquo;openstudio.&rdquo;
</p>
<p> &ndash; Force them to quit.
</p>
<p> &ndash; Restart PAT.
</p>
<p> &ndash; You should see Measure content again.
</p>
<p>AWS Server Won&rsquo;t Start
</p>
<p>&bull; Q: I am trying to run PAT on the cloud via AWS, but the server isn&rsquo;t starting.
</p>
<p>&bull; A: Did you enter your AWS credentials correctly?
</p>
<p>&bull; A: Check the EC-2 console for system outage alerts.
</p>
<p>&bull; A: Monitor your EC-2 instances as shown in Chap. 7 to see if your cluster is 
</p>
<p>starting.
</p>
<p>&bull; A: Did you use the correct AMI for your version of OpenStudio?
</p>
<p>Fig. A.6 PAT server troubleshooting tools
</p>
<p>Resources</p>
<p/>
</div>
<div class="page"><p/>
<p>323&copy; Springer International Publishing AG, part of Springer Nature 2018 
</p>
<p>L. Brackney et al., Building Energy Modeling with OpenStudio, 
</p>
<p>https://doi.org/10.1007/978-3-319-77809-9
</p>
<p>A
</p>
<p>Actual Meteorological Year (AMY), 14, 248, 261
</p>
<p>Advanced Energy Design Guide (AEDG), 
</p>
<p>173, 184
</p>
<p>Air loop, 108&ndash;110, 113&ndash;118, 120, 127&ndash;141, 
</p>
<p>143, 145, 148, 151, 152, 157&ndash;160, 
</p>
<p>162, 165, 167, 168, 171, 172, 179, 
</p>
<p>180, 182, 288, 319
</p>
<p>Amazon Machine Image (AMI), 234, 235, 321
</p>
<p>Amazon Web Service (AWS), 234&ndash;238, 241, 
</p>
<p>244, 321
</p>
<p>Analysis, 1&ndash;5, 7&ndash;9, 60, 177, 184&ndash;198, 201, 
</p>
<p>207, 215, 235, 243, 263, 265&ndash;285, 
</p>
<p>310&ndash;313, 320, 321
</p>
<p>Analysis server, 8, 187, 197&ndash;198, 238
</p>
<p>Application Program Interface (API), 5, 6, 16, 
</p>
<p>35, 179, 216
</p>
<p>B
</p>
<p>Building Component Library (BCL), 7, 22, 31, 
</p>
<p>35&ndash;36, 177&ndash;180, 188, 189, 201, 
</p>
<p>207, 211, 213, 261, 280, 287, 288, 
</p>
<p>290&ndash;292, 300, 318
</p>
<p>C
</p>
<p>Calibration, 60, 243, 248&ndash;261, 312
</p>
<p>Coefficient of variation of root mean squared 
</p>
<p>error (CVRMSE), 251, 252, 254, 
</p>
<p>256, 257
</p>
<p>Command Line Interface (CLI), 309&ndash;313
</p>
<p>Compare results, 8, 187, 196, 200, 206, 209
</p>
<p>Construction, 3, 4, 7, 22&ndash;26, 30, 31, 36&ndash;39, 
</p>
<p>41, 44, 51, 52, 54, 58&ndash;61, 71, 
</p>
<p>73&ndash;75, 84, 96, 97, 100, 209, 247, 
</p>
<p>248, 259, 263, 290, 317
</p>
<p>Control, 1, 64, 72, 103, 107, 109, 115, 127, 
</p>
<p>134&ndash;140, 142, 147&ndash;151, 153,  
</p>
<p>170, 172, 174, 183, 209, 211,  
</p>
<p>219, 263&ndash;267, 272&ndash;275, 277, 
</p>
<p>279&ndash;281, 284
</p>
<p>Cooling Degree Day (CDD), 14
</p>
<p>D
</p>
<p>Daylighting, 5, 64, 173, 174, 211, 265, 287
</p>
<p>Daylighting Control Object, 265&ndash;267, 273, 
</p>
<p>274, 281
</p>
<p>Dedicated outdoor air system (DOAS), 109, 
</p>
<p>204, 205, 208
</p>
<p>Demand-controlled ventilation (DCV), 138, 140
</p>
<p>Design alternative, 4, 8, 185, 187, 189&ndash;196, 
</p>
<p>198, 200&ndash;213, 215, 216, 231, 311
</p>
<p>Design of Experiments (DOE), 3&ndash;5, 175, 219, 
</p>
<p>221, 230, 239, 265
</p>
<p>E
</p>
<p>Energy Recovery Ventilation (ERV), 173, 
</p>
<p>177&ndash;182, 184, 302
</p>
<p>Energy use intensity (EUI), 220, 240, 261
</p>
<p>EnergyPlus, 4, 5, 16, 18, 25, 30, 31, 44, 46&ndash;48, 
</p>
<p>62, 64&ndash;67, 70, 88, 103, 105, 106, 
</p>
<p>111, 116, 118, 123, 125, 127, 129, 
</p>
<p>130, 132, 134, 136, 139, 143, 144, 
</p>
<p>151, 152, 154, 156, 181, 183, 184, 
</p>
<p>188, 194, 200, 202, 205, 216, 245, 
</p>
<p>263&ndash;267, 274, 277&ndash;281, 284, 287, 
</p>
<p>315, 317, 318
</p>
<p>Index</p>
<p/>
<div class="annotation"><a href="https://doi.org/10.1007/978-3-319-77809-9">https://doi.org/10.1007/978-3-319-77809-9</a></div>
</div>
<div class="page"><p/>
<p>324
</p>
<p>EnergyPlus Weather (File) (EPW), 14, 26, 29, 
</p>
<p>30, 48, 248, 317
</p>
<p>Equipment, 7, 59&ndash;62, 65&ndash;68, 74, 84, 88, 90, 
</p>
<p>92, 106&ndash;109, 118, 123, 127, 129, 
</p>
<p>130, 134, 136, 142&ndash;144, 147&ndash;152, 
</p>
<p>154&ndash;158, 172, 174, 209, 250, 264, 
</p>
<p>303, 305
</p>
<p>G
</p>
<p>Genetic algorithm, 223&ndash;226
</p>
<p>Geometry, 4, 7, 16&ndash;18, 22, 26, 39&ndash;44, 49,  
</p>
<p>51, 53, 72, 75, 175, 265, 268, 272, 
</p>
<p>276, 317
</p>
<p>Green Building Extensible Markup Language 
</p>
<p>(gbXML), 16, 267&ndash;269, 276, 277
</p>
<p>Ground Source Heat Pump (GSHP), 205, 206, 
</p>
<p>208&ndash;211
</p>
<p>H
</p>
<p>Heating Degree Day (HDD), 14
</p>
<p>Heating, Ventilation, and Air-Conditioning 
</p>
<p>(HVAC), 4, 8, 13, 15, 26, 49, 51, 59, 
</p>
<p>69, 76, 88, 90, 98&ndash;100, 127, 129, 
</p>
<p>131, 132, 137, 138, 141, 142, 144, 
</p>
<p>152, 155, 157, 160, 168, 170, 171, 
</p>
<p>173, 175, 177, 178, 180&ndash;182, 184, 
</p>
<p>185, 187, 188, 198, 201&ndash;203, 205, 
</p>
<p>206, 209, 247, 248, 253, 261, 264, 
</p>
<p>268, 298, 317, 319
</p>
<p>HVAC Template, 112, 113, 119&ndash;124, 131, 
</p>
<p>157, 170
</p>
<p>I
</p>
<p>Ideal Air Load, 76&ndash;91, 97, 99, 100, 118,  
</p>
<p>119, 121
</p>
<p>Illuminance Map, 266&ndash;267, 274, 275, 278, 
</p>
<p>279, 281&ndash;283
</p>
<p>Infiltration, 19, 59, 63, 68&ndash;71, 84, 92, 250, 
</p>
<p>261, 263
</p>
<p>Inheritance, 6, 25&ndash;26, 59, 73, 81, 85,  
</p>
<p>96, 182
</p>
<p>Input Data File (IDF), 4, 183
</p>
<p>L
</p>
<p>Latin Hypercube Sampling (LHS), 217, 
</p>
<p>219&ndash;221, 229, 240, 243&ndash;247,  
</p>
<p>250, 261
</p>
<p>Lighting, 61, 62, 64, 65, 209, 211, 264, 277, 
</p>
<p>280, 283, 285
</p>
<p>Lighting power density (LPD), 64, 211,  
</p>
<p>239, 240
</p>
<p>Load, 1, 3, 4, 7, 31, 34, 59, 60, 62&ndash;70, 72&ndash;74, 
</p>
<p>76&ndash;90, 92, 93, 96, 97, 99, 104, 105, 
</p>
<p>118, 132, 135, 136, 139, 150, 151, 
</p>
<p>153, 168, 170, 172, 211, 250, 261, 
</p>
<p>302&ndash;305
</p>
<p>M
</p>
<p>Measure, 5, 14, 60, 170, 173, 215, 265, 287
</p>
<p>Meta Command Line Interface (Meta CLI), 
</p>
<p>311&ndash;313
</p>
<p>N
</p>
<p>Net mean bias error (NMBE), 251, 252, 254, 
</p>
<p>256, 257
</p>
<p>O
</p>
<p>Object model, 65, 116, 173, 182, 183, 265
</p>
<p>OpenStudio Analysis File (OSA), 197&ndash;198, 
</p>
<p>238, 312
</p>
<p>OpenStudio Measure, 5&ndash;8, 170, 173&ndash;213, 265, 
</p>
<p>285, 287&ndash;290, 300, 302, 306, 312, 313
</p>
<p>OpenStudio Model File (OSM), 28, 31, 34, 35, 
</p>
<p>37, 46, 61, 62, 182, 183, 205, 250, 
</p>
<p>251, 309
</p>
<p>OpenStudio Workflow File (OSW), 9, 
</p>
<p>181&ndash;185, 200, 238, 280, 309&ndash;313
</p>
<p>Optimization, 7, 197, 216, 220, 223&ndash;226, 232, 
</p>
<p>233, 248&ndash;261, 312
</p>
<p>Outdoor air (OA), 14, 21, 44, 68&ndash;70, 127&ndash;129, 
</p>
<p>132, 134&ndash;135, 137&ndash;140, 148, 153, 
</p>
<p>158, 163
</p>
<p>Output, 8, 44, 65, 67, 70, 100, 134, 137, 138, 
</p>
<p>140, 157, 180, 184, 185, 187, 191, 
</p>
<p>194, 200, 216, 221, 231&ndash;233, 
</p>
<p>238&ndash;240, 242&ndash;245, 248, 251, 252, 
</p>
<p>257, 259, 261, 263, 264, 266, 267, 
</p>
<p>277, 278, 281, 298, 304, 306&ndash;308, 
</p>
<p>310, 315, 318
</p>
<p>P
</p>
<p>Packaged Terminal Air Conditioning (PTAC), 
</p>
<p>106, 107
</p>
<p>Parametric Analysis Tool (PAT), 8, 9, 
</p>
<p>185&ndash;199, 201, 203, 205&ndash;207, 211, 
</p>
<p>213, 215&ndash;226, 228&ndash;238, 251
</p>
<p>Pareto Front, 224&ndash;226
</p>
<p>Part load ratio (PLR), 150, 172
</p>
<p>People, 5, 13, 59, 62, 65&ndash;67, 74, 84, 87, 92, 94
</p>
<p>Plant loop, 109&ndash;111, 113, 116, 117, 120, 124, 
</p>
<p>127, 130, 131, 141&ndash;151, 153, 156, 
</p>
<p>157, 160&ndash;169, 182
</p>
<p>Index</p>
<p/>
</div>
<div class="page"><p/>
<p>325
</p>
<p>R
</p>
<p>Radiance, 5, 65, 75, 263&ndash;267, 280&ndash;285, 287
</p>
<p>Report, 44&ndash;48, 55, 56, 86&ndash;89, 99, 121, 123, 
</p>
<p>125, 168, 175, 180, 182, 187, 191, 
</p>
<p>194, 196&ndash;198, 200, 203, 204, 245, 
</p>
<p>246, 251, 259, 260, 278, 295, 300, 
</p>
<p>302&ndash;304
</p>
<p>Rooftop unit (RTU), 179
</p>
<p>Run simulation, 8, 181, 187, 193&ndash;194, 198, 
</p>
<p>200, 204, 209, 277, 281
</p>
<p>S
</p>
<p>Sampling, 7, 60, 185, 197, 216, 217, 219&ndash;220, 
</p>
<p>228&ndash;230, 241&ndash;247, 312
</p>
<p>Schedule, 1, 7, 18, 60&ndash;63, 65, 67, 68, 71, 72, 
</p>
<p>76&ndash;85, 89, 90, 92, 94&ndash;97, 99, 100, 
</p>
<p>104, 105, 107, 135, 137, 138, 140, 
</p>
<p>153, 154, 156, 165, 172, 182, 247, 
</p>
<p>265, 266, 276, 277, 279, 280, 288
</p>
<p>Site, 7, 29, 30, 50, 119, 248, 276, 315, 319
</p>
<p>Sizing, 15, 88, 118, 119, 123, 125, 127, 
</p>
<p>132&ndash;135, 139, 145&ndash;148, 152, 161, 
</p>
<p>163, 165, 170, 172, 319
</p>
<p>SketchUp, 4, 11, 16, 17, 265, 268&ndash;272, 
</p>
<p>274&ndash;276
</p>
<p>Software Development Kit (SDK), 5&ndash;8, 26, 66
</p>
<p>Space, 2, 16, 59, 103, 134, 174, 215, 264, 300
</p>
<p>Space type, 7, 18, 25, 26, 31, 39, 41, 60&ndash;74, 
</p>
<p>76, 82&ndash;85, 87, 89, 92&ndash;100, 182, 
</p>
<p>268, 276, 277, 285, 300
</p>
<p>Sub-Surface, 19, 23&ndash;26, 73, 74, 85, 103
</p>
<p>Supply air temperature (SAT), 118
</p>
<p>Surface, 15, 19&ndash;26, 39, 43, 44, 49&ndash;51, 54, 65, 
</p>
<p>66, 73&ndash;76, 85, 96, 97, 103, 105, 
</p>
<p>123, 222, 223, 226, 290, 317
</p>
<p>T
</p>
<p>Thermal Zone, 7, 18, 19, 26, 39, 41, 42, 54, 
</p>
<p>58, 72, 76, 89, 95, 97, 100, 
</p>
<p>103&ndash;107, 109, 114, 115, 118, 
</p>
<p>120&ndash;123, 126&ndash;128, 131&ndash;134, 136, 
</p>
<p>137, 139, 140, 152, 153, 160, 165, 
</p>
<p>167, 168, 266, 268, 269, 271, 
</p>
<p>275&ndash;277, 317, 319
</p>
<p>Troubleshooting, 48, 151, 205, 316, 319, 321
</p>
<p>Typical Meteorological Year (TMY), 14&ndash;16, 
</p>
<p>27, 248
</p>
<p>U
</p>
<p>Uncertainty, 60, 241&ndash;247, 253, 261
</p>
<p>V
</p>
<p>Variable air volume (VAV), 111, 113, 115, 
</p>
<p>120, 122&ndash;124, 131, 134, 135, 148, 
</p>
<p>157&ndash;160, 162, 165, 167, 168, 170, 
</p>
<p>172, 184
</p>
<p>Variables, 8, 44, 48, 49, 62, 87, 111, 139, 151, 
</p>
<p>156, 158, 161, 164, 172, 191, 198, 
</p>
<p>211, 219&ndash;223, 226&ndash;230, 232, 239, 
</p>
<p>240, 243&ndash;248, 251&ndash;253, 256, 257, 
</p>
<p>259, 261, 277, 278, 293, 295, 300, 304
</p>
<p>W
</p>
<p>Water, 8, 13, 62, 66&ndash;69, 109, 111, 113, 
</p>
<p>115&ndash;117, 120, 122, 129, 130, 
</p>
<p>141&ndash;148, 151, 154&ndash;158, 160&ndash;168, 
</p>
<p>172, 251, 263, 293
</p>
<p>Weather, 7, 13&ndash;15, 26&ndash;29, 39, 45, 48, 58, 59, 118, 
</p>
<p>119, 187, 191, 192, 198, 216, 243, 
</p>
<p>248, 261, 276, 310, 312, 314, 317
</p>
<p>Window-to-wall ratio (WWR), 54, 173, 
</p>
<p>190&ndash;192, 194, 195, 197, 227&ndash;230, 
</p>
<p>239, 240
</p>
<p>Z
</p>
<p>Zone Equipment, 7, 107&ndash;109, 111, 115, 127, 
</p>
<p>152&ndash;153, 168&ndash;170
</p>
<p>Zoning, 18, 103&ndash;106, 118, 120, 124, 126
</p>
<p>Index</p>
<p/>
</div>
<ul>	<li>Dedication</li>
	<li>Foreword</li>
	<li>Preface</li>
	<li>Acknowledgments</li>
	<li>Contents</li>
	<li>Abbreviations and Acronyms</li>
	<li>List of Figures</li>
	<li>List of Tables</li>
	<li>Chapter 1: Introduction to&nbsp;Building Energy Modeling</li>
<ul>	<li>1.1 Why Modeling?</li>
	<li>1.2 A Brief History of&nbsp;Building Energy Modeling and&nbsp;Simulation</li>
	<li>1.3 What Is OpenStudio?</li>
	<li>1.4 Overview of&nbsp;Book Structure</li>
	<li>1.5 Installing OpenStudio</li>
	<li>References</li>
</ul>
	<li>Chapter 2: Building Envelope Specification</li>
<ul>	<li>2.1 Building Envelope</li>
	<li>2.2 Weather</li>
	<li>2.3 Envelope Geometry and&nbsp;Building Spaces</li>
	<li>2.4 Surfaces</li>
	<li>2.5 Constructions</li>
	<li>2.6 Sub-Surfaces</li>
	<li>2.7 Introduction to&nbsp;Data Inheritance in&nbsp;OpenStudio</li>
	<li>2.8 Checkpoint One: Creating an&nbsp;Energy Model with&nbsp;an&nbsp;Unconditioned Envelope</li>
<ul>	<li>2.8.1 Adding Weather to&nbsp;a&nbsp;Model</li>
	<li>2.8.2 Creating New Materials</li>
	<li>2.8.3 Importing Materials from&nbsp;Existing Models</li>
	<li>2.8.4 Importing Materials from&nbsp;the&nbsp;Building Component Library</li>
	<li>2.8.5 Creating Construction Assemblies</li>
	<li>2.8.6 Creating a&nbsp;Construction Set</li>
	<li>2.8.7 Creating Geometry with&nbsp;the&nbsp;OpenStudio Floor Plan Editor</li>
	<li>2.8.8 Running Your First Energy Simulation</li>
	<li>2.8.9 Studying Time Series Results</li>
</ul>
	<li>2.9 Checkpoint Two: Energy Model of&nbsp;a&nbsp;School</li>
	<li>2.10 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 3: Defining Energy Uses and&nbsp;Spaces</li>
<ul>	<li>3.1 Energy Uses and&nbsp;Thermal Loads</li>
	<li>3.2 Space Types</li>
<ul>	<li>3.2.1 Schedules</li>
	<li>3.2.2 Load Definitions</li>
<ul>	<li>3.2.2.1 Lights and&nbsp;Luminaires</li>
	<li>3.2.2.2 Electric, Gas, Steam, and&nbsp;Other Equipment Loads</li>
	<li>3.2.2.3 People</li>
	<li>3.2.2.4 Water Use Equipment</li>
	<li>3.2.2.5 Infiltration</li>
</ul>
	<li>3.2.3 Building a&nbsp;Space Type</li>
</ul>
	<li>3.3 Spaces</li>
	<li>3.4 Checkpoint Three: Ideal Air Load Simulation of&nbsp;a&nbsp;Small Model</li>
<ul>	<li>3.4.1 Creating a&nbsp;Schedule Set</li>
	<li>3.4.2 Defining Our Loads</li>
	<li>3.4.3 Defining and&nbsp;Assigning Our Space Type</li>
	<li>3.4.4 Running the&nbsp;Simulation</li>
	<li>3.4.5 Ideal Air Loads</li>
</ul>
	<li>3.5 Checkpoint Four: Assigning Space Types to&nbsp;a&nbsp;School Model</li>
	<li>3.6 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 4: Introduction to&nbsp;HVAC Systems</li>
<ul>	<li>4.1 Introduction</li>
	<li>4.2 Model Zoning</li>
<ul>	<li>4.2.1 Rules of&nbsp;Thumb for&nbsp;Combining Spaces into&nbsp;Thermal Zones</li>
	<li>4.2.2 Zoning During Early Design</li>
</ul>
	<li>4.3 HVAC System Types</li>
<ul>	<li>4.3.1 Zone HVAC Equipment</li>
	<li>4.3.2 Add a&nbsp;Zone HVAC Component</li>
	<li>4.3.3 Air Loop Systems</li>
	<li>4.3.4 Plant Loop Systems</li>
</ul>
	<li>4.4 HVAC System Templates</li>
<ul>	<li>4.4.1 Add a&nbsp;Template Air Loop HVAC System</li>
</ul>
	<li>4.5 Auto-Sizing HVAC Systems</li>
<ul>	<li>4.5.1 Design Day Files</li>
</ul>
	<li>4.6 Checkpoint Five: Adding a&nbsp;Template HVAC System to&nbsp;a&nbsp;School Model</li>
	<li>4.7 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 5: Advanced HVAC Topics</li>
<ul>	<li>5.1 Introduction</li>
	<li>5.2 Air Loops</li>
<ul>	<li>5.2.1 Air Loop Configuration</li>
<ul>	<li>5.2.1.1 Air Loop Supply Side</li>
	<li>5.2.1.2 Air Loop Demand Side</li>
</ul>
	<li>5.2.2 Sizing Air Loops</li>
<ul>	<li>5.2.2.1 Outdoor Air (OA) Sizing</li>
</ul>
	<li>5.2.3 Air Loop Control</li>
<ul>	<li>5.2.3.1 Air Loop Temperature Control</li>
	<li>5.2.3.2 Air Loop Availability Control</li>
	<li>5.2.3.3 Outdoor Air Control</li>
</ul>
	<li>5.2.4 Air Loop Simulation Process</li>
</ul>
	<li>5.3 Plant Loops</li>
<ul>	<li>5.3.1 Plant Loop Configuration</li>
<ul>	<li>5.3.1.1 Plant Loop Supply Side</li>
	<li>5.3.1.2 Plant Loop Demand Side</li>
</ul>
	<li>5.3.2 Plant Loop Sizing</li>
	<li>5.3.3 Plant Loop Control</li>
<ul>	<li>5.3.3.1 Plant Loop Temperature Control</li>
	<li>5.3.3.2 Plant Loop Equipment Dispatch Control</li>
	<li>5.3.3.3 Prescribing Plant Loop Load Ranges</li>
</ul>
	<li>5.3.4 Plant Loop Simulation Process</li>
</ul>
	<li>5.4 Zone Equipment</li>
<ul>	<li>5.4.1 Zone Equipment Configuration</li>
	<li>5.4.2 Zone Equipment Sizing</li>
	<li>5.4.3 Zone Equipment Control</li>
	<li>5.4.4 Zone Equipment Simulation Process</li>
</ul>
	<li>5.5 Service Water Systems</li>
<ul>	<li>5.5.1 Defining Water Use Equipment</li>
	<li>5.5.2 Adding Water Use Equipment to&nbsp;a&nbsp;Model</li>
</ul>
	<li>5.6 Checkpoint Six: Air Loops</li>
	<li>5.7 Checkpoint Seven: Plant Loops</li>
	<li>5.8 Checkpoint Eight: Zone Equipment</li>
	<li>5.9 Additional Exercises</li>
	<li>Reference</li>
</ul>
	<li>Chapter 6: OpenStudio Measures</li>
<ul>	<li>6.1 Introduction to&nbsp;OpenStudio Measures</li>
	<li>6.2 Accessing and&nbsp;Using Measures</li>
	<li>6.3 Using Measures Within the&nbsp;OpenStudio Application</li>
<ul>	<li>6.3.1 Applying a&nbsp;Measure Immediately to&nbsp;a&nbsp;Model</li>
	<li>6.3.2 Adding Measures to&nbsp;an&nbsp;OpenStudio Application Workflow</li>
</ul>
	<li>6.4 Introduction to&nbsp;Parametric Analysis</li>
<ul>	<li>6.4.1 Starting PAT</li>
	<li>6.4.2 Managing Measures in&nbsp;PAT</li>
	<li>6.4.3 Creating Design Alternatives in&nbsp;PAT</li>
	<li>6.4.4 Running an&nbsp;Analysis in&nbsp;PAT</li>
	<li>6.4.5 Comparing Results in&nbsp;PAT</li>
	<li>6.4.6 The OpenStudio Analysis Server Tab</li>
</ul>
	<li>6.5 Checkpoint Nine: Introduction to&nbsp;Parametrics</li>
	<li>6.6 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 7: Parametric Analysis with&nbsp;OpenStudio</li>
<ul>	<li>7.1 Introduction to&nbsp;Parametric Analysis</li>
	<li>7.2 OpenStudio Server</li>
	<li>7.3 Algorithms in&nbsp;PAT</li>
<ul>	<li>7.3.1 Single Run</li>
	<li>7.3.2 Pre-Flight</li>
	<li>7.3.3 Repeat Run</li>
	<li>7.3.4 Baseline Perturbation</li>
	<li>7.3.5 Diagonal</li>
	<li>7.3.6 Design of&nbsp;Experiments (DOE)</li>
	<li>7.3.7 Latin Hypercube Sampling (LHS)</li>
	<li>7.3.8 Morris Method</li>
	<li>7.3.9 Sobol Method</li>
	<li>7.3.10 Fourier Amplitude Sensitivity Test (FAST99) Method</li>
	<li>7.3.11 Optim</li>
	<li>7.3.12 Particle Swarm Optimization (PSO)</li>
	<li>7.3.13 Nondominated Sorting Genetic Algorithm 2 (NSGA2)</li>
	<li>7.3.14 Genetic Algorithm with&nbsp;Island Evolution (GAISL)</li>
	<li>7.3.15 Strength Pareto Evolutionary Algorithm 2 (SPEA2)</li>
	<li>7.3.16 R-GENetic Optimization Using Derivatives (RGENOUD)</li>
</ul>
	<li>7.4 Working with&nbsp;Measure Variables and&nbsp;Arguments</li>
	<li>7.5 Other Changes to&nbsp;PAT in&nbsp;Algorithmic Mode</li>
<ul>	<li>7.5.1 The Outputs Tab in&nbsp;Algorithmic Mode</li>
	<li>7.5.2 The Run Tab in&nbsp;Algorithmic Mode</li>
</ul>
	<li>7.6 Working with&nbsp;OpenStudio Server</li>
	<li>7.7 Checkpoint Ten: Sampling Problems and&nbsp;Uncertainty Analysis</li>
	<li>7.8 Checkpoint Eleven: Calibration via&nbsp;Sensitivity Analysis and&nbsp;Optimization</li>
	<li>7.9 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 8: Daylighting</li>
<ul>	<li>8.1 Introduction</li>
	<li>8.2 Daylighting</li>
<ul>	<li>8.2.1 Daylighting Controls</li>
	<li>8.2.2 Illuminance Maps</li>
	<li>8.2.3 Advanced Daylighting Objects</li>
</ul>
	<li>8.3 Checkpoint Twelve: Daylighting Analysis</li>
	<li>8.4 Additional Exercises</li>
	<li>References</li>
</ul>
	<li>Chapter 9: The OpenStudio Software Development Kit</li>
<ul>	<li>9.1 Introduction</li>
	<li>9.2 OpenStudio Measure Overview</li>
	<li>9.3 Adapting an&nbsp;Existing Measure</li>
	<li>9.4 Checkpoint Thirteen: Adapting Measures</li>
<ul>	<li>9.4.1 Text Editor</li>
	<li>9.4.2 Programming Background</li>
	<li>9.4.3 Copy the&nbsp;Measure</li>
	<li>9.4.4 Review the&nbsp;Measure</li>
	<li>9.4.5 Modify the&nbsp;Measure</li>
</ul>
	<li>9.5 Creating a&nbsp;New Measure</li>
	<li>9.6 Checkpoint Fourteen: Creating a&nbsp;New Measure</li>
	<li>9.7 Checkpoint Fifteen: Testing Measures</li>
	<li>9.8 The OpenStudio Command Line Interface</li>
	<li>9.9 The OpenStudio Meta Command Line Interface</li>
	<li>9.10 Additional Exercises (for Advanced Users)</li>
	<li>References</li>
</ul>
	<li>Correction to: Building Energy Modeling with&nbsp;OpenStudio</li>
	<li>Resources</li>
<ul>	<li>Common Simulation Failures</li>
	<li>Simulation &ldquo;Soft&rdquo; Failures</li>
	<li>PAT Issues</li>
</ul>
	<li>Index</li>
</ul>
</body></html>